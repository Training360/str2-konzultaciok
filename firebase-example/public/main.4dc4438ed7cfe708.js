(self.webpackChunkfirebase_example=self.webpackChunkfirebase_example||[]).push([[179],{2011:(et,Ce,P)=>{"use strict";P.d(Ce,{hO:()=>Ve,xv:()=>le,Dh:()=>ue,GT:()=>fe,cc:()=>De,on:()=>B,pX:()=>X});var g=P(5e3),Y=P(127),O=P(5813);et=P.hmd(et);const pe=["ngOnDestroy"],X=(oe,Te,Re,ie={})=>new Proxy(oe,{get:(ge,ye)=>Re.runOutsideAngular(()=>{var je;if(oe[ye])return(null===(je=null==ie?void 0:ie.spy)||void 0===je?void 0:je.get)&&ie.spy.get(ye,oe[ye]),oe[ye];if(pe.indexOf(ye)>-1)return()=>{};const Ue=Te.toPromise().then(ee=>{const Z=ee&&ee[ye];return"function"==typeof Z?Z.bind(ee):Z&&Z.then?Z.then(ne=>Re.run(()=>ne)):Re.run(()=>Z)});return new Proxy(()=>{},{get:(ee,Z)=>Ue[Z],apply:(ee,Z,ne)=>Ue.then(me=>{var se;const Ne=me&&me(...ne);return(null===(se=null==ie?void 0:ie.spy)||void 0===se?void 0:se.apply)&&ie.spy.apply(ye,ne,Ne),Ne})})})}),fe=(oe,Te)=>{Te.forEach(Re=>{Object.getOwnPropertyNames(Re.prototype||Re).forEach(ie=>{Object.defineProperty(oe.prototype,ie,Object.getOwnPropertyDescriptor(Re.prototype||Re,ie))})})};class re{constructor(Te){return Te}}const ue=new g.OlP("angularfire2.app.options"),le=new g.OlP("angularfire2.app.name");function B(oe,Te,Re){const ge="object"==typeof Re&&Re||{};ge.name=ge.name||"string"==typeof Re&&Re||"[DEFAULT]";const je=Y.Z.apps.filter(Ue=>Ue&&Ue.name===ge.name)[0]||Te.runOutsideAngular(()=>Y.Z.initializeApp(oe,ge));try{JSON.stringify(oe)!==JSON.stringify(je.options)&&V("error",`${je.name} Firebase App already initialized with different options${et.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ue){}return new re(je)}const V=(oe,...Te)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[oe](...Te)},K={provide:re,useFactory:B,deps:[ue,g.R0b,[new g.FiY,le]]};let Ve=(()=>{class oe{constructor(Re){Y.Z.registerVersion("angularfire",O.q4.full,"core"),Y.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Y.Z.registerVersion("angular",g.q4F.full,Re.toString())}static initializeApp(Re,ie){return{ngModule:oe,providers:[{provide:ue,useValue:Re},{provide:le,useValue:ie}]}}}return oe.\u0275fac=function(Re){return new(Re||oe)(g.LFG(g.Lbi))},oe.\u0275mod=g.oAB({type:oe}),oe.\u0275inj=g.cJS({providers:[K]}),oe})();function De(oe,Te,Re,ie,ge){const[,ye,je]=globalThis.\u0275AngularfireInstanceCache.find(Ue=>Ue[0]===oe)||[];if(ye)return function xe(oe,Te){try{return oe.toString()===Te.toString()}catch(Re){return oe===Te}}(ge,je)||(q("error",`${Te} was already initialized on the ${Re} Firebase App with different settings.${Fe?" You may need to reload as Firebase is not HMR aware.":""}`),q("warn",{is:ge,was:je})),ye;{const Ue=ie();return globalThis.\u0275AngularfireInstanceCache.push([oe,Ue,ge]),Ue}}const Fe=!!et.hot,q=(oe,...Te)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[oe](...Te)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(et,Ce,P)=>{"use strict";P.d(Ce,{q4:()=>lo,iC:()=>Pi,HU:()=>Cl,vb:()=>Kc,JM:()=>Uh});var g=P(5e3),Y=P(5867),O=P(5861),pe=P(9681),X=P(2090),fe=P(4859),re=P(1877),ue=P(2940);const le="@firebase/installations",B="0.5.5",K=`w:${B}`,Ve="FIS_v2",Te=new X.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Re(D){return D instanceof X.ZR&&D.code.includes("request-failed")}function ie({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function ge(D){return{token:D.token,requestStatus:2,expiresIn:me(D.expiresIn),creationTime:Date.now()}}function ye(D,C){return je.apply(this,arguments)}function je(){return(je=(0,O.Z)(function*(D,C){const F=(yield C.json()).error;return Te.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Ue({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function ee(D,{refreshToken:C}){const M=Ue(D);return M.append("Authorization",function se(D){return`${Ve} ${D}`}(C)),M}function Z(D){return ne.apply(this,arguments)}function ne(){return(ne=(0,O.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function me(D){return Number(D.replace("s","000"))}function Ne(D,C){return ce.apply(this,arguments)}function ce(){return(ce=(0,O.Z)(function*(D,{fid:C}){const M=ie(D),te={method:"POST",headers:Ue(D),body:JSON.stringify({fid:C,authVersion:Ve,appId:D.appId,sdkVersion:K})},Ae=yield Z(()=>fetch(M,te));if(Ae.ok){const ke=yield Ae.json();return{fid:ke.fid||C,registrationStatus:2,refreshToken:ke.refreshToken,authToken:ge(ke.authToken)}}throw yield ye("Create Installation",Ae)})).apply(this,arguments)}function pt(D){return new Promise(C=>{setTimeout(C,D)})}const Cn=/^[cdef][\w-]{21}$/;function st(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const M=function Rn(D){return function kt(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Cn.test(M)?M:""}catch(D){return""}}function Gt(D){return`${D.appName}!${D.appId}`}const rr=new Map;function Bt(D,C){const M=Gt(D);At(M,C),function $i(D,C){const M=function vs(){return!Qn&&"BroadcastChannel"in self&&(Qn=new BroadcastChannel("[Firebase] FID Change"),Qn.onmessage=D=>{At(D.data.key,D.data.fid)}),Qn}();M&&M.postMessage({key:D,fid:C}),function mr(){0===rr.size&&Qn&&(Qn.close(),Qn=null)}()}(M,C)}function At(D,C){const M=rr.get(D);if(M)for(const F of M)F(C)}let Qn=null;const Xr="firebase-installations-store";let Ti=null;function ut(){return Ti||(Ti=(0,ue.openDb)("firebase-installations-database",1,D=>{0===D.oldVersion&&D.createObjectStore(Xr)})),Ti}function Nr(D,C){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,O.Z)(function*(D,C){const M=Gt(D),W=(yield ut()).transaction(Xr,"readwrite"),te=W.objectStore(Xr),Ae=yield te.get(M);return yield te.put(C,M),yield W.complete,(!Ae||Ae.fid!==C.fid)&&Bt(D,C.fid),C})).apply(this,arguments)}function yn(D){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,O.Z)(function*(D){const C=Gt(D),F=(yield ut()).transaction(Xr,"readwrite");yield F.objectStore(Xr).delete(C),yield F.complete})).apply(this,arguments)}function ct(D,C){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,O.Z)(function*(D,C){const M=Gt(D),W=(yield ut()).transaction(Xr,"readwrite"),te=W.objectStore(Xr),Ae=yield te.get(M),ke=C(Ae);return void 0===ke?yield te.delete(M):yield te.put(ke,M),yield W.complete,ke&&(!Ae||Ae.fid!==ke.fid)&&Bt(D,ke.fid),ke})).apply(this,arguments)}function Ct(D){return en.apply(this,arguments)}function en(){return(en=(0,O.Z)(function*(D){let C;const M=yield ct(D,F=>{const W=ir(F),te=bt(D,W);return C=te.registrationPromise,te.installationEntry});return""===M.fid?{installationEntry:yield C}:{installationEntry:M,registrationPromise:C}})).apply(this,arguments)}function ir(D){return Qo(D||{fid:st(),registrationStatus:0})}function bt(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(Te.create("app-offline"))};const M={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function Ye(D,C){return ot.apply(this,arguments)}(D,M);return{installationEntry:M,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:hi(D)}:{installationEntry:C}}function ot(){return(ot=(0,O.Z)(function*(D,C){try{return Nr(D,yield Ne(D,C))}catch(M){throw Re(M)&&409===M.customData.serverCode?yield yn(D):yield Nr(D,{fid:C.fid,registrationStatus:0}),M}})).apply(this,arguments)}function hi(D){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,O.Z)(function*(D){let C=yield Rt(D);for(;1===C.registrationStatus;)yield pt(100),C=yield Rt(D);if(0===C.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield Ct(D);return F||M}return C})).apply(this,arguments)}function Rt(D){return ct(D,C=>{if(!C)throw Te.create("installation-not-found");return Qo(C)})}function Qo(D){return function Or(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function ei(D,C){return L.apply(this,arguments)}function L(){return(L=(0,O.Z)(function*({appConfig:D,platformLoggerProvider:C},M){const F=j(D,M),W=ee(D,M),te=C.getImmediate({optional:!0});te&&W.append("x-firebase-client",te.getPlatformInfoString());const ke={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:K}})},qe=yield Z(()=>fetch(F,ke));if(qe.ok)return ge(yield qe.json());throw yield ye("Generate Auth Token",qe)})).apply(this,arguments)}function j(D,{fid:C}){return`${ie(D)}/${C}/authTokens:generate`}function $(D){return ve.apply(this,arguments)}function ve(){return(ve=(0,O.Z)(function*(D,C=!1){let M;const F=yield ct(D.appConfig,te=>{if(!tn(te))throw Te.create("not-registered");const Ae=te.authToken;if(!C&&Pr(Ae))return te;if(1===Ae.requestStatus)return M=J(D,C),te;{if(!navigator.onLine)throw Te.create("app-offline");const ke=On(te);return M=qt(D,ke),ke}});return M?yield M:F.authToken})).apply(this,arguments)}function J(D,C){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,O.Z)(function*(D,C){let M=yield lt(D.appConfig);for(;1===M.authToken.requestStatus;)yield pt(100),M=yield lt(D.appConfig);const F=M.authToken;return 0===F.requestStatus?$(D,C):F})).apply(this,arguments)}function lt(D){return ct(D,C=>{if(!tn(C))throw Te.create("not-registered");return function yr(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function qt(D,C){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,O.Z)(function*(D,C){try{const M=yield ei(D,C),F=Object.assign(Object.assign({},C),{authToken:M});return yield Nr(D.appConfig,F),M}catch(M){if(!Re(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield Nr(D.appConfig,F)}else yield yn(D.appConfig);throw M}})).apply(this,arguments)}function tn(D){return void 0!==D&&2===D.registrationStatus}function Pr(D){return 2===D.requestStatus&&!function It(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+36e5}(D)}function On(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}function Jo(){return(Jo=(0,O.Z)(function*(D){const C=D,{installationEntry:M,registrationPromise:F}=yield Ct(C.appConfig);return F?F.catch(console.error):$(C).catch(console.error),M.fid})).apply(this,arguments)}function Xo(){return(Xo=(0,O.Z)(function*(D,C=!1){const M=D;return yield Pn(M.appConfig),(yield $(M,C)).token})).apply(this,arguments)}function Pn(D){return _r.apply(this,arguments)}function _r(){return(_r=(0,O.Z)(function*(D){const{registrationPromise:C}=yield Ct(D);C&&(yield C)})).apply(this,arguments)}function Do(D){return Te.create("missing-app-config-values",{valueName:D})}const Fr="installations",wt=D=>{const C=D.getProvider("app").getImmediate(),M=function Jn(D){if(!D||!D.options)throw Do("App Configuration");if(!D.name)throw Do("App Name");const C=["projectId","apiKey","appId"];for(const M of C)if(!D.options[M])throw Do(M);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:M,platformLoggerProvider:(0,pe._getProvider)(C,"platform-logger"),_delete:()=>Promise.resolve()}},Zt=D=>{const C=D.getProvider("app").getImmediate(),M=(0,pe._getProvider)(C,Fr).getImmediate();return{getId:()=>function Xa(D){return Jo.apply(this,arguments)}(M),getToken:W=>function eu(D){return Xo.apply(this,arguments)}(M,W)}};(function vr(){(0,pe._registerComponent)(new fe.wA(Fr,wt,"PUBLIC")),(0,pe._registerComponent)(new fe.wA("installations-internal",Zt,"PRIVATE"))})(),(0,pe.registerVersion)(le,B),(0,pe.registerVersion)(le,B,"esm2017");const qi="@firebase/remote-config",ln=new X.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ic{constructor(C,M,F,W){this.client=C,this.storage=M,this.storageCache=F,this.logger=W}isCachedDataFresh(C,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,W=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${W}.`),W}fetch(C){var M=this;return(0,O.Z)(function*(){const[F,W]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(W&&M.isCachedDataFresh(C.cacheMaxAgeMillis,F))return W;C.eTag=W&&W.eTag;const te=yield M.client.fetch(C),Ae=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===te.status&&Ae.push(M.storage.setLastSuccessfulFetchResponse(te)),yield Promise.all(Ae),te})()}}function nu(D=navigator){return D.languages&&D.languages[0]||D.language}class Tn{constructor(C,M,F,W,te,Ae){this.firebaseInstallations=C,this.sdkVersion=M,this.namespace=F,this.projectId=W,this.apiKey=te,this.appId=Ae}fetch(C){var M=this;return(0,O.Z)(function*(){const[F,W]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Ae=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,ke={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},qe={sdk_version:M.sdkVersion,app_instance_id:F,app_instance_id_token:W,app_id:M.appId,language_code:nu()},Mt={method:"POST",headers:ke,body:JSON.stringify(qe)},Lt=fetch(Ae,Mt),Ln=new Promise((as,Ar)=>{C.signal.addEventListener(()=>{const _u=new Error("The operation was aborted.");_u.name="AbortError",Ar(_u)})});let Zn;try{yield Promise.race([Lt,Ln]),Zn=yield Lt}catch(as){let Ar="fetch-client-network";throw"AbortError"===as.name&&(Ar="fetch-timeout"),ln.create(Ar,{originalErrorMessage:as.message})}let rn=Zn.status;const Ps=Zn.headers.get("ETag")||void 0;let Tr,ur;if(200===Zn.status){let as;try{as=yield Zn.json()}catch(Ar){throw ln.create("fetch-client-parse",{originalErrorMessage:Ar.message})}Tr=as.entries,ur=as.state}if("INSTANCE_STATE_UNSPECIFIED"===ur?rn=500:"NO_CHANGE"===ur?rn=304:("NO_TEMPLATE"===ur||"EMPTY_CONFIG"===ur)&&(Tr={}),304!==rn&&200!==rn)throw ln.create("fetch-status",{httpStatus:rn});return{status:rn,eTag:Ps,config:Tr}})()}}class zi{constructor(C,M){this.client=C,this.storage=M}fetch(C){var M=this;return(0,O.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:M,backoffCount:F}){var W=this;return(0,O.Z)(function*(){yield function Dc(D,C){return new Promise((M,F)=>{const W=Math.max(C-Date.now(),0),te=setTimeout(M,W);D.addEventListener(()=>{clearTimeout(te),F(ln.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,M);try{const te=yield W.client.fetch(C);return yield W.storage.deleteThrottleMetadata(),te}catch(te){if(!function vp(D){if(!(D instanceof X.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(te))throw te;const Ae={throttleEndTimeMillis:Date.now()+(0,X.$s)(F),backoffCount:F+1};return yield W.storage.setThrottleMetadata(Ae),W.attemptFetch(C,Ae)}})()}}class wp{constructor(C,M,F,W,te){this.app=C,this._client=M,this._storageCache=F,this._storage=W,this._logger=te,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ta(D,C){const M=D.target.error||void 0;return ln.create(C,{originalErrorMessage:M&&M.message})}const So="app_namespace_store";class bc{constructor(C,M,F,W=function Dp(){return new Promise((D,C)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=F=>{C(ta(F,"storage-open"))},M.onsuccess=F=>{D(F.target.result)},M.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(So,{keyPath:"compositeKey"})}}catch(M){C(ln.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=C,this.appName=M,this.namespace=F,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((W,te)=>{const ke=F.transaction([So],"readonly").objectStore(So),qe=M.createCompositeKey(C);try{const Mt=ke.get(qe);Mt.onerror=Lt=>{te(ta(Lt,"storage-get"))},Mt.onsuccess=Lt=>{const Ln=Lt.target.result;W(Ln?Ln.value:void 0)}}catch(Mt){te(ln.create("storage-get",{originalErrorMessage:Mt&&Mt.message}))}})})()}set(C,M){var F=this;return(0,O.Z)(function*(){const W=yield F.openDbPromise;return new Promise((te,Ae)=>{const qe=W.transaction([So],"readwrite").objectStore(So),Mt=F.createCompositeKey(C);try{const Lt=qe.put({compositeKey:Mt,value:M});Lt.onerror=Ln=>{Ae(ta(Ln,"storage-set"))},Lt.onsuccess=()=>{te()}}catch(Lt){Ae(ln.create("storage-set",{originalErrorMessage:Lt&&Lt.message}))}})})()}delete(C){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((W,te)=>{const ke=F.transaction([So],"readwrite").objectStore(So),qe=M.createCompositeKey(C);try{const Mt=ke.delete(qe);Mt.onerror=Lt=>{te(ta(Lt,"storage-delete"))},Mt.onsuccess=()=>{W()}}catch(Mt){te(ln.create("storage-delete",{originalErrorMessage:Mt&&Mt.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class Mo{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,O.Z)(function*(){const M=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),W=C.storage.getActiveConfig(),te=yield M;te&&(C.lastFetchStatus=te);const Ae=yield F;Ae&&(C.lastSuccessfulFetchTimestampMillis=Ae);const ke=yield W;ke&&(C.activeConfig=ke)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function Ym(){return na.apply(this,arguments)}function na(){return(na=(0,O.Z)(function*(){if(!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(D){return!1}})).apply(this,arguments)}!function Cp(){(0,pe._registerComponent)(new fe.wA("remote-config",function D(C,{instanceIdentifier:M}){const F=C.getProvider("app").getImmediate(),W=C.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw ln.create("registration-window");if(!(0,X.hl)())throw ln.create("indexed-db-unavailable");const{projectId:te,apiKey:Ae,appId:ke}=F.options;if(!te)throw ln.create("registration-project-id");if(!Ae)throw ln.create("registration-api-key");if(!ke)throw ln.create("registration-app-id");const qe=new bc(ke,F.name,M=M||"firebase"),Mt=new Mo(qe),Lt=new re.Yd(qi);Lt.logLevel=re.in.ERROR;const Ln=new Tn(W,pe.SDK_VERSION,M,te,Ae,ke),Zn=new zi(Ln,qe),rn=new Ic(Zn,qe,Mt,Lt),Ps=new wp(F,rn,Mt,qe,Lt);return function $t(D){const C=(0,X.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Ps),Ps},"PUBLIC").setMultipleInstances(!0)),(0,pe.registerVersion)(qi,"0.3.4"),(0,pe.registerVersion)(qi,"0.3.4","esm2017")}();const Cs="/firebase-messaging-sw.js",ri="/firebase-cloud-messaging-push-scope",Xs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ro="google.c.a.c_id",Tc="google.c.a.c_l",bp="google.c.a.ts",eo="google.c.a.e";var Ki=(()=>{return(D=Ki||(Ki={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Ki;var D})();function ii(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Sc(D){const M=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),W=new Uint8Array(F.length);for(let te=0;te<F.length;++te)W[te]=F.charCodeAt(te);return W}const sr="fcm_token_details_db",Mc="fcm_token_object_Store";function xc(D){return ru.apply(this,arguments)}function ru(){return ru=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(te=>te.name).includes(sr))return null;let C=null;return(yield(0,ue.openDb)(sr,5,function(){var F=(0,O.Z)(function*(W){var te;if(W.oldVersion<2||!W.objectStoreNames.contains(Mc))return;const Ae=W.transaction.objectStore(Mc),ke=yield Ae.index("fcmSenderId").get(D);if(yield Ae.clear(),ke)if(2===W.oldVersion){const qe=ke;if(!qe.auth||!qe.p256dh||!qe.endpoint)return;C={token:qe.fcmToken,createTime:null!==(te=qe.createTime)&&void 0!==te?te:Date.now(),subscriptionOptions:{auth:qe.auth,p256dh:qe.p256dh,endpoint:qe.endpoint,swScope:qe.swScope,vapidKey:"string"==typeof qe.vapidKey?qe.vapidKey:ii(qe.vapidKey)}}}else if(3===W.oldVersion){const qe=ke;C={token:qe.fcmToken,createTime:qe.createTime,subscriptionOptions:{auth:ii(qe.auth),p256dh:ii(qe.p256dh),endpoint:qe.endpoint,swScope:qe.swScope,vapidKey:ii(qe.vapidKey)}}}else if(4===W.oldVersion){const qe=ke;C={token:qe.fcmToken,createTime:qe.createTime,subscriptionOptions:{auth:ii(qe.auth),p256dh:ii(qe.p256dh),endpoint:qe.endpoint,swScope:qe.swScope,vapidKey:ii(qe.vapidKey)}}}});return function(W){return F.apply(this,arguments)}}())).close(),yield(0,ue.deleteDb)(sr),yield(0,ue.deleteDb)("fcm_vapid_details_db"),yield(0,ue.deleteDb)("undefined"),iu(C)?C:null}),ru.apply(this,arguments)}function iu(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const Yi="firebase-messaging-store";let ol=null;function Kt(){return ol||(ol=(0,ue.openDb)("firebase-messaging-database",1,D=>{0===D.oldVersion&&D.createObjectStore(Yi)})),ol}function ra(D){return bs.apply(this,arguments)}function bs(){return(bs=(0,O.Z)(function*(D){const C=Gn(D),F=yield(yield Kt()).transaction(Yi).objectStore(Yi).get(C);if(F)return F;{const W=yield xc(D.appConfig.senderId);if(W)return yield Ht(D,W),W}})).apply(this,arguments)}function Ht(D,C){return ou.apply(this,arguments)}function ou(){return(ou=(0,O.Z)(function*(D,C){const M=Gn(D),W=(yield Kt()).transaction(Yi,"readwrite");return yield W.objectStore(Yi).put(C,M),yield W.complete,C})).apply(this,arguments)}function ia(D){return to.apply(this,arguments)}function to(){return(to=(0,O.Z)(function*(D){const C=Gn(D),F=(yield Kt()).transaction(Yi,"readwrite");yield F.objectStore(Yi).delete(C),yield F.complete})).apply(this,arguments)}function Gn({appConfig:D}){return D.appId}const cn=new X.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Qi(D,C){return qn.apply(this,arguments)}function qn(){return(qn=(0,O.Z)(function*(D,C){const M=yield As(D),F=sa(C),W={method:"POST",headers:M,body:JSON.stringify(F)};let te;try{te=yield(yield fetch(Ts(D.appConfig),W)).json()}catch(Ae){throw cn.create("token-subscribe-failed",{errorInfo:Ae})}if(te.error)throw cn.create("token-subscribe-failed",{errorInfo:te.error.message});if(!te.token)throw cn.create("token-subscribe-no-token");return te.token})).apply(this,arguments)}function No(D,C){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,O.Z)(function*(D,C){const M=yield As(D),F=sa(C.subscriptionOptions),W={method:"PATCH",headers:M,body:JSON.stringify(F)};let te;try{te=yield(yield fetch(`${Ts(D.appConfig)}/${C.token}`,W)).json()}catch(Ae){throw cn.create("token-update-failed",{errorInfo:Ae})}if(te.error)throw cn.create("token-update-failed",{errorInfo:te.error.message});if(!te.token)throw cn.create("token-update-no-token");return te.token})).apply(this,arguments)}function al(D,C){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,O.Z)(function*(D,C){const F={method:"DELETE",headers:yield As(D)};try{const te=yield(yield fetch(`${Ts(D.appConfig)}/${C}`,F)).json();if(te.error)throw cn.create("token-unsubscribe-failed",{errorInfo:te.error.message})}catch(W){throw cn.create("token-unsubscribe-failed",{errorInfo:W})}})).apply(this,arguments)}function Ts({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function As(D){return at.apply(this,arguments)}function at(){return(at=(0,O.Z)(function*({appConfig:D,installations:C}){const M=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function sa({p256dh:D,auth:C,endpoint:M,vapidKey:F}){const W={web:{endpoint:M,auth:C,p256dh:D}};return F!==Xs&&(W.web.applicationPubKey=F),W}const oa=6048e5;function Rc(D){return aa.apply(this,arguments)}function aa(){return(aa=(0,O.Z)(function*(D){const C=yield dn(D.swRegistration,D.vapidKey),M={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:ii(C.getKey("auth")),p256dh:ii(C.getKey("p256dh"))},F=yield ra(D.firebaseDependencies);if(F){if(ca(F.subscriptionOptions,M))return Date.now()>=F.createTime+oa?Sh(D,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield al(D.firebaseDependencies,F.token)}catch(W){console.warn(W)}return Tt(D.firebaseDependencies,M)}return Tt(D.firebaseDependencies,M)})).apply(this,arguments)}function ul(D){return ua.apply(this,arguments)}function ua(){return(ua=(0,O.Z)(function*(D){const C=yield ra(D.firebaseDependencies);C&&(yield al(D.firebaseDependencies,C.token),yield ia(D.firebaseDependencies));const M=yield D.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Sh(D,C){return we.apply(this,arguments)}function we(){return(we=(0,O.Z)(function*(D,C){try{const M=yield No(D.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:M,createTime:Date.now()});return yield Ht(D.firebaseDependencies,F),M}catch(M){throw yield ul(D),M}})).apply(this,arguments)}function Tt(D,C){return la.apply(this,arguments)}function la(){return(la=(0,O.Z)(function*(D,C){const F={token:yield Qi(D,C),createTime:Date.now(),subscriptionOptions:C};return yield Ht(D,F),F.token})).apply(this,arguments)}function dn(D,C){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,O.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Sc(C)})})).apply(this,arguments)}function ca(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}function Er(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function ll(D,C){if(!C.notification)return;D.notification={};const M=C.notification.title;M&&(D.notification.title=M);const F=C.notification.body;F&&(D.notification.body=F);const W=C.notification.image;W&&(D.notification.image=W)}(C,D),function cl(D,C){!C.data||(D.data=C.data)}(C,D),function Nc(D,C){if(!C.fcmOptions)return;D.fcmOptions={};const M=C.fcmOptions.link;M&&(D.fcmOptions.link=M);const F=C.fcmOptions.analytics_label;F&&(D.fcmOptions.analyticsLabel=F)}(C,D),C}function Oc(D){return"object"==typeof D&&!!D&&Ro in D}function da(D,C){const M=[];for(let F=0;F<D.length;F++)M.push(D.charAt(F)),F<C.length&&M.push(C.charAt(F));return M.join("")}function Fn(D){return cn.create("missing-app-config-values",{valueName:D})}da("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),da("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class pi{constructor(C,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function Oo(D){if(!D||!D.options)throw Fn("App Configuration Object");if(!D.name)throw Fn("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:M}=D;for(const F of C)if(!M[F])throw Fn(F);return{appName:D.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:W,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function dl(D){return Si.apply(this,arguments)}function Si(){return(Si=(0,O.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Cs,{scope:ri}),D.swRegistration.update().catch(()=>{})}catch(C){throw cn.create("failed-service-worker-registration",{browserErrorMessage:C.message})}})).apply(this,arguments)}function Ji(D,C){return ha.apply(this,arguments)}function ha(){return(ha=(0,O.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield dl(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw cn.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function Pc(D,C){return fa.apply(this,arguments)}function fa(){return(fa=(0,O.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=Xs)})).apply(this,arguments)}function no(){return(no=(0,O.Z)(function*(D,C){if(!navigator)throw cn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw cn.create("permission-blocked");return yield Pc(D,null==C?void 0:C.vapidKey),yield Ji(D,null==C?void 0:C.serviceWorkerRegistration),Rc(D)})).apply(this,arguments)}function hl(D,C,M){return pa.apply(this,arguments)}function pa(){return(pa=(0,O.Z)(function*(D,C,M){const F=fl(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[Ro],message_name:M[Tc],message_time:M[bp],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function fl(D){switch(D){case Ki.NOTIFICATION_CLICKED:return"notification_open";case Ki.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function uu(){return(uu=(0,O.Z)(function*(D,C){const M=C.data;if(!M.isFirebaseMessaging)return;D.onMessageHandler&&M.messageType===Ki.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Er(M)):D.onMessageHandler.next(Er(M)));const F=M.data;Oc(F)&&"1"===F[eo]&&(yield hl(D,M.messageType,F))})).apply(this,arguments)}const ro="@firebase/messaging",io=D=>{const C=new pi(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Tp(D,C){return uu.apply(this,arguments)}(C,M)),C},Fc=D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:F=>function kc(D,C){return no.apply(this,arguments)}(C,F)}};function Po(){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,O.Z)(function*(){try{yield(0,X.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,X.hl)()&&(0,X.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Mh(){(0,pe._registerComponent)(new fe.wA("messaging",io,"PUBLIC")),(0,pe._registerComponent)(new fe.wA("messaging-internal",Fc,"PRIVATE")),(0,pe.registerVersion)(ro,"0.9.8"),(0,pe.registerVersion)(ro,"0.9.8","esm2017")}();const Lc="analytics",gl="firebase_id",ml="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",lu="https://www.googletagmanager.com/gtag/js",zn=new re.Yd("@firebase/analytics");function Nh(D){return Promise.all(D.map(C=>C.catch(M=>M)))}function ts(D,C){const M=document.createElement("script");M.src=`${lu}?l=${D}&id=${C}`,M.async=!0,document.head.appendChild(M)}function Ap(D,C,M,F,W,te){return ma.apply(this,arguments)}function ma(){return(ma=(0,O.Z)(function*(D,C,M,F,W,te){const Ae=F[W];try{if(Ae)yield C[Ae];else{const qe=(yield Nh(M)).find(Mt=>Mt.measurementId===W);qe&&(yield C[qe.appId])}}catch(ke){zn.error(ke)}D("config",W,te)})).apply(this,arguments)}function ya(D,C,M,F,W){return cu.apply(this,arguments)}function cu(){return(cu=(0,O.Z)(function*(D,C,M,F,W){try{let te=[];if(W&&W.send_to){let Ae=W.send_to;Array.isArray(Ae)||(Ae=[Ae]);const ke=yield Nh(M);for(const qe of Ae){const Mt=ke.find(Ln=>Ln.measurementId===qe),Lt=Mt&&C[Mt.appId];if(!Lt){te=[];break}te.push(Lt)}}0===te.length&&(te=Object.values(C)),yield Promise.all(te),D("event",F,W||{})}catch(te){zn.error(te)}})).apply(this,arguments)}function vn(){const D=window.document.getElementsByTagName("script");for(const C of Object.values(D))if(C.src&&C.src.includes(lu))return C;return null}const ar=new X.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ms=new class du{constructor(C={},M=1e3){this.throttleMetadata=C,this.intervalMillis=M}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,M){this.throttleMetadata[C]=M}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Vc(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Wt(D){return xs.apply(this,arguments)}function xs(){return(xs=(0,O.Z)(function*(D){var C;const{appId:M,apiKey:F}=D,W={method:"GET",headers:Vc(F)},te=ml.replace("{app-id}",M),Ae=yield fetch(te,W);if(200!==Ae.status&&304!==Ae.status){let ke="";try{const qe=yield Ae.json();(null===(C=qe.error)||void 0===C?void 0:C.message)&&(ke=qe.error.message)}catch(qe){}throw ar.create("config-fetch-failed",{httpStatus:Ae.status,responseMessage:ke})}return Ae.json()})).apply(this,arguments)}function fn(D){return yt.apply(this,arguments)}function yt(){return(yt=(0,O.Z)(function*(D,C=Ms,M){const{appId:F,apiKey:W,measurementId:te}=D.options;if(!F)throw ar.create("no-app-id");if(!W){if(te)return{measurementId:te,appId:F};throw ar.create("no-api-key")}const Ae=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ke=new Ph;return setTimeout((0,O.Z)(function*(){ke.abort()}),void 0!==M?M:6e4),so({appId:F,apiKey:W,measurementId:te},Ae,ke,C)})).apply(this,arguments)}function so(D,C,M){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,O.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:M},F,W=Ms){const{appId:te,measurementId:Ae}=D;try{yield _l(F,C)}catch(ke){if(Ae)return zn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ae} provided in the "measurementId" field in the local Firebase config. [${ke.message}]`),{appId:te,measurementId:Ae};throw ke}try{const ke=yield Wt(D);return W.deleteThrottleMetadata(te),ke}catch(ke){if(!hu(ke)){if(W.deleteThrottleMetadata(te),Ae)return zn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ae} provided in the "measurementId" field in the local Firebase config. [${ke.message}]`),{appId:te,measurementId:Ae};throw ke}const qe=503===Number(ke.customData.httpStatus)?(0,X.$s)(M,W.intervalMillis,30):(0,X.$s)(M,W.intervalMillis),Mt={throttleEndTimeMillis:Date.now()+qe,backoffCount:M+1};return W.setThrottleMetadata(te,Mt),zn.debug(`Calling attemptFetch again in ${qe} millis`),so(D,Mt,F,W)}})).apply(this,arguments)}function _l(D,C){return new Promise((M,F)=>{const W=Math.max(C-Date.now(),0),te=setTimeout(M,W);D.addEventListener(()=>{clearTimeout(te),F(ar.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function hu(D){if(!(D instanceof X.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}class Ph{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}function _a(){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,O.Z)(function*(){if(!(0,X.hl)())return zn.warn(ar.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,X.eu)()}catch(D){return zn.warn(ar.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function Rs(){return(Rs=(0,O.Z)(function*(D,C,M,F,W,te,Ae){var ke;const qe=fn(D);qe.then(rn=>{M[rn.measurementId]=rn.appId,D.options.measurementId&&rn.measurementId!==D.options.measurementId&&zn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${rn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(rn=>zn.error(rn)),C.push(qe);const Mt=_a().then(rn=>{if(rn)return F.getId()}),[Lt,Ln]=yield Promise.all([qe,Mt]);vn()||ts(te,Lt.measurementId),W("js",new Date);const Zn=null!==(ke=null==Ae?void 0:Ae.config)&&void 0!==ke?ke:{};return Zn.origin="firebase",Zn.update=!0,null!=Ln&&(Zn[gl]=Ln),W("config",Lt.measurementId,Zn),Lt.measurementId})).apply(this,arguments)}class va{constructor(C){this.app=C}_delete(){return delete Dr[this.app.options.appId],Promise.resolve()}}let Dr={},vl=[];const Ea={};let wa,En,Ns="dataLayer",xi=!1;function jc(D,C,M){!function rs(){const D=[];if((0,X.ru)()&&D.push("This is a browser extension environment."),(0,X.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((F,W)=>`(${W+1}) ${F}`).join(" "),M=ar.create("invalid-analytics-context",{errorInfo:C});zn.warn(M.message)}}();const F=D.options.appId;if(!F)throw ar.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw ar.create("no-api-key");zn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Dr[F])throw ar.create("already-exists",{id:F});if(!xi){!function ko(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(Ns);const{wrappedGtag:te,gtagCore:Ae}=function Sp(D,C,M,F,W){let te=function(...Ae){window[F].push(arguments)};return window[W]&&"function"==typeof window[W]&&(te=window[W]),window[W]=function Oh(D,C,M,F){function te(){return(te=(0,O.Z)(function*(Ae,ke,qe){try{"event"===Ae?yield ya(D,C,M,ke,qe):"config"===Ae?yield Ap(D,C,M,F,ke,qe):D("set",ke)}catch(Mt){zn.error(Mt)}})).apply(this,arguments)}return function W(Ae,ke,qe){return te.apply(this,arguments)}}(te,D,C,M),{gtagCore:te,wrappedGtag:window[W]}}(Dr,vl,Ea,Ns,"gtag");En=te,wa=Ae,xi=!0}return Dr[F]=function Xn(D,C,M,F,W,te,Ae){return Rs.apply(this,arguments)}(D,vl,Ea,C,wa,Ns,M),new va(D)}function Ia(){return(Ia=(0,O.Z)(function*(D,C,M,F,W){if(W&&W.global)D("event",M,F);else{const te=yield C;D("event",M,Object.assign(Object.assign({},F),{send_to:te}))}})).apply(this,arguments)}function $c(){return fu.apply(this,arguments)}function fu(){return(fu=(0,O.Z)(function*(){if((0,X.ru)()||!(0,X.zI)()||!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(D){return!1}})).apply(this,arguments)}const qc="@firebase/analytics";!function zc(){(0,pe._registerComponent)(new fe.wA(Lc,(C,{options:M})=>jc(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,pe._registerComponent)(new fe.wA("analytics-internal",function D(C){try{const M=C.getProvider(Lc).getImmediate();return{logEvent:(F,W,te)=>function Gc(D,C,M,F){D=(0,X.m9)(D),function El(D,C,M,F,W){return Ia.apply(this,arguments)}(En,Dr[D.app.options.appId],C,M,F).catch(W=>zn.error(W))}(M,F,W,te)}}catch(M){throw ar.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,pe.registerVersion)(qc,"0.7.5"),(0,pe.registerVersion)(qc,"0.7.5","esm2017")}();var Ni=P(4408),an=P(7565);const Cr=new class pu extends an.v{}(class Fh extends Ni.o{constructor(C,M){super(C,M),this.scheduler=C,this.work=M}schedule(C,M=0){return M>0?super.schedule(C,M):(this.delay=M,this.state=C,this.scheduler.flush(this),this)}execute(C,M){return M>0||this.closed?super.execute(C,M):this._execute(C,M)}requestAsyncId(C,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,M,F):C.flush(this)}});var gu=P(4986),br=P(8505),mi=P(9468),Il=P(5363);const lo=new g.GfV("7.2.1"),Br="__angularfire_symbol__analyticsIsSupportedValue",jr="__angularfire_symbol__analyticsIsSupported",Ta="__angularfire_symbol__remoteConfigIsSupportedValue",Aa="__angularfire_symbol__remoteConfigIsSupported",Zc="__angularfire_symbol__messagingIsSupportedValue",Lh="__angularfire_symbol__messagingIsSupported";function Uh(D,C,M){if(C){if(1===C.length)return C[0];const te=C.filter(Ae=>Ae.app===M);if(1===te.length)return te[0]}return M.container.getProvider(D).getImmediate({optional:!0})}globalThis[jr]||(globalThis[jr]=$c().then(D=>globalThis[Br]=D).catch(()=>globalThis[Br]=!1)),globalThis[Lh]||(globalThis[Lh]=Po().then(D=>globalThis[Zc]=D).catch(()=>globalThis[Zc]=!1)),globalThis[Aa]||(globalThis[Aa]=Ym().then(D=>globalThis[Ta]=D).catch(()=>globalThis[Ta]=!1));const Kc=(D,C)=>{const M=C?[C]:(0,Y.C6)(),F=[];return M.forEach(W=>{W.container.getProvider(D).instances.forEach(Ae=>{F.includes(Ae)||F.push(Ae)})}),F};function ss(){}class Yc{constructor(C,M=Cr){this.zone=C,this.delegate=M}now(){return this.delegate.now()}schedule(C,M,F){const W=this.zone;return this.delegate.schedule(function(Ae){W.runGuarded(()=>{C.apply(this,[Ae])})},M,F)}}class Dl{constructor(C){this.zone=C,this.task=null}call(C,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ss,{},ss,ss)),M.pipe((0,br.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Cl=(()=>{class D{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Yc(Zone.current)),this.insideAngular=M.run(()=>new Yc(Zone.current,gu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(M){return new(M||D)(g.LFG(g.R0b))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Oi(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Pi(D){return Oi(),function Os(D){return function(M){return(M=M.lift(new Dl(D.ngZone))).pipe((0,mi.R)(D.outsideAngular),(0,Il.Q)(D.insideAngular))}}(Oi())(D)}},2090:(et,Ce,P)=>{"use strict";P.d(Ce,{BH:()=>Ve,LL:()=>ce,ZR:()=>Ne,zI:()=>ne,US:()=>fe,tV:()=>le,$s:()=>Rt,r3:()=>Ci,Sg:()=>De,ne:()=>Ti,vZ:()=>Qn,ZB:()=>V,pd:()=>Es,m9:()=>ei,z$:()=>xe,jU:()=>oe,ru:()=>Te,d:()=>ie,xb:()=>At,w1:()=>ge,hl:()=>ee,uI:()=>Fe,UG:()=>q,b$:()=>Re,G6:()=>Ue,Mn:()=>ye,xO:()=>mr,zd:()=>bi,eu:()=>Z});const pe=function(L){const j=[];let $=0;for(let ve=0;ve<L.length;ve++){let J=L.charCodeAt(ve);J<128?j[$++]=J:J<2048?(j[$++]=J>>6|192,j[$++]=63&J|128):55296==(64512&J)&&ve+1<L.length&&56320==(64512&L.charCodeAt(ve+1))?(J=65536+((1023&J)<<10)+(1023&L.charCodeAt(++ve)),j[$++]=J>>18|240,j[$++]=J>>12&63|128,j[$++]=J>>6&63|128,j[$++]=63&J|128):(j[$++]=J>>12|224,j[$++]=J>>6&63|128,j[$++]=63&J|128)}return j},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(L,j){if(!Array.isArray(L))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let J=0;J<L.length;J+=3){const Ge=L[J],lt=J+1<L.length,qt=lt?L[J+1]:0,Xt=J+2<L.length,tn=Xt?L[J+2]:0;let On=(15&qt)<<2|tn>>6,yr=63&tn;Xt||(yr=64,lt||(On=64)),ve.push($[Ge>>2],$[(3&Ge)<<4|qt>>4],$[On],$[yr])}return ve.join("")},encodeString(L,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(L):this.encodeByteArray(pe(L),j)},decodeString(L,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(L):function(L){const j=[];let $=0,ve=0;for(;$<L.length;){const J=L[$++];if(J<128)j[ve++]=String.fromCharCode(J);else if(J>191&&J<224){const Ge=L[$++];j[ve++]=String.fromCharCode((31&J)<<6|63&Ge)}else if(J>239&&J<365){const Xt=((7&J)<<18|(63&L[$++])<<12|(63&L[$++])<<6|63&L[$++])-65536;j[ve++]=String.fromCharCode(55296+(Xt>>10)),j[ve++]=String.fromCharCode(56320+(1023&Xt))}else{const Ge=L[$++],lt=L[$++];j[ve++]=String.fromCharCode((15&J)<<12|(63&Ge)<<6|63&lt)}}return j.join("")}(this.decodeStringToByteArray(L,j))},decodeStringToByteArray(L,j){this.init_();const $=j?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let J=0;J<L.length;){const Ge=$[L.charAt(J++)],qt=J<L.length?$[L.charAt(J)]:0;++J;const tn=J<L.length?$[L.charAt(J)]:64;++J;const It=J<L.length?$[L.charAt(J)]:64;if(++J,null==Ge||null==qt||null==tn||null==It)throw Error();ve.push(Ge<<2|qt>>4),64!==tn&&(ve.push(qt<<4&240|tn>>2),64!==It&&ve.push(tn<<6&192|It))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let L=0;L<this.ENCODED_VALS.length;L++)this.byteToCharMap_[L]=this.ENCODED_VALS.charAt(L),this.charToByteMap_[this.byteToCharMap_[L]]=L,this.byteToCharMapWebSafe_[L]=this.ENCODED_VALS_WEBSAFE.charAt(L),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[L]]=L,L>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(L)]=L,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(L)]=L)}}},ue=function(L){return function(L){const j=pe(L);return fe.encodeByteArray(j,!0)}(L).replace(/\./g,"")},le=function(L){try{return fe.decodeString(L,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function V(L,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===L&&(L={});break;case Array:L=[];break;default:return j}for(const $ in j)!j.hasOwnProperty($)||!K($)||(L[$]=V(L[$],j[$]));return L}function K(L){return"__proto__"!==L}class Ve{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,$)=>{this.resolve=j,this.reject=$})}wrapCallback(j){return($,ve)=>{$?this.reject($):this.resolve(ve),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j($):j($,ve))}}}function De(L,j){if(L.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=j||"demo-project",J=L.iat||0,Ge=L.sub||L.user_id;if(!Ge)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const lt=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:J,exp:J+3600,auth_time:J,sub:Ge,user_id:Ge,firebase:{sign_in_provider:"custom",identities:{}}},L);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(lt)),""].join(".")}function xe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Fe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xe())}function q(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(L){return!1}}function oe(){return"object"==typeof self&&self.self===self}function Te(){const L="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof L&&void 0!==L.id}function Re(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ie(){return xe().indexOf("Electron/")>=0}function ge(){const L=xe();return L.indexOf("MSIE ")>=0||L.indexOf("Trident/")>=0}function ye(){return xe().indexOf("MSAppHost/")>=0}function Ue(){return!q()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ee(){return"object"==typeof indexedDB}function Z(){return new Promise((L,j)=>{try{let $=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",J=self.indexedDB.open(ve);J.onsuccess=()=>{J.result.close(),$||self.indexedDB.deleteDatabase(ve),L(!0)},J.onupgradeneeded=()=>{$=!1},J.onerror=()=>{var Ge;j((null===(Ge=J.error)||void 0===Ge?void 0:Ge.message)||"")}}catch($){j($)}})}function ne(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ne extends Error{constructor(j,$,ve){super($),this.code=j,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,Ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ce.prototype.create)}}class ce{constructor(j,$,ve){this.service=j,this.serviceName=$,this.errors=ve}create(j,...$){const ve=$[0]||{},J=`${this.service}/${j}`,Ge=this.errors[j],lt=Ge?function pt(L,j){return L.replace(kt,($,ve)=>{const J=j[ve];return null!=J?String(J):`<${ve}?>`})}(Ge,ve):"Error";return new Ne(J,`${this.serviceName}: ${lt} (${J}).`,ve)}}const kt=/\{\$([^}]+)}/g;function Ci(L,j){return Object.prototype.hasOwnProperty.call(L,j)}function At(L){for(const j in L)if(Object.prototype.hasOwnProperty.call(L,j))return!1;return!0}function Qn(L,j){if(L===j)return!0;const $=Object.keys(L),ve=Object.keys(j);for(const J of $){if(!ve.includes(J))return!1;const Ge=L[J],lt=j[J];if(vs(Ge)&&vs(lt)){if(!Qn(Ge,lt))return!1}else if(Ge!==lt)return!1}for(const J of ve)if(!$.includes(J))return!1;return!0}function vs(L){return null!==L&&"object"==typeof L}function mr(L){const j=[];for(const[$,ve]of Object.entries(L))Array.isArray(ve)?ve.forEach(J=>{j.push(encodeURIComponent($)+"="+encodeURIComponent(J))}):j.push(encodeURIComponent($)+"="+encodeURIComponent(ve));return j.length?"&"+j.join("&"):""}function bi(L){const j={};return L.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[J,Ge]=ve.split("=");j[decodeURIComponent(J)]=decodeURIComponent(Ge)}}),j}function Es(L){const j=L.indexOf("?");if(!j)return"";const $=L.indexOf("#",j);return L.substring(j,$>0?$:void 0)}function Ti(L,j){const $=new ut(L,j);return $.subscribe.bind($)}class ut{constructor(j,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{j(this)}).catch(ve=>{this.error(ve)})}next(j){this.forEachObserver($=>{$.next(j)})}error(j){this.forEachObserver($=>{$.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,$,ve){let J;if(void 0===j&&void 0===$&&void 0===ve)throw new Error("Missing Observer.");J=function Nn(L,j){if("object"!=typeof L||null===L)return!1;for(const $ of j)if($ in L&&"function"==typeof L[$])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:$,complete:ve},void 0===J.next&&(J.next=yn),void 0===J.error&&(J.error=yn),void 0===J.complete&&(J.complete=yn);const Ge=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?J.error(this.finalError):J.complete()}catch(lt){}}),this.observers.push(J),Ge}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,j)}sendOne(j,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{$(this.observers[j])}catch(ve){"undefined"!=typeof console&&console.error&&console.error(ve)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yn(){}function Rt(L,j=1e3,$=2){const ve=j*Math.pow($,L),J=Math.round(.5*ve*(Math.random()-.5)*2);return Math.min(144e5,ve+J)}function ei(L){return L&&L._delegate?L._delegate:L}},1677:(et,Ce,P)=>{"use strict";var g=P(5e3);let Y=null;function O(){return Y}const re=new g.OlP("DocumentToken");let ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function le(){return(0,g.LFG)(V)}()},providedIn:"platform"}),n})();const B=new g.OlP("Location Initialized");let V=(()=>{class n extends ue{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){K()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){K()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(re))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Ve(){return new V((0,g.LFG)(re))}()},providedIn:"platform"}),n})();function K(){return!!window.history.pushState}function De(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function xe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Fe(n){return n&&"?"!==n[0]?"?"+n:n}let q=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function oe(n){const e=(0,g.LFG)(re).location;return new Re((0,g.LFG)(ue),e&&e.origin||"")}()},providedIn:"root"}),n})();const Te=new g.OlP("appBaseHref");let Re=(()=>{class n extends q{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return De(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Fe(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,l){const h=this.prepareExternalUrl(o+Fe(l));this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,l){const h=this.prepareExternalUrl(o+Fe(l));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue),g.LFG(Te,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),ie=(()=>{class n extends q{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=De(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,l){let h=this.prepareExternalUrl(o+Fe(l));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,l){let h=this.prepareExternalUrl(o+Fe(l));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue),g.LFG(Te,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),ge=(()=>{class n{constructor(t,r){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=xe(Ue(o)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Fe(r))}normalize(t){return n.stripTrailingSlash(function je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ue(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fe(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fe(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Fe,n.joinWithSlash=De,n.stripTrailingSlash=xe,n.\u0275fac=function(t){return new(t||n)(g.LFG(q),g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ye(){return new ge((0,g.LFG)(q),(0,g.LFG)(ue))}()},providedIn:"root"}),n})();function Ue(n){return n.replace(/\/index.html$/,"")}var ne=(()=>((ne=ne||{})[ne.Zero=0]="Zero",ne[ne.One=1]="One",ne[ne.Two=2]="Two",ne[ne.Few=3]="Few",ne[ne.Many=4]="Many",ne[ne.Other=5]="Other",ne))();const Es=g.kL8;class Ft{}let ln=(()=>{class n extends Ft{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Es(r||this.locale)(t)){case ne.Zero:return"zero";case ne.One:return"one";case ne.Two:return"two";case ne.Few:return"few";case ne.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.soG))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Ao{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let bn=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,l,h)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Ao(o.item,this._ngForOf,-1,-1),null===h?void 0:h);else if(null==h)r.remove(null===l?void 0:l);else if(null!==l){const y=r.get(l);r.move(y,h),Is(y,o)}});for(let o=0,l=r.length;o<l;o++){const y=r.get(o).context;y.index=o,y.count=l,y.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Is(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Is(n,e){n.context.$implicit=e.item}class Dc{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class vp{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const zi=new vp,Ep=new Dc;let il=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,g.QGY)(t))return zi;if((0,g.F4k)(t))return Ep;throw function Tn(n,e){return new g.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.sBO,16))},n.\u0275pipe=g.Yjl({name:"async",type:n,pure:!1}),n})(),eo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[{provide:Ft,useClass:ln}]}),n})();function or(n){return"server"===n}let iu=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new su((0,g.LFG)(re),window)}),n})();class su{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Yi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const l=o.shadowRoot;if(l){const h=l.getElementById(e)||l.querySelector(`[name="${e}"]`);if(h)return h}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(r-l[0],o-l[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=sl(this.window.history)||sl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function sl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class bs extends class ra extends class fe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function X(n){Y||(Y=n)}(new bs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ou(){return Ht=Ht||document.querySelector("base"),Ht?Ht.getAttribute("href"):null}();return null==t?null:function to(n){ia=ia||document.createElement("a"),ia.setAttribute("href",n);const e=ia.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ht=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Co(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,l]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(l)}return null}(document.cookie,e)}}let ia,Ht=null;const Gn=new g.OlP("TRANSITION_ID"),cn=[{provide:g.ip1,useFactory:function au(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<o.length;l++)r.remove(o[l])})}},deps:[Gn,re,g.zs3],multi:!0}];class Qi{static init(){(0,g.VLi)(new Qi)}addToWindow(e){g.dqk.getAngularTestability=(r,o=!0)=>{const l=e.findTestabilityInTree(r,o);if(null==l)throw new Error("Could not find testability for element.");return l},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const o=g.dqk.getAllAngularTestabilities();let l=o.length,h=!1;const y=function(I){h=h||I,l--,0==l&&r(h)};o.forEach(function(I){I.whenStable(y)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let qn=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const No=new g.OlP("EventManagerPlugins");let Ai=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let l=0;l<o.length;l++){const h=o[l];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(No),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class al{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Vr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Ts=(()=>{class n extends Vr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(l=>{const h=this._doc.createElement("style");h.textContent=l,o.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(As),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(As))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(re))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function As(n){O().remove(n)}const at={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},sa=/%COMP%/g;function we(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?we(n,o,t):(o=o.replace(sa,n),t.push(o))}return t}function Tt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let dn=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Ss(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new ll(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case g.ifc.ShadowDom:return new cl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=we(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ai),g.LFG(Ts),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Ss{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(at[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const l=at[o];l?e.setAttributeNS(l,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=at[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,o&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Tt(r)):this.eventManager.addEventListener(e,t,Tt(r))}}class ll extends Ss{constructor(e,t,r,o){super(e),this.component=r;const l=we(o+"-"+r.id,r.styles,[]);t.addStyles(l),this.contentAttr=function ua(n){return"_ngcontent-%COMP%".replace(sa,n)}(o+"-"+r.id),this.hostAttr=function Sh(n){return"_nghost-%COMP%".replace(sa,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class cl extends Ss{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=we(o.id,o.styles,[]);for(let h=0;h<l.length;h++){const y=document.createElement("style");y.textContent=l[h],this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Nc=(()=>{class n extends al{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(re))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Oc=["alt","control","meta","shift"],Oo={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Fn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},pi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let dl=(()=>{class n extends al{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const l=n.parseEventName(r),h=n.eventCallback(l.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,l.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const l=n._normalizeKey(r.pop());let h="";if(Oc.forEach(I=>{const A=r.indexOf(I);A>-1&&(r.splice(A,1),h+=I+".")}),h+=l,0!=r.length||0===l.length)return null;const y={};return y.domEventName=o,y.fullKey=h,y}static getEventFullKey(t){let r="",o=function Si(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Fn.hasOwnProperty(e)&&(e=Fn[e]))}return Oo[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Oc.forEach(l=>{l!=o&&pi[l](t)&&(r+=l+".")}),r+=o,r}static eventCallback(t,r,o){return l=>{n.getEventFullKey(l)===t&&o.runGuarded(()=>r(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(re))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const kc=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function Ji(){bs.makeCurrent(),Qi.init()},multi:!0},{provide:re,useFactory:function Pc(){return(0,g.RDi)(document),document},deps:[]}]),no=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function ha(){return new g.qLn},deps:[]},{provide:No,useClass:Nc,multi:!0,deps:[re,g.R0b,g.Lbi]},{provide:No,useClass:dl,multi:!0,deps:[re]},{provide:dn,useClass:dn,deps:[Ai,Ts,g.AFp]},{provide:g.FYo,useExisting:dn},{provide:Vr,useExisting:Ts},{provide:Ts,useClass:Ts,deps:[re]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b]},{provide:Ai,useClass:Ai,deps:[No,g.R0b]},{provide:class Kt{},useClass:qn,deps:[]}];let hl=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:Gn,useExisting:g.AFp},cn]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(n,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:no,imports:[eo,g.hGG]}),n})();"undefined"!=typeof window&&window;var vn=P(8996),wr=P(8306);const{isArray:ar}=Array,{getPrototypeOf:ns,prototype:yl,keys:du}=Object;function Ms(n){if(1===n.length){const e=n[0];if(ar(e))return{args:e,keys:null};if(function Vc(n){return n&&"object"==typeof n&&ns(n)===yl}(e)){const t=du(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Wt=P(8421),xs=P(7669),fn=P(5403),yt=P(4004);const{isArray:so}=Array;function _l(n){return(0,yt.U)(e=>function Uc(n,e){return so(e)?n(...e):n(e)}(n,e))}function hu(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let _a=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),Ir=(()=>{class n extends _a{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const Xn=new g.OlP("NgValueAccessor"),Dr={provide:Xn,useExisting:(0,g.Gpc)(()=>Ns),multi:!0},Ea=new g.OlP("CompositionEventMode");let Ns=(()=>{class n extends _a{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function vl(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(Ea,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[g._Bn([Dr]),g.qOj]}),n})();const En=new g.OlP("NgValidators"),xi=new g.OlP("NgAsyncValidators");function Ri(n){return null!=n}function ba(n){const e=(0,g.QGY)(n)?(0,vn.D)(n):n;return(0,g.CqO)(e),e}function wl(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function uo(n,e){return e.map(t=>t(n))}function fu(n){return n.map(e=>function $c(n){return!n.validate}(e)?e:t=>e.validate(t))}function Hc(n){return null!=n?function on(n){if(!n)return null;const e=n.filter(Ri);return 0==e.length?null:function(t){return wl(uo(t,e))}}(fu(n)):null}function kh(n){return null!=n?function Mp(n){if(!n)return null;const e=n.filter(Ri);return 0==e.length?null:function(t){return function Ph(...n){const e=(0,xs.jO)(n),{args:t,keys:r}=Ms(n),o=new wr.y(l=>{const{length:h}=t;if(!h)return void l.complete();const y=new Array(h);let I=h,A=h;for(let R=0;R<h;R++){let N=!1;(0,Wt.Xf)(t[R]).subscribe((0,fn.x)(l,G=>{N||(N=!0,A--),y[R]=G},()=>I--,void 0,()=>{(!I||!N)&&(A||l.next(r?hu(r,y):y),l.complete())}))}});return e?o.pipe(_l(e)):o}(uo(t,e).map(ba)).pipe((0,yt.U)(wl))}}(fu(n)):null}function Gc(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function zc(n){return n?Array.isArray(n)?n:[n]:[]}function Ni(n,e){return Array.isArray(n)?n.includes(e):n===e}function Fh(n,e){const t=zc(e);return zc(n).forEach(o=>{Ni(t,o)||t.push(o)}),t}function an(n,e){return zc(e).filter(t=>!Ni(n,t))}class pu{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Hc(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=kh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Cr extends pu{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ur extends pu{get formDirective(){return null}get path(){return null}}class gu{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let Il=(()=>{class n extends gu{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Cr,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[g.qOj]}),n})(),lo=(()=>{class n extends gu{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ur,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[g.qOj]}),n})();function os(n,e){Pi(n,e),e.valueAccessor.writeValue(n.value),function yu(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&D(n,e)})}(n,e),function C(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function jh(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&D(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Bh(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Fo(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Pi(n,e){const t=function qc(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Gc(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Wc(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Gc(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();Fo(e._rawValidators,o),Fo(e._rawAsyncValidators,o)}function D(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Lt(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const rn="VALID",Ps="INVALID",Tr="PENDING",ur="DISABLED";function Ar(n){return(co(n)?n.validators:n)||null}function _u(n){return Array.isArray(n)?Hc(n):n||null}function Qc(n,e){return(co(e)?e.asyncValidators:n)||null}function bl(n){return Array.isArray(n)?kh(n):n||null}function co(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Hh=n=>n instanceof Eu;function ho(n){return(n=>n instanceof qh)(n)?n.value:n.getRawValue()}function vu(n,e){const t=Hh(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new g.vHH(1e3,"");if(!r[e])throw new g.vHH(1001,"")}function xp(n,e){Hh(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new g.vHH(1002,"")})}class Gh{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=_u(this._rawValidators),this._composedAsyncValidatorFn=bl(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===rn}get invalid(){return this.status===Ps}get pending(){return this.status==Tr}get disabled(){return this.status===ur}get enabled(){return this.status!==ur}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=_u(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=bl(e)}addValidators(e){this.setValidators(Fh(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Fh(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(an(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(an(e,this._rawAsyncValidators))}hasValidator(e){return Ni(this._rawValidators,e)}hasAsyncValidator(e){return Ni(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Tr,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ur,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=rn,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===rn||this.status===Tr)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ur:rn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Tr,this._hasOwnPendingAsyncValidator=!0;const t=ba(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function as(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=Hh(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:(n=>n instanceof h0)(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?ur:this.errors?Ps:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Tr)?Tr:this._anyControlsHaveStatus(Ps)?Ps:rn}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){co(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class qh extends Gh{constructor(e=null,t,r){super(Ar(t),Qc(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),co(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Lt(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Lt(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Eu extends Gh{constructor(e,t,r){super(Ar(t),Qc(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){xp(this,e),Object.keys(e).forEach(r=>{vu(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=ho(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,l)=>{r=t(r,o,l)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class h0 extends Gh{constructor(e,t,r){super(Ar(t),Qc(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){xp(this,e),e.forEach((r,o)=>{vu(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>ho(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Xm={provide:Ur,useExisting:(0,g.Gpc)(()=>Jc)},Tl=(()=>Promise.resolve(null))();let Jc=(()=>{class n extends Ur{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new g.vpe,this.form=new Eu({},Hc(t),kh(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Tl.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),os(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Tl.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Tl.then(()=>{const r=this._findContainer(t.path),o=new Eu({});(function M(n,e){Pi(n,e)})(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Tl.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Tl.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function qe(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(En,10),g.Y36(xi,10))},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&g.NdJ("submit",function(l){return r.onSubmit(l)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([Xm]),g.qOj]}),n})();const Wh={provide:Cr,useExisting:(0,g.Gpc)(()=>Xc)},zh=(()=>Promise.resolve(null))();let Xc=(()=>{class n extends Cr{constructor(t,r,o,l,h){super(),this._changeDetectorRef=h,this.control=new qh,this._registered=!1,this.update=new g.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Mt(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(l=>{l.constructor===Ns?t=l:function ke(n){return Object.getPrototypeOf(n.constructor)===Ir}(l)?r=l:o=l}),o||r||t||null}(0,l)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Ae(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){os(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){zh.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=""===r||r&&"false"!==r;zh.then(()=>{var l;o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),null===(l=this._changeDetectorRef)||void 0===l||l.markForCheck()})}_getPath(t){return this._parent?function Oi(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ur,9),g.Y36(En,10),g.Y36(xi,10),g.Y36(Xn,10),g.Y36(g.sBO,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([Wh]),g.qOj,g.TTD]}),n})(),ed=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),td=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})(),dy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[td]]}),n})(),v0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[dy]}),n})();var ui=P(2011),of=P(4986);function Qe(...n){const e=(0,xs.yG)(n);return(0,vn.D)(n,e)}var pn=P(5813),Du=P(8189);function Ra(...n){return function yi(){return(0,Du.J)(1)}()((0,vn.D)(n,(0,xs.yG)(n)))}var Hr=P(4482);function ld(...n){const e=(0,xs.yG)(n);return(0,Hr.e)((t,r)=>{(e?Ra(n,t,e):Ra(n,t)).subscribe(r)})}function Cu(){return(0,Hr.e)((n,e)=>{let t,r=!1;n.subscribe((0,fn.x)(e,o=>{const l=t;t=o,r&&e.next([l,o]),r=!0}))})}function af(n,e,t,r,o){return(l,h)=>{let y=t,I=e,A=0;l.subscribe((0,fn.x)(h,R=>{const N=A++;I=y?n(I,R,N):(y=!0,R),r&&h.next(I)},o&&(()=>{y&&h.next(I),h.complete()})))}}function bu(n,e){return(0,Hr.e)(af(n,e,arguments.length>=2,!0))}var Tu=P(4671);function ks(n,e){return n===e}function Fs(n,e){return(0,Hr.e)((t,r)=>{let o=0;t.subscribe((0,fn.x)(r,l=>n.call(e,l,o++)&&r.next(l)))})}P(389);var We,uf=P(3942),_e=P(5861),Vo=P(9681),An=P(4859),Ls=P(1877),Dt=P(2090),fy="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},lr={},Nl=Nl||{},gt=fy||self;function cd(){}function Ol(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Pl(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var lf="closure_uid_"+(1e9*Math.random()>>>0),py=0;function m(n,e,t){return n.call.apply(n.bind,arguments)}function d(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function f(n,e,t){return(f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:d).apply(null,arguments)}function v(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function b(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,l){for(var h=Array(arguments.length-2),y=2;y<arguments.length;y++)h[y-2]=arguments[y];return e.prototype[o].apply(r,h)}}function x(){this.s=this.s,this.o=this.o}var ae={};x.prototype.s=!1,x.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Wp(n){return Object.prototype.hasOwnProperty.call(n,lf)&&n[lf]||(n[lf]=++py)}(this);delete ae[n]}},x.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Le=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Ze=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let l=0;l<r;l++)l in o&&e.call(t,o[l],l,n)};function nt(n){return Array.prototype.concat.apply([],arguments)}function sn(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Gr(n){return/^[\s\xa0]*$/.test(n)}var cr,Au=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function er(n,e){return-1!=n.indexOf(e)}function Na(n,e){return n<e?-1:n>e?1:0}e:{var zp=gt.navigator;if(zp){var fo=zp.userAgent;if(fo){cr=fo;break e}}cr=""}function Su(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function dd(n){const e={};for(const t in n)e[t]=n[t];return e}var hd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function kl(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let l=0;l<hd.length;l++)t=hd[l],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function cf(n){return cf[" "](n),n}cf[" "]=cd;var pd,n,gy=er(cr,"Opera"),fd=er(cr,"Trident")||er(cr,"MSIE"),w0=er(cr,"Edge"),my=w0||fd,yy=er(cr,"Gecko")&&!(er(cr.toLowerCase(),"webkit")&&!er(cr,"Edge"))&&!(er(cr,"Trident")||er(cr,"MSIE"))&&!er(cr,"Edge"),_y=er(cr.toLowerCase(),"webkit")&&!er(cr,"Edge");function vy(){var n=gt.document;return n?n.documentMode:void 0}e:{var Ey="",wy=(n=cr,yy?/rv:([^\);]+)(\)|;)/.exec(n):w0?/Edge\/([\d\.]+)/.exec(n):fd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):_y?/WebKit\/(\S+)/.exec(n):gy?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(wy&&(Ey=wy?wy[1]:""),fd){var Zp=vy();if(null!=Zp&&Zp>parseFloat(Ey)){pd=String(Zp);break e}}pd=Ey}var I0={};var WI=gt.document&&fd&&(vy()||parseInt(pd,10))||void 0,Yp=function(){if(!gt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{gt.addEventListener("test",cd,e),gt.removeEventListener("test",cd,e)}catch(t){}return n}();function li(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function gd(n,e){if(li.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(yy){e:{try{cf(e.nodeName);var o=!0;break e}catch(l){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:D0[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&gd.Z.h.call(this)}}li.prototype.h=function(){this.defaultPrevented=!0},b(gd,li);var D0={2:"touch",3:"pen",4:"mouse"};gd.prototype.h=function(){gd.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var md="closure_listenable_"+(1e6*Math.random()|0),Dy=0;function C0(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++Dy,this.ca=this.fa=!1}function Ll(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Vl(n){this.src=n,this.g={},this.h=0}function Qp(n,e){var t=e.type;if(t in n.g){var l,r=n.g[t],o=Le(r,e);(l=0<=o)&&Array.prototype.splice.call(r,o,1),l&&(Ll(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function hf(n,e,t,r){for(var o=0;o<n.length;++o){var l=n[o];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==r)return o}return-1}Vl.prototype.add=function(n,e,t,r,o){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var h=hf(n,e,r,o);return-1<h?(e=n[h],t||(e.fa=!1)):((e=new C0(e,this.src,l,!!r,o)).fa=t,n.push(e)),e};var Jp="closure_lm_"+(1e6*Math.random()|0),ff={};function yd(n,e,t,r,o){if(r&&r.once)return A0(n,e,t,r,o);if(Array.isArray(e)){for(var l=0;l<e.length;l++)yd(n,e[l],t,r,o);return null}return t=Cy(t),n&&n[md]?n.N(e,t,Pl(r)?!!r.capture:!!r,o):b0(n,e,t,!1,r,o)}function b0(n,e,t,r,o,l){if(!e)throw Error("Invalid event type");var h=Pl(o)?!!o.capture:!!o,y=x0(n);if(y||(n[Jp]=y=new Vl(n)),(t=y.add(e,t,r,h,l)).proxy)return t;if(r=function T0(){var e=M0;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Yp||(o=h),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(eg(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function A0(n,e,t,r,o){if(Array.isArray(e)){for(var l=0;l<e.length;l++)A0(n,e[l],t,r,o);return null}return t=Cy(t),n&&n[md]?n.O(e,t,Pl(r)?!!r.capture:!!r,o):b0(n,e,t,!0,r,o)}function S0(n,e,t,r,o){if(Array.isArray(e))for(var l=0;l<e.length;l++)S0(n,e[l],t,r,o);else r=Pl(r)?!!r.capture:!!r,t=Cy(t),n&&n[md]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=hf(l=n.g[e],t,r,o))&&(Ll(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=x0(n))&&(e=n.g[e.toString()],n=-1,e&&(n=hf(e,t,r,o)),(t=-1<n?e[n]:null)&&Xp(t))}function Xp(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[md])Qp(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(eg(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=x0(e))?(Qp(t,n),0==t.h&&(t.src=null,e[Jp]=null)):Ll(n)}}}function eg(n){return n in ff?ff[n]:ff[n]="on"+n}function M0(n,e){if(n.ca)n=!0;else{e=new gd(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Xp(n),n=t.call(r,e)}return n}function x0(n){return(n=n[Jp])instanceof Vl?n:null}var tg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cy(n){return"function"==typeof n?n:(n[tg]||(n[tg]=function(e){return n.handleEvent(e)}),n[tg])}function dr(){x.call(this),this.i=new Vl(this),this.P=this,this.I=null}function qr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new li(e,n);else if(e instanceof li)e.target=e.target||n;else{var o=e;kl(e=new li(r,n),o)}if(o=!0,t)for(var l=t.length-1;0<=l;l--){var h=e.g=t[l];o=ng(h,r,!0,e)&&o}if(o=ng(h=e.g=n,r,!0,e)&&o,o=ng(h,r,!1,e)&&o,t)for(l=0;l<t.length;l++)o=ng(h=e.g=t[l],r,!1,e)&&o}function ng(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,l=0;l<e.length;++l){var h=e[l];if(h&&!h.ca&&h.capture==t){var y=h.listener,I=h.ia||h.src;h.fa&&Qp(n.i,h),o=!1!==y.call(I,r)&&o}}return o&&!r.defaultPrevented}b(dr,x),dr.prototype[md]=!0,dr.prototype.removeEventListener=function(n,e,t,r){S0(this,n,e,t,r)},dr.prototype.M=function(){if(dr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Ll(t[r]);delete n.g[e],n.h--}}this.I=null},dr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},dr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var ls=gt.JSON.stringify;function zI(){var n=O0;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var rg,N0=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new ZI,n=>n.reset());class ZI{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function KI(n){gt.setTimeout(()=>{throw n},0)}function by(n,e){rg||function YI(){var n=gt.Promise.resolve(void 0);rg=function(){n.then(Et)}}(),Ty||(rg(),Ty=!0),O0.add(n,e)}var Ty=!1,O0=new class R0{constructor(){this.h=this.g=null}add(e,t){const r=N0.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Et(){for(var n;n=zI();){try{n.h.call(n.g)}catch(t){KI(t)}var e=N0;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ty=!1}function pf(n,e){dr.call(this),this.h=n||1,this.g=e||gt,this.j=f(this.kb,this),this.l=Date.now()}function ig(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function sg(n,e,t){if("function"==typeof n)t&&(n=f(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=f(n.handleEvent,n)}return 2147483647<Number(e)?-1:gt.setTimeout(n,e||0)}function gf(n){n.g=sg(()=>{n.g=null,n.i&&(n.i=!1,gf(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}b(pf,dr),(We=pf.prototype).da=!1,We.S=null,We.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),qr(this,"tick"),this.da&&(ig(this),this.start()))}},We.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},We.M=function(){pf.Z.M.call(this),ig(this),delete this.g};class po extends x{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:gf(this)}M(){super.M(),this.g&&(gt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _d(n){x.call(this),this.h=n,this.g={}}b(_d,x);var P0=[];function og(n,e,t,r){Array.isArray(t)||(t&&(P0[0]=t.toString()),t=P0);for(var o=0;o<t.length;o++){var l=yd(e,t[o],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function Uo(n){Su(n.g,function(e,t){this.g.hasOwnProperty(t)&&Xp(e)},n),n.g={}}function vd(){this.g=!0}function mf(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Yb(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var l=o[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var h=1;h<o.length;h++)o[h]=""}}}return ls(t)}catch(y){return e}}(n,t)+(r?" "+r:"")})}_d.prototype.M=function(){_d.Z.M.call(this),Uo(this)},_d.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},vd.prototype.Aa=function(){this.g=!1},vd.prototype.info=function(){};var Bo={},yf=null;function Ed(){return yf=yf||new dr}function ag(n){li.call(this,Bo.Ma,n)}function Ul(n){const e=Ed();qr(e,new ag(e,n))}function QI(n,e){li.call(this,Bo.STAT_EVENT,n),this.stat=e}function _i(n){const e=Ed();qr(e,new QI(e,n))}function L0(n,e){li.call(this,Bo.Na,n),this.size=e}function _f(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return gt.setTimeout(function(){n()},e)}Bo.Ma="serverreachability",b(ag,li),Bo.STAT_EVENT="statevent",b(QI,li),Bo.Na="timingevent",b(L0,li);var ug={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Sy={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function V0(){}function JI(){}V0.prototype.h=null;var vf,wd={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function lg(){li.call(this,"d")}function My(){li.call(this,"c")}function xy(){}function cg(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new _d(this),this.P=Qb,this.W=new pf(n=my?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new XI}function XI(){this.i=null,this.g="",this.h=!1}b(lg,li),b(My,li),b(xy,V0),xy.prototype.g=function(){return new XMLHttpRequest},xy.prototype.i=function(){return{}},vf=new xy;var Qb=45e3,B0={},Ry={};function j0(n,e,t){n.K=1,n.v=Fa(Pa(e)),n.s=t,n.U=!0,eD(n,null)}function eD(n,e){n.F=Date.now(),Bl(n),n.A=Pa(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Z0(t.h,"t",r),n.C=0,t=n.l.H,n.h=new XI,n.g=oE(n.l,t?e:null,!n.s),0<n.O&&(n.L=new po(f(n.Ia,n,n.g),n.O)),og(n.V,n.g,"readystatechange",n.gb),e=n.H?dd(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Ul(1),function k0(n,e,t,r,o,l){n.info(function(){if(n.g)if(l)for(var h="",y=l.split("&"),I=0;I<y.length;I++){var A=y[I].split("=");if(1<A.length){var R=A[0];A=A[1];var N=R.split("_");h=2<=N.length&&"type"==N[1]?h+(R+"=")+A+"&":h+(R+"=redacted&")}}else h=null;else h=l;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.X,n.s)}function tD(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function nD(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=Mu(n,t),o==Ry){4==e&&(n.o=4,_i(14),r=!1),mf(n.j,n.m,null,"[Incomplete Response]");break}if(o==B0){n.o=4,_i(15),mf(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}mf(n.j,n.m,o,null),wf(n,o)}tD(n)&&o!=Ry&&o!=B0&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,_i(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Md(e),e.L=!0,_i(11))):(mf(n.j,n.m,t,"[Invalid Chunked Response]"),xu(n),jl(n))}function Mu(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ry:(t=Number(e.substring(t,r)),isNaN(t)?B0:(r+=1)+t>e.length?Ry:(e=e.substr(r,t),n.C=r+t,e))}function Bl(n){n.Y=Date.now()+n.P,$0(n,n.P)}function $0(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=_f(f(n.eb,n),e)}function Ef(n){n.B&&(gt.clearTimeout(n.B),n.B=null)}function jl(n){0==n.l.G||n.I||fD(n.l,n)}function xu(n){Ef(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,ig(n.W),Uo(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function wf(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Y0(t.i,n)))if(t.I=n.N,!n.J&&Y0(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(A){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=_f(f(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;wg(t),_g(t)}go(t),_i(18)}if(1>=Fy(t.i)&&t.ka){try{t.ka()}catch(A){}t.ka=void 0}}else Nu(t,11)}else if((n.J||t.g==n)&&wg(t),!Gr(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let A=o[e];if(t.U=A[0],A=A[1],2==t.G)if("c"==A[0]){t.J=A[1],t.la=A[2];const R=A[3];null!=R&&(t.ma=R,t.h.info("VER="+t.ma));const N=A[4];null!=N&&(t.za=N,t.h.info("SVER="+t.za));const G=A[5];null!=G&&"number"==typeof G&&0<G&&(t.K=r=1.5*G,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const Q=n.g;if(Q){const Ie=Q.g?Q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ie){var l=r.i;!l.g&&(er(Ie,"spdy")||er(Ie,"quic")||er(Ie,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(Ly(l,l.h),l.h=null))}if(r.D){const He=Q.g?Q.g.getResponseHeader("X-HTTP-Session-Id"):null;He&&(r.sa=He,nn(r.F,r.D,He))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var h=n;if((r=t).oa=xd(r,r.H?r.la:null,r.W),h.J){hg(r.i,h);var y=h,I=r.K;I&&y.setTimeout(I),y.B&&(Ef(y),Bl(y)),r.g=h}else Wy(r);0<t.l.length&&Eg(t)}else"stop"!=A[0]&&"close"!=A[0]||Nu(t,7);else 3==t.G&&("stop"==A[0]||"close"==A[0]?"stop"==A[0]?Nu(t,7):Hy(t):"noop"!=A[0]&&t.j&&t.j.wa(A),t.A=0)}Ul(4)}catch(A){}}function jo(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Ol(n)||"string"==typeof n)Ze(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Ol(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function rD(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Ol(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var l=0;l<o;l++)e.call(void 0,r[l],t&&t[l],n)}}function $l(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof $l)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Ny(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Oa(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Oa(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Oa(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(We=cg.prototype).setTimeout=function(n){this.P=n},We.gb=function(n){n=n.target;const e=this.L;e&&3==Vs(n)?e.l():this.Ia(n)},We.Ia=function(n){try{if(n==this.g)e:{const R=Vs(this.g);var e=this.g.Da();const N=this.g.ba();if(!(3>R)&&(3!=R||my||this.g&&(this.h.h||this.g.ga()||yg(this.g)))){this.I||4!=R||7==e||Ul(8==e||0>=N?3:2),Ef(this);var t=this.g.ba();this.N=t;t:if(tD(this)){var r=yg(this.g);n="";var o=r.length,l=4==Vs(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){xu(this),jl(this);var h="";break t}this.h.i=new gt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:l&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==t,function Ay(n,e,t,r,o,l,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+l+" "+h})}(this.j,this.u,this.A,this.m,this.X,R,t),this.i){if(this.$&&!this.J){t:{if(this.g){var y,I=this.g;if((y=I.g?I.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Gr(y)){var A=y;break t}}A=null}if(!(t=A)){this.i=!1,this.o=3,_i(12),xu(this),jl(this);break e}mf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,wf(this,t)}this.U?(nD(this,R,h),my&&this.i&&3==R&&(og(this.V,this.W,"tick",this.fb),this.W.start())):(mf(this.j,this.m,h,null),wf(this,h)),4==R&&xu(this),this.i&&!this.I&&(4==R?fD(this.l,this):(this.i=!1,Bl(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,_i(12)):(this.o=0,_i(13)),xu(this),jl(this)}}}catch(R){}},We.fb=function(){if(this.g){var n=Vs(this.g),e=this.g.ga();this.C<e.length&&(Ef(this),nD(this,n,e),this.i&&4!=n&&Bl(this))}},We.cancel=function(){this.I=!0,xu(this)},We.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function F0(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ul(3),_i(17)),xu(this),this.o=2,jl(this)):$0(this,this.Y-n)},(We=$l.prototype).R=function(){Ny(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},We.T=function(){return Ny(this),this.g.concat()},We.get=function(n,e){return Oa(this.h,n)?this.h[n]:e},We.set=function(n,e){Oa(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},We.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],l=this.get(o);n.call(e,l,o,this)}};var H0=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Hl(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Hl){this.g=void 0!==e?e:n.g,Ru(this,n.j),this.s=n.s,ka(this,n.i),Id(this,n.m),this.l=n.l,e=n.h;var t=new Cd;t.i=e.i,e.g&&(t.g=new $l(e.g),t.h=e.h),Gl(this,t),this.o=n.o}else n&&(t=String(n).match(H0))?(this.g=!!e,Ru(this,t[1]||"",!0),this.s=Dd(t[2]||""),ka(this,t[3]||"",!0),Id(this,t[4]),this.l=Dd(t[5]||"",!0),Gl(this,t[6]||"",!0),this.o=Dd(t[7]||"")):(this.g=!!e,this.h=new Cd(null,this.g))}function Pa(n){return new Hl(n)}function Ru(n,e,t){n.j=t?Dd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function ka(n,e,t){n.i=t?Dd(e,!0):e}function Id(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Gl(n,e,t){e instanceof Cd?(n.h=e,function cs(n,e){e&&!n.j&&(La(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(z0(this,r),Z0(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=ql(e,W0)),n.h=new Cd(e,n.g))}function nn(n,e,t){n.h.set(e,t)}function Fa(n){return nn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Dd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ql(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Oy),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Oy(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Hl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ql(e,Py,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ql(e,Py,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(ql(t,"/"==t.charAt(0)?sD:dg,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ql(t,Jb)),n.join("")};var Py=/[#\/\?@]/g,dg=/[#\?:]/g,sD=/[#\?]/g,W0=/[#\?@]/g,Jb=/#/g;function Cd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function La(n){n.g||(n.g=new $l,n.h=0,n.i&&function G0(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var l=n[t].substring(0,r);o=n[t].substring(r+1)}else l=n[t];e(l,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function z0(n,e){La(n),e=bd(n,e),Oa(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Oa((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Ny(n)))}function ky(n,e){return La(n),e=bd(n,e),Oa(n.g.h,e)}function Z0(n,e,t){z0(n,e),0<t.length&&(n.i=null,n.g.set(bd(n,e),sn(t)),n.h+=t.length)}function bd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function K0(n){this.l=n||Xb,n=gt.PerformanceNavigationTiming?0<(n=gt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(gt.g&&gt.g.Ea&&gt.g.Ea()&&gt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(We=Cd.prototype).add=function(n,e){La(this),this.i=null,n=bd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},We.forEach=function(n,e){La(this),this.g.forEach(function(t,r){Ze(t,function(o){n.call(e,o,r,this)},this)},this)},We.T=function(){La(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],l=0;l<o.length;l++)t.push(e[r]);return t},We.R=function(n){La(this);var e=[];if("string"==typeof n)ky(this,n)&&(e=nt(e,this.g.get(bd(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=nt(e,n[t])}return e},We.set=function(n,e){return La(this),this.i=null,ky(this,n=bd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},We.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},We.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var l=0;l<r.length;l++){var h=o;""!==r[l]&&(h+="="+encodeURIComponent(String(r[l]))),n.push(h)}}return this.i=n.join("&")};var Xb=10;function aD(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Fy(n){return n.h?1:n.g?n.g.size:0}function Y0(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Ly(n,e){n.g?n.g.add(e):n.h=e}function hg(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Vy(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return sn(n.i)}function Uy(){}function uD(){this.g=new Uy}function lD(n,e,t){const r=t||"";try{jo(n,function(o,l){let h=o;Pl(o)&&(h=ls(o)),e.push(r+l+"="+encodeURIComponent(h))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function fg(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(l){}}function Td(n){this.l=n.$b||null,this.j=n.ib||!1}function pg(n,e){dr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=By,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}K0.prototype.cancel=function(){if(this.i=Vy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Uy.prototype.stringify=function(n){return gt.JSON.stringify(n,void 0)},Uy.prototype.parse=function(n){return gt.JSON.parse(n,void 0)},b(Td,V0),Td.prototype.g=function(){return new pg(this.l,this.j)},Td.prototype.i=function(n){return function(){return n}}({}),b(pg,dr);var By=0;function jy(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Ad(n){n.readyState=4,n.l=null,n.j=null,n.A=null,If(n)}function If(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(We=pg.prototype).open=function(n,e){if(this.readyState!=By)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,If(this)},We.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||gt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},We.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ad(this)),this.readyState=By},We.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,If(this)),this.g&&(this.readyState=3,If(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==gt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;jy(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},We.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ad(this):If(this),3==this.readyState&&jy(this)}},We.Ua=function(n){this.g&&(this.response=this.responseText=n,Ad(this))},We.Ta=function(n){this.g&&(this.response=n,Ad(this))},We.ha=function(){this.g&&Ad(this)},We.setRequestHeader=function(n,e){this.v.append(n,e)},We.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},We.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(pg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var $o=gt.JSON.parse;function Un(n){dr.call(this),this.headers=new $l,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=J0,this.K=this.L=!1}b(Un,dr);var J0="",cD=/^https?$/i,eT=["POST","PUT"];function dD(n){return"content-type"==n.toLowerCase()}function eE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,tE(n),mg(n)}function tE(n){n.D||(n.D=!0,qr(n,"complete"),qr(n,"error"))}function gg(n){if(n.h&&void 0!==Nl&&(!n.C[1]||4!=Vs(n)||2!=n.ba()))if(n.v&&4==Vs(n))sg(n.Fa,0,n);else if(qr(n,"readystatechange"),4==Vs(n)){n.h=!1;try{const y=n.ba();e:switch(y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===y){var o=String(n.H).match(H0)[1]||null;if(!o&&gt.self&&gt.self.location){var l=gt.self.location.protocol;o=l.substr(0,l.length-1)}r=!cD.test(o?o.toLowerCase():"")}t=r}if(t)qr(n,"complete"),qr(n,"success");else{n.m=6;try{var h=2<Vs(n)?n.g.statusText:""}catch(I){h=""}n.j=h+" ["+n.ba()+"]",tE(n)}}finally{mg(n)}}}function mg(n,e){if(n.g){nE(n);const t=n.g,r=n.C[0]?cd:null;n.g=null,n.C=null,e||qr(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function nE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(gt.clearTimeout(n.A),n.A=null)}function Vs(n){return n.g?n.g.readyState:0}function yg(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case J0:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Df(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function hD(n){let e="";return Su(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):nn(n,e,t))}function Wl(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function $y(n){this.za=0,this.l=[],this.h=new vd,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Wl("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Wl("baseRetryDelayMs",5e3,n),this.$a=Wl("retryDelaySeedMs",1e4,n),this.Ya=Wl("forwardChannelMaxRetries",2,n),this.ra=Wl("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new K0(n&&n.concurrentRequestLimit),this.Ca=new uD,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Hy(n){if(vg(n),3==n.G){var e=n.V++,t=Pa(n.F);nn(t,"SID",n.J),nn(t,"RID",e),nn(t,"TYPE","terminate"),Sd(n,t),(e=new cg(n,n.h,e,void 0)).K=2,e.v=Fa(Pa(t)),t=!1,gt.navigator&&gt.navigator.sendBeacon&&(t=gt.navigator.sendBeacon(e.v.toString(),"")),!t&&gt.Image&&((new Image).src=e.v,t=!0),t||(e.g=oE(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Bl(e)}Dg(n)}function _g(n){n.g&&(Md(n),n.g.cancel(),n.g=null)}function vg(n){_g(n),n.u&&(gt.clearTimeout(n.u),n.u=null),wg(n),n.i.cancel(),n.m&&("number"==typeof n.m&&gt.clearTimeout(n.m),n.m=null)}function rE(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Eg(n)}function Eg(n){aD(n.i)||n.m||(n.m=!0,by(n.Ha,n),n.C=0)}function Gy(n,e){var t;t=e?e.m:n.V++;const r=Pa(n.F);nn(r,"SID",n.J),nn(r,"RID",t),nn(r,"AID",n.U),Sd(n,r),n.o&&n.s&&Df(r,n.o,n.s),t=new cg(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=qy(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Ly(n.i,t),j0(t,r,e)}function Sd(n,e){n.j&&jo({},function(t,r){nn(e,r,t)})}function qy(n,e,t){t=Math.min(n.l.length,t);var r=n.j?f(n.j.Oa,n.j,n):null;e:{var o=n.l;let l=-1;for(;;){const h=["count="+t];-1==l?0<t?(l=o[0].h,h.push("ofs="+l)):l=0:h.push("ofs="+l);let y=!0;for(let I=0;I<t;I++){let A=o[I].h;const R=o[I].g;if(A-=l,0>A)l=Math.max(0,o[I].h-100),y=!1;else try{lD(R,h,"req"+A+"_")}catch(N){r&&r(R)}}if(y){r=h.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Wy(n){n.g||n.u||(n.Y=1,by(n.Ga,n),n.A=0)}function go(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=_f(f(n.Ga,n),Ig(n,n.A)),n.A++,0))}function Md(n){null!=n.B&&(gt.clearTimeout(n.B),n.B=null)}function sE(n){n.g=new cg(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Pa(n.oa);nn(e,"RID","rpc"),nn(e,"SID",n.J),nn(e,"CI",n.N?"0":"1"),nn(e,"AID",n.U),Sd(n,e),nn(e,"TYPE","xmlhttp"),n.o&&n.s&&Df(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Fa(Pa(e)),t.s=null,t.U=!0,eD(t,n)}function wg(n){null!=n.v&&(gt.clearTimeout(n.v),n.v=null)}function fD(n,e){var t=null;if(n.g==e){wg(n),Md(n),n.g=null;var r=2}else{if(!Y0(n.i,e))return;t=e.D,hg(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;qr(r=Ed(),new L0(r,t,e,o)),Eg(n)}else Wy(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function iE(n,e){return!(Fy(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=_f(f(n.Ha,n,e),Ig(n,n.C)),n.C++,0)))}(n,e)||2==r&&go(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Nu(n,5);break;case 4:Nu(n,10);break;case 3:Nu(n,6);break;default:Nu(n,2)}}function Ig(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Nu(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=f(n.jb,n);t||(t=new Hl("//www.google.com/images/cleardot.gif"),gt.location&&"http"==gt.location.protocol||Ru(t,"https"),Fa(t)),function Q0(n,e){const t=new vd;if(gt.Image){const r=new Image;r.onload=v(fg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=v(fg,t,r,"TestLoadImage: error",!1,e),r.onabort=v(fg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=v(fg,t,r,"TestLoadImage: timeout",!1,e),gt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else _i(2);n.G=0,n.j&&n.j.va(e),Dg(n),vg(n)}function Dg(n){n.G=0,n.I=-1,n.j&&((0!=Vy(n.i).length||0!=n.l.length)&&(n.i.i.length=0,sn(n.l),n.l.length=0),n.j.ua())}function xd(n,e,t){let r=function iD(n){return n instanceof Hl?Pa(n):new Hl(n,void 0)}(t);if(""!=r.i)e&&ka(r,e+"."+r.i),Id(r,r.m);else{const o=gt.location;r=function q0(n,e,t,r){var o=new Hl(null,void 0);return n&&Ru(o,n),e&&ka(o,e),t&&Id(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Su(n.aa,function(o,l){nn(r,l,o)}),t=n.sa,(e=n.D)&&t&&nn(r,e,t),nn(r,"VER",n.ma),Sd(n,r),r}function oE(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Un(t&&n.Ba&&!n.qa?new Td({ib:!0}):n.qa)).L=n.H,e}function Cg(){}function Cf(){if(fd&&!(10<=Number(WI)))throw Error("Environmental error: no available transport.")}function Fi(n,e){dr.call(this),this.g=new $y(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Gr(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Gr(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ou(this)}function zy(n){lg.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function aE(){My.call(this),this.status=1}function Ou(n){this.g=n}(We=Un.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():vf.g(),this.C=function U0(n){return n.h||(n.h=n.i())}(this.u?this.u:vf),this.g.onreadystatechange=f(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void eE(this,l)}n=t||"";const o=new $l(this.headers);r&&jo(r,function(l,h){o.set(h,l)}),r=function ft(n){e:{var e=dD;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=gt.FormData&&n instanceof gt.FormData,!(0<=Le(eT,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(l,h){this.g.setRequestHeader(h,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{nE(this),0<this.B&&((this.K=function X0(n){return fd&&function Fl(){return function df(n){var e=I0;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Au(String(pd)).split("."),t=Au("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var o=e[h]||"",l=t[h]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==o[0].length&&0==l[0].length)break;n=Na(0==o[1].length?0:parseInt(o[1],10),0==l[1].length?0:parseInt(l[1],10))||Na(0==o[2].length,0==l[2].length)||Na(o[2],l[2]),o=o[3],l=l[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=f(this.pa,this)):this.A=sg(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){eE(this,l)}},We.pa=function(){void 0!==Nl&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,qr(this,"timeout"),this.abort(8))},We.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,qr(this,"complete"),qr(this,"abort"),mg(this))},We.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),mg(this,!0)),Un.Z.M.call(this)},We.Fa=function(){this.s||(this.F||this.v||this.l?gg(this):this.cb())},We.cb=function(){gg(this)},We.ba=function(){try{return 2<Vs(this)?this.g.status:-1}catch(n){return-1}},We.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},We.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),$o(e)}},We.Da=function(){return this.m},We.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(We=$y.prototype).ma=8,We.G=1,We.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},We.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new cg(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=dd(l),kl(l,this.P)):l=this.P),null===this.o&&(o.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=qy(this,o,e),nn(t=Pa(this.F),"RID",n),nn(t,"CVER",22),this.D&&nn(t,"X-HTTP-Session-Id",this.D),Sd(this,t),this.o&&l&&Df(t,this.o,l),Ly(this.i,o),this.Ra&&nn(t,"TYPE","init"),this.ja?(nn(t,"$req",e),nn(t,"SID","null"),o.$=!0,j0(o,t,null)):j0(o,t,e),this.G=2}}else 3==this.G&&(n?Gy(this,n):0==this.l.length||aD(this.i)||Gy(this))},We.Ga=function(){if(this.u=null,sE(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=_f(f(this.bb,this),n)}},We.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,_i(10),_g(this),sE(this))},We.ab=function(){null!=this.v&&(this.v=null,_g(this),go(this),_i(19))},We.jb=function(n){n?(this.h.info("Successfully pinged google.com"),_i(2)):(this.h.info("Failed to ping google.com"),_i(1))},(We=Cg.prototype).xa=function(){},We.wa=function(){},We.va=function(){},We.ua=function(){},We.Oa=function(){},Cf.prototype.g=function(n,e){return new Fi(n,e)},b(Fi,dr),Fi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),by(f(n.hb,n,e))),_i(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=xd(n,null,n.W),Eg(n)},Fi.prototype.close=function(){Hy(this.g)},Fi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,rE(this.g,e)}else this.v?((e={}).__data__=ls(n),rE(this.g,e)):rE(this.g,n)},Fi.prototype.M=function(){this.g.j=null,delete this.j,Hy(this.g),delete this.g,Fi.Z.M.call(this)},b(zy,lg),b(aE,My),b(Ou,Cg),Ou.prototype.xa=function(){qr(this.g,"a")},Ou.prototype.wa=function(n){qr(this.g,new zy(n))},Ou.prototype.va=function(n){qr(this.g,new aE(n))},Ou.prototype.ua=function(){qr(this.g,"b")},Cf.prototype.createWebChannel=Cf.prototype.g,Fi.prototype.send=Fi.prototype.u,Fi.prototype.open=Fi.prototype.m,Fi.prototype.close=Fi.prototype.close,ug.NO_ERROR=0,ug.TIMEOUT=8,ug.HTTP_ERROR=6,Sy.COMPLETE="complete",JI.EventType=wd,wd.OPEN="a",wd.CLOSE="b",wd.ERROR="c",wd.MESSAGE="d",dr.prototype.listen=dr.prototype.N,Un.prototype.listenOnce=Un.prototype.O,Un.prototype.getLastError=Un.prototype.La,Un.prototype.getLastErrorCode=Un.prototype.Da,Un.prototype.getStatus=Un.prototype.ba,Un.prototype.getResponseJson=Un.prototype.Qa,Un.prototype.getResponseText=Un.prototype.ga,Un.prototype.send=Un.prototype.ea;var pD=lr.createWebChannelTransport=function(){return new Cf},gD=lr.getStatEventTarget=function(){return Ed()},bg=lr.ErrorCode=ug,Rd=lr.EventType=Sy,uE=lr.Event=Bo,lE=lr.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},mD=lr.FetchXmlHttpFactory=Td,Va=lr.WebChannel=JI,yD=lr.XhrIo=Un;const cE="@firebase/firestore";class Wr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wr.UNAUTHENTICATED=new Wr(null),Wr.GOOGLE_CREDENTIALS=new Wr("google-credentials-uid"),Wr.FIRST_PARTY=new Wr("first-party-uid"),Wr.MOCK_USER=new Wr("mock-user");let Nd="9.6.5";const hr=new Ls.Yd("@firebase/firestore");function bf(){return hr.logLevel}function Pe(n,...e){if(hr.logLevel<=Ls.in.DEBUG){const t=e.map(Zy);hr.debug(`Firestore (${Nd}): ${n}`,...t)}}function Kn(n,...e){if(hr.logLevel<=Ls.in.ERROR){const t=e.map(Zy);hr.error(`Firestore (${Nd}): ${n}`,...t)}}function Od(n,...e){if(hr.logLevel<=Ls.in.WARN){const t=e.map(Zy);hr.warn(`Firestore (${Nd}): ${n}`,...t)}}function Zy(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${Nd}) INTERNAL ASSERTION FAILED: `+n;throw Kn(e),new Error(e)}function mt(n,e){n||it()}function $e(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends Dt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Sr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class hE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wr.UNAUTHENTICATED))}shutdown(){}}class nT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ky{constructor(e){this.t=e,this.currentUser=Wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const l=A=>this.i!==o?(o=this.i,t(A)):Promise.resolve();let h=new Sr;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Sr,e.enqueueRetryable(()=>l(this.currentUser))};const y=()=>{const A=h;e.enqueueRetryable((0,_e.Z)(function*(){yield A.promise,yield l(r.currentUser)}))},I=A=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=A,this.auth.addAuthTokenListener(this.o),y()};this.t.onInit(A=>I(A)),setTimeout(()=>{if(!this.auth){const A=this.t.getImmediate({optional:!0});A?I(A):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Sr)}},0),y()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt("string"==typeof r.accessToken),new hE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return mt(null===e||"string"==typeof e),new Wr(e)}}class vD{constructor(e,t,r){this.type="FirstParty",this.user=Wr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class fE{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new vD(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Wr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Yy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rT{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,t){this.o=o=>{e.enqueueRetryable(()=>{return null!=(l=o).error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`),t(l.token);var l})};const r=o=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.g.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.g.getImmediate({optional:!0});o?r(o):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(mt("string"==typeof t.token),new Yy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Us{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.p(r),this.T=r=>t.writeSequenceNumber(r))}p(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function iT(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Us.I=-1;class Qy{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=iT(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<t&&(r+=e.charAt(o[l]%e.length))}return r}}function Nt(n,e){return n<e?-1:n>e?1:0}function zl(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function pE(n){return n+"\0"}class zr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Se(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Se(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Se(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return zr.fromMillis(Date.now())}static fromDate(e){return zr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new zr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Nt(this.nanoseconds,e.nanoseconds):Nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new zr(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Tg(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Zl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ag(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Tf{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Tf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Tf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const l=e.get(o),h=t.get(o);if(l<h)return-1;if(l>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class zt extends Tf{construct(e,t,r){return new zt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Se(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new zt(t)}static emptyPath(){return new zt([])}}const ED=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zr extends Tf{construct(e,t,r){return new Zr(e,t,r)}static isValidIdentifier(e){return ED.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Zr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const l=()=>{if(0===r.length)throw new Se(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;o<e.length;){const y=e[o];if("\\"===y){if(o+1===e.length)throw new Se(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const I=e[o+1];if("\\"!==I&&"."!==I&&"`"!==I)throw new Se(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=I,o+=2}else"`"===y?(h=!h,o++):"."!==y||h?(r+=y,o++):(l(),o++)}if(l(),h)throw new Se(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zr(t)}static emptyPath(){return new Zr([])}}class Pd{constructor(e){this.fields=e,e.sort(Zr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Bn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Bn(t)}static fromUint8Array(e){const t=function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o}(e);return new Bn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bn.EMPTY_BYTE_STRING=new Bn("");const kd=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pu(n){if(mt(!!n),"string"==typeof n){let e=0;const t=kd.exec(n);if(mt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wn(n.seconds),nanos:wn(n.nanos)}}function wn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Fd(n){return"string"==typeof n?Bn.fromBase64String(n):Bn.fromUint8Array(n)}function Jy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Sg(n){const e=n.mapValue.fields.__previous_value__;return Jy(e)?Sg(e):e}function Li(n){const e=Pu(n.mapValue.fields.__local_write_time__.timestampValue);return new zr(e.seconds,e.nanos)}function mo(n){return null==n}function fr(n){return 0===n&&1/n==-1/0}function ku(n){return"number"==typeof n&&Number.isInteger(n)&&!fr(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Je{constructor(e){this.path=e}static fromPath(e){return new Je(zt.fromString(e))}static fromName(e){return new Je(zt.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===zt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new zt(e.slice()))}}function Mr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Jy(n)?4:10:it()}function Bs(n,e){if(n===e)return!0;const t=Mr(n);if(t!==Mr(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Li(n).isEqual(Li(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=Pu(r.timestampValue),h=Pu(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Fd(n.bytesValue).isEqual(Fd(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return wn(r.geoPointValue.latitude)===wn(o.geoPointValue.latitude)&&wn(r.geoPointValue.longitude)===wn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return wn(r.integerValue)===wn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=wn(r.doubleValue),h=wn(o.doubleValue);return l===h?fr(l)===fr(h):isNaN(l)&&isNaN(h)}return!1}(n,e);case 9:return zl(n.arrayValue.values||[],e.arrayValue.values||[],Bs);case 10:return function(r,o){const l=r.mapValue.fields||{},h=o.mapValue.fields||{};if(Tg(l)!==Tg(h))return!1;for(const y in l)if(l.hasOwnProperty(y)&&(void 0===h[y]||!Bs(l[y],h[y])))return!1;return!0}(n,e);default:return it()}var o}function Go(n,e){return void 0!==(n.values||[]).find(t=>Bs(t,e))}function yo(n,e){if(n===e)return 0;const t=Mr(n),r=Mr(e);if(t!==r)return Nt(t,r);switch(t){case 0:return 0;case 1:return Nt(n.booleanValue,e.booleanValue);case 2:return function(o,l){const h=wn(o.integerValue||o.doubleValue),y=wn(l.integerValue||l.doubleValue);return h<y?-1:h>y?1:h===y?0:isNaN(h)?isNaN(y)?0:-1:1}(n,e);case 3:return Kl(n.timestampValue,e.timestampValue);case 4:return Kl(Li(n),Li(e));case 5:return Nt(n.stringValue,e.stringValue);case 6:return function(o,l){const h=Fd(o),y=Fd(l);return h.compareTo(y)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),y=l.split("/");for(let I=0;I<h.length&&I<y.length;I++){const A=Nt(h[I],y[I]);if(0!==A)return A}return Nt(h.length,y.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const h=Nt(wn(o.latitude),wn(l.latitude));return 0!==h?h:Nt(wn(o.longitude),wn(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,l){const h=o.values||[],y=l.values||[];for(let I=0;I<h.length&&I<y.length;++I){const A=yo(h[I],y[I]);if(A)return A}return Nt(h.length,y.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,l){const h=o.fields||{},y=Object.keys(h),I=l.fields||{},A=Object.keys(I);y.sort(),A.sort();for(let R=0;R<y.length&&R<A.length;++R){const N=Nt(y[R],A[R]);if(0!==N)return N;const G=yo(h[y[R]],I[A[R]]);if(0!==G)return G}return Nt(y.length,A.length)}(n.mapValue,e.mapValue);default:throw it()}}function Kl(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Nt(n,e);const t=Pu(n),r=Pu(e),o=Nt(t.seconds,r.seconds);return 0!==o?o:Nt(t.nanos,r.nanos)}function Fu(n){return Lu(n)}function Lu(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Pu(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Fd(n.bytesValue).toBase64():"referenceValue"in n?Je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",l=!0;for(const h of r.values||[])l?l=!1:o+=",",o+=Lu(h);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let l="{",h=!0;for(const y of o)h?h=!1:l+=",",l+=`${y}:${Lu(r.fields[y])}`;return l+"}"}(n.mapValue):it();var e}function Ua(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Vu(n){return!!n&&"integerValue"in n}function Uu(n){return!!n&&"arrayValue"in n}function Yl(n){return!!n&&"nullValue"in n}function Xy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Af(n){return!!n&&"mapValue"in n}function Ld(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Zl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ld(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ld(n.arrayValue.values[t]);return e}return Object.assign({},n)}class Kr{constructor(e){this.value=e}static empty(){return new Kr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Af(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ld(t)}setAll(e){let t=Zr.emptyPath(),r={},o=[];e.forEach((h,y)=>{if(!t.isImmediateParentOf(y)){const I=this.getFieldsMap(t);this.applyChanges(I,r,o),r={},o=[],t=y.popLast()}h?r[y.lastSegment()]=Ld(h):o.push(y.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,o)}delete(e){const t=this.field(e.popLast());Af(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Af(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Zl(t,(o,l)=>e[o]=l);for(const o of r)delete e[o]}clone(){return new Kr(Ld(this.value))}}function e_(n){const e=[];return Zl(n.fields,(t,r)=>{const o=new Zr([t]);if(Af(r)){const l=e_(r.mapValue).fields;if(0===l.length)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new Pd(e)}class gn{constructor(e,t,r,o,l){this.key=e,this.documentType=t,this.version=r,this.data=o,this.documentState=l}static newInvalidDocument(e){return new gn(e,0,vt.min(),Kr.empty(),0)}static newFoundDocument(e,t,r){return new gn(e,1,t,r,0)}static newNoDocument(e,t){return new gn(e,2,t,Kr.empty(),0)}static newUnknownDocument(e,t){return new gn(e,3,t,Kr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gn(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class gE{constructor(e,t=null,r=[],o=[],l=null,h=null,y=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=h,this.endAt=y,this.R=null}}function t_(n,e=null,t=[],r=[],o=null,l=null,h=null){return new gE(n,e,t,r,o,l,h)}function Vd(n){const e=$e(n);if(null===e.R){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>function mE(n){return n.field.canonicalString()+n.op.toString()+Fu(n.value)}(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),mo(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=Ud(e.startAt)),e.endAt&&(t+="|ub:",t+=Ud(e.endAt)),e.R=t}return e.R}function Sf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!AD(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Bs(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!MD(n.startAt,e.startAt)&&MD(n.endAt,e.endAt)}function Mg(n){return Je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class vi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,r):new DD(e,t,r):"array-contains"===t?new vE(e,r):"in"===t?new bD(e,r):"not-in"===t?new TD(e,r):"array-contains-any"===t?new sT(e,r):new vi(e,t,r)}static P(e,t,r){return"in"===t?new CD(e,r):new yE(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(yo(t,this.value)):null!==t&&Mr(this.value)===Mr(t)&&this.v(yo(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class DD extends vi{constructor(e,t,r){super(e,t,r),this.key=Je.fromName(r.referenceValue)}matches(e){const t=Je.comparator(e.key,this.key);return this.v(t)}}class CD extends vi{constructor(e,t){super(e,"in",t),this.keys=_E(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class yE extends vi{constructor(e,t){super(e,"not-in",t),this.keys=_E(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function _E(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Je.fromName(r.referenceValue))}class vE extends vi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Uu(t)&&Go(t.arrayValue,this.value)}}class bD extends vi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Go(this.value.arrayValue,t)}}class TD extends vi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Go(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Go(this.value.arrayValue,t)}}class sT extends vi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Uu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Go(this.value.arrayValue,r))}}class Mf{constructor(e,t){this.position=e,this.before=t}}function Ud(n){return`${n.before?"b":"a"}:${n.position.map(e=>Fu(e)).join(",")}`}class Bu{constructor(e,t="asc"){this.field=e,this.dir=t}}function AD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function SD(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const l=e[o],h=n.position[o];if(r=l.field.isKeyField()?Je.comparator(Je.fromName(h.referenceValue),t.key):yo(h,t.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return n.before?r<=0:r<0}function MD(n,e){if(null===n)return null===e;if(null===e||n.before!==e.before||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Bs(n.position[t],e.position[t]))return!1;return!0}class ju{constructor(e,t=null,r=[],o=[],l=null,h="F",y=null,I=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=h,this.startAt=y,this.endAt=I,this.S=null,this.D=null}}function EE(n,e,t,r,o,l,h,y){return new ju(n,e,t,r,o,l,h,y)}function Ql(n){return new ju(n)}function n_(n){return!mo(n.limit)&&"F"===n.limitType}function xg(n){return!mo(n.limit)&&"L"===n.limitType}function $u(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function r_(n){for(const e of n.filters)if(e.V())return e.field;return null}function Rg(n){return null!==n.collectionGroup}function Bd(n){const e=$e(n);if(null===e.S){e.S=[];const t=r_(e),r=$u(e);if(null!==t&&null===r)t.isKeyField()||e.S.push(new Bu(t)),e.S.push(new Bu(Zr.keyField(),"asc"));else{let o=!1;for(const l of e.explicitOrderBy)e.S.push(l),l.field.isKeyField()&&(o=!0);if(!o){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new Bu(Zr.keyField(),l))}}}return e.S}function ds(n){const e=$e(n);if(!e.D)if("F"===e.limitType)e.D=t_(e.path,e.collectionGroup,Bd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of Bd(e))t.push(new Bu(l.field,"desc"===l.dir?"asc":"desc"));const r=e.endAt?new Mf(e.endAt.position,!e.endAt.before):null,o=e.startAt?new Mf(e.startAt.position,!e.startAt.before):null;e.D=t_(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.D}function xf(n,e,t){return new ju(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Rf(n,e){return Sf(ds(n),ds(e))&&n.limitType===e.limitType}function i_(n){return`${Vd(ds(n))}|lt:${n.limitType}`}function s_(n){return`Query(target=${function ID(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Fu(r.value)}`;var r}).join(", ")}]`),mo(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: "+Ud(n.startAt)),n.endAt&&(e+=", endAt: "+Ud(n.endAt)),`Target(${e})`}(ds(n))}; limitType=${n.limitType})`}function Nf(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Je.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!SD(t.startAt,Bd(t),r)||t.endAt&&SD(t.endAt,Bd(t),r)));var t,r}function wE(n){return(e,t)=>{let r=!1;for(const o of Bd(n)){const l=xD(o,e,t);if(0!==l)return l;r=r||o.field.isKeyField()}return 0}}function xD(n,e,t){const r=n.field.isKeyField()?Je.comparator(e.key,t.key):function(o,l,h){const y=l.data.field(o),I=h.data.field(o);return null!==y&&null!==I?yo(y,I):it()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return it()}}function IE(n,e){if(n.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fr(e)?"-0":e}}function o_(n){return{integerValue:""+n}}function DE(n,e){return ku(e)?o_(e):IE(n,e)}class Of{constructor(){this._=void 0}}function CE(n,e,t){return n instanceof Hu?function(r,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(l.fields.__previous_value__=o),{mapValue:l}}(t,e):n instanceof Jl?ND(n,e):n instanceof _o?u_(n,e):function(r,o){const l=RD(r,o),h=Ng(l)+Ng(r.N);return Vu(l)&&Vu(r.N)?o_(h):IE(r.k,h)}(n,e)}function a_(n,e,t){return n instanceof Jl?ND(n,e):n instanceof _o?u_(n,e):t}function RD(n,e){return n instanceof Gu?Vu(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Hu extends Of{}class Jl extends Of{constructor(e){super(),this.elements=e}}function ND(n,e){const t=bE(e);for(const r of n.elements)t.some(o=>Bs(o,r))||t.push(r);return{arrayValue:{values:t}}}class _o extends Of{constructor(e){super(),this.elements=e}}function u_(n,e){let t=bE(e);for(const r of n.elements)t=t.filter(o=>!Bs(o,r));return{arrayValue:{values:t}}}class Gu extends Of{constructor(e,t){super(),this.k=e,this.N=t}}function Ng(n){return wn(n.integerValue||n.doubleValue)}function bE(n){return Uu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Xl{constructor(e,t){this.field=e,this.transform=t}}class TE{constructor(e,t){this.version=e,this.transformResults=t}}class pr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pr}static exists(e){return new pr(void 0,e)}static updateTime(e){return new pr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Og(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Pf{}function AE(n,e,t){n instanceof jd?function(r,o,l){const h=r.value.clone(),y=ME(r.fieldTransforms,o,l.transformResults);h.setAll(y),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(n,e,t):n instanceof qo?function(r,o,l){if(!Og(r.precondition,o))return void o.convertToUnknownDocument(l.version);const h=ME(r.fieldTransforms,o,l.transformResults),y=o.data;y.setAll(h_(r)),y.setAll(h),o.convertToFoundDocument(l.version,y).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function c_(n,e,t){var o;n instanceof jd?function(r,o,l){if(!Og(r.precondition,o))return;const h=r.value.clone(),y=f_(r.fieldTransforms,l,o);h.setAll(y),o.convertToFoundDocument(d_(o),h).setHasLocalMutations()}(n,e,t):n instanceof qo?function(r,o,l){if(!Og(r.precondition,o))return;const h=f_(r.fieldTransforms,l,o),y=o.data;y.setAll(h_(r)),y.setAll(h),o.convertToFoundDocument(d_(o),y).setHasLocalMutations()}(n,e,t):Og(n.precondition,o=e)&&o.convertToNoDocument(vt.min())}function SE(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),l=RD(r.transform,o||null);null!=l&&(null==t&&(t=Kr.empty()),t.set(r.field,l))}return t||null}function Pg(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&zl(t,r,(o,l)=>function l_(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Jl&&r instanceof Jl||t instanceof _o&&r instanceof _o?zl(t.elements,r.elements,Bs):t instanceof Gu&&r instanceof Gu?Bs(t.N,r.N):t instanceof Hu&&r instanceof Hu);var t,r}(o,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function d_(n){return n.isFoundDocument()?n.version:vt.min()}class jd extends Pf{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class qo extends Pf{constructor(e,t,r,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}}function h_(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function ME(n,e,t){const r=new Map;mt(n.length===t.length);for(let o=0;o<t.length;o++){const l=n[o],h=l.transform,y=e.data.field(l.field);r.set(l.field,a_(h,y,t[o]))}return r}function f_(n,e,t){const r=new Map;for(const o of n){const l=o.transform,h=t.data.field(o.field);r.set(o.field,CE(l,h,e))}return r}class $d extends Pf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class kf extends Pf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class xE{constructor(e){this.count=e}}var tr,Vt;function RE(n){switch(n){default:return it();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function p_(n){if(void 0===n)return Kn("GRPC error has no .code"),de.UNKNOWN;switch(n){case tr.OK:return de.OK;case tr.CANCELLED:return de.CANCELLED;case tr.UNKNOWN:return de.UNKNOWN;case tr.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case tr.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case tr.INTERNAL:return de.INTERNAL;case tr.UNAVAILABLE:return de.UNAVAILABLE;case tr.UNAUTHENTICATED:return de.UNAUTHENTICATED;case tr.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case tr.NOT_FOUND:return de.NOT_FOUND;case tr.ALREADY_EXISTS:return de.ALREADY_EXISTS;case tr.PERMISSION_DENIED:return de.PERMISSION_DENIED;case tr.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case tr.ABORTED:return de.ABORTED;case tr.OUT_OF_RANGE:return de.OUT_OF_RANGE;case tr.UNIMPLEMENTED:return de.UNIMPLEMENTED;case tr.DATA_LOSS:return de.DATA_LOSS;default:return it()}}(Vt=tr||(tr={}))[Vt.OK=0]="OK",Vt[Vt.CANCELLED=1]="CANCELLED",Vt[Vt.UNKNOWN=2]="UNKNOWN",Vt[Vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vt[Vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vt[Vt.NOT_FOUND=5]="NOT_FOUND",Vt[Vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vt[Vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vt[Vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vt[Vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vt[Vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vt[Vt.ABORTED=10]="ABORTED",Vt[Vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vt[Vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vt[Vt.INTERNAL=13]="INTERNAL",Vt[Vt.UNAVAILABLE=14]="UNAVAILABLE",Vt[Vt.DATA_LOSS=15]="DATA_LOSS";class Yn{constructor(e,t){this.comparator=e,this.root=t||xr.EMPTY}insert(e,t){return new Yn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xr.BLACK,null,null))}remove(e){return new Yn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ff(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ff(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ff(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ff(this.root,e,this.comparator,!0)}}class Ff{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xr{constructor(e,t,r,o,l){this.key=e,this.value=t,this.color=null!=r?r:xr.RED,this.left=null!=o?o:xr.EMPTY,this.right=null!=l?l:xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,l){return new xr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===l?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return xr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}xr.EMPTY=null,xr.RED=!0,xr.BLACK=!1,xr.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,r,o){return this}insert(n,e,t){return new xr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Sn{constructor(e){this.comparator=e,this.data=new Yn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new g_(this.data.getIterator())}getIteratorFrom(e){return new g_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Sn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(0!==this.comparator(o,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Sn(this.comparator);return t.data=e,t}}class g_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const NE=new Yn(Je.comparator);function hs(){return NE}const OE=new Yn(Je.comparator);function kg(){return OE}const oT=new Yn(Je.comparator);function PE(){return oT}const OD=new Sn(Je.comparator);function Yt(...n){let e=OD;for(const t of n)e=e.add(t);return e}const PD=new Sn(Nt);function jn(){return PD}class Hd{constructor(e,t,r,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Lf.createSynthesizedTargetChangeForCurrentChange(e,t)),new Hd(vt.min(),r,jn(),hs(),Yt())}}class Lf{constructor(e,t,r,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Lf(Bn.EMPTY_BYTE_STRING,t,Yt(),Yt(),Yt())}}class Fg{constructor(e,t,r,o){this.$=e,this.removedTargetIds=t,this.key=r,this.O=o}}class m_{constructor(e,t){this.targetId=e,this.M=t}}class kE{constructor(e,t,r=Bn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class y_{constructor(){this.F=0,this.L=LE(),this.B=Bn.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.F}get j(){return this.q}W(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}G(){let e=Yt(),t=Yt(),r=Yt();return this.L.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:it()}}),new Lf(this.B,this.U,e,t,r)}H(){this.q=!1,this.L=LE()}J(e,t){this.q=!0,this.L=this.L.insert(e,t)}Y(e){this.q=!0,this.L=this.L.remove(e)}X(){this.F+=1}Z(){this.F-=1}tt(){this.q=!0,this.U=!0}}class FE{constructor(e){this.et=e,this.nt=new Map,this.st=hs(),this.it=ec(),this.rt=new Sn(Nt)}ot(e){for(const t of e.$)e.O&&e.O.isFoundDocument()?this.ct(t,e.O):this.at(t,e.key,e.O);for(const t of e.removedTargetIds)this.at(t,e.key,e.O)}ut(e){this.forEachTarget(e,t=>{const r=this.ht(t);switch(e.state){case 0:this.lt(t)&&r.W(e.resumeToken);break;case 1:r.Z(),r.K||r.H(),r.W(e.resumeToken);break;case 2:r.Z(),r.K||this.removeTarget(t);break;case 3:this.lt(t)&&(r.tt(),r.W(e.resumeToken));break;case 4:this.lt(t)&&(this.ft(t),r.W(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((r,o)=>{this.lt(o)&&t(o)})}dt(e){const t=e.targetId,r=e.M.count,o=this.wt(t);if(o){const l=o.target;if(Mg(l))if(0===r){const h=new Je(l.path);this.at(t,h,gn.newNoDocument(h,vt.min()))}else mt(1===r);else this._t(t)!==r&&(this.ft(t),this.rt=this.rt.add(t))}}gt(e){const t=new Map;this.nt.forEach((l,h)=>{const y=this.wt(h);if(y){if(l.current&&Mg(y.target)){const I=new Je(y.target.path);null!==this.st.get(I)||this.yt(h,I)||this.at(h,I,gn.newNoDocument(I,e))}l.j&&(t.set(h,l.G()),l.H())}});let r=Yt();this.it.forEach((l,h)=>{let y=!0;h.forEachWhile(I=>{const A=this.wt(I);return!A||2===A.purpose||(y=!1,!1)}),y&&(r=r.add(l))});const o=new Hd(e,t,this.rt,this.st,r);return this.st=hs(),this.it=ec(),this.rt=new Sn(Nt),o}ct(e,t){if(!this.lt(e))return;const r=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,r),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}at(e,t,r){if(!this.lt(e))return;const o=this.ht(e);this.yt(e,t)?o.J(t,1):o.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),r&&(this.st=this.st.insert(t,r))}removeTarget(e){this.nt.delete(e)}_t(e){const t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}X(e){this.ht(e).X()}ht(e){let t=this.nt.get(e);return t||(t=new y_,this.nt.set(e,t)),t}Tt(e){let t=this.it.get(e);return t||(t=new Sn(Nt),this.it=this.it.insert(e,t)),t}lt(e){const t=null!==this.wt(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}ft(e){this.nt.set(e,new y_),this.et.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}yt(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}function ec(){return new Yn(Je.comparator)}function LE(){return new Yn(Je.comparator)}const kD={asc:"ASCENDING",desc:"DESCENDING"},VE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class FD{constructor(e,t){this.databaseId=e,this.C=t}}function Gd(n,e){return n.C?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function LD(n,e){return n.C?e.toBase64():e.toUint8Array()}function UE(n,e){return Gd(n,e.toTimestamp())}function nr(n){return mt(!!n),vt.fromTimestamp(function(e){const t=Pu(e);return new zr(t.seconds,t.nanos)}(n))}function js(n,e){return(t=n,new zt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function BE(n){const e=zt.fromString(n);return mt(D_(e)),e}function Vf(n,e){return js(n.databaseId,e.path)}function gr(n,e){const t=BE(e);if(t.get(1)!==n.databaseId.projectId)throw new Se(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Se(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Je(__(t))}function fs(n,e){return js(n.databaseId,e)}function $s(n){const e=BE(n);return 4===e.length?zt.emptyPath():__(e)}function qd(n){return new zt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function __(n){return mt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function jE(n,e,t){return{name:Vf(n,e),fields:t.value.mapValue.fields}}function $E(n,e,t){const r=gr(n,e.name),o=nr(e.updateTime),l=new Kr({mapValue:{fields:e.fields}}),h=gn.newFoundDocument(r,o,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function Wd(n,e){let t;if(e instanceof jd)t={update:jE(n,e.key,e.value)};else if(e instanceof $d)t={delete:Vf(n,e.key)};else if(e instanceof qo)t={update:jE(n,e.key,e.data),updateMask:KE(e.fieldMask)};else{if(!(e instanceof kf))return it();t={verify:Vf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const h=l.transform;if(h instanceof Hu)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Jl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof _o)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Gu)return{fieldPath:l.field.canonicalString(),increment:h.N};throw it()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:UE(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:it()),t;var o}function zd(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?pr.updateTime(nr(o.updateTime)):void 0!==o.exists?pr.exists(o.exists):pr.none():pr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(l,h){let y=null;"setToServerValue"in h?(mt("REQUEST_TIME"===h.setToServerValue),y=new Hu):"appendMissingElements"in h?y=new Jl(h.appendMissingElements.values||[]):"removeAllFromArray"in h?y=new _o(h.removeAllFromArray.values||[]):"increment"in h?y=new Gu(l,h.increment):it();const I=Zr.fromServerFormat(h.fieldPath);return new Xl(I,y)}(n,o)):[];var o;if(e.update){const o=gr(n,e.update.name),l=new Kr({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new Pd((e.updateMask.fieldPaths||[]).map(A=>Zr.fromServerFormat(A)));return new qo(o,l,h,t,r)}return new jd(o,l,t,r)}if(e.delete){const o=gr(n,e.delete);return new $d(o,t)}if(e.verify){const o=gr(n,e.verify);return new kf(o,t)}return it()}function v_(n,e){return{documents:[fs(n,e.path)]}}function HE(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=fs(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=fs(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(y){if(0===y.length)return;const I=y.map(A=>function(R){if("=="===R.op){if(Xy(R.value))return{unaryFilter:{field:qu(R.field),op:"IS_NAN"}};if(Yl(R.value))return{unaryFilter:{field:qu(R.field),op:"IS_NULL"}}}else if("!="===R.op){if(Xy(R.value))return{unaryFilter:{field:qu(R.field),op:"IS_NOT_NAN"}};if(Yl(R.value))return{unaryFilter:{field:qu(R.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qu(R.field),op:I_(R.op),value:R.value}}}(A));return 1===I.length?I[0]:{compositeFilter:{op:"AND",filters:I}}}(e.filters);o&&(t.structuredQuery.where=o);const l=function(y){if(0!==y.length)return y.map(I=>{return{field:qu((A=I).field),direction:WE(A.dir)};var A})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const h=(I=e.limit,n.C||mo(I)?I:{value:I});var I;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=qE(e.startAt)),e.endAt&&(t.structuredQuery.endAt=qE(e.endAt)),t}function E_(n){let e=$s(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){mt(1===r);const R=t.from[0];R.allDescendants?o=R.collectionId:e=e.child(R.collectionId)}let l=[];t.where&&(l=Uf(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(R=>{return new Bu(tc((N=R).field),function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let y=null;t.limit&&(y=function(R){let N;return N="object"==typeof R?R.value:R,mo(N)?null:N}(t.limit));let I=null;t.startAt&&(I=w_(t.startAt));let A=null;return t.endAt&&(A=w_(t.endAt)),EE(e,o,h,l,y,"F",I,A)}function Uf(n){return n?void 0!==n.unaryFilter?[ZE(n)]:void 0!==n.fieldFilter?[zE(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Uf(e)).reduce((e,t)=>e.concat(t)):it():[]}function qE(n){return{before:n.before,values:n.position}}function w_(n){return new Mf(n.values||[],!!n.before)}function WE(n){return kD[n]}function I_(n){return VE[n]}function qu(n){return{fieldPath:n.canonicalString()}}function tc(n){return Zr.fromServerFormat(n.fieldPath)}function zE(n){return vi.create(tc(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(n.fieldFilter.op),n.fieldFilter.value)}function ZE(n){switch(n.unaryFilter.op){case"IS_NAN":const e=tc(n.unaryFilter.field);return vi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=tc(n.unaryFilter.field);return vi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=tc(n.unaryFilter.field);return vi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=tc(n.unaryFilter.field);return vi.create(o,"!=",{nullValue:"NULL_VALUE"});default:return it()}}function KE(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function D_(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Hs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=C_(e)),e=YE(n.get(t),e);return C_(e)}function YE(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const l=n.charAt(o);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function C_(n){return n+"\x01\x01"}function Ba(n){const e=n.length;if(mt(e>=2),2===e)return mt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),zt.emptyPath();const t=e-2,r=[];let o="";for(let l=0;l<e;){const h=n.indexOf("\x01",l);switch((h<0||h>t)&&it(),n.charAt(h+1)){case"\x01":const y=n.substring(l,h);let I;0===o.length?I=y:(o+=y,I=o,o=""),r.push(I);break;case"\x10":o+=n.substring(l,h),o+="\0";break;case"\x11":o+=n.substring(l,h+1);break;default:it()}l=h+2}return new zt(r)}class jD{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class ps{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}ps.store="owner",ps.key="owner";class Wu{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}Wu.store="mutationQueues",Wu.keyPath="userId";class mn{constructor(e,t,r,o,l){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=o,this.mutations=l}}mn.store="mutations",mn.keyPath="batchId",mn.userMutationsIndex="userMutationsIndex",mn.userMutationsKeyPath=["userId","batchId"];class ci{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,Hs(t)]}static key(e,t,r){return[e,Hs(t),r]}}ci.store="documentMutations",ci.PLACEHOLDER=new ci;class $D{constructor(e,t){this.path=e,this.readTime=t}}class HD{constructor(e,t){this.path=e,this.version=t}}class $n{constructor(e,t,r,o,l,h){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=o,this.readTime=l,this.parentPath=h}}$n.store="remoteDocuments",$n.readTimeIndex="readTimeIndex",$n.readTimeIndexPath="readTime",$n.collectionReadTimeIndex="collectionReadTimeIndex",$n.collectionReadTimeIndexPath=["parentPath","readTime"];class Wo{constructor(e){this.byteSize=e}}Wo.store="remoteDocumentGlobal",Wo.key="remoteDocumentGlobalKey";class Vi{constructor(e,t,r,o,l,h,y){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=o,this.lastListenSequenceNumber=l,this.lastLimboFreeSnapshotVersion=h,this.query=y}}Vi.store="targets",Vi.keyPath="targetId",Vi.queryTargetsIndexName="queryTargetsIndex",Vi.queryTargetsKeyPath=["canonicalId","targetId"];class Yr{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}Yr.store="targetDocuments",Yr.keyPath=["targetId","path"],Yr.documentTargetsIndex="documentTargetsIndex",Yr.documentTargetsKeyPath=["path","targetId"];class gs{constructor(e,t,r,o){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=o}}gs.key="targetGlobalKey",gs.store="targetGlobal";class nc{constructor(e,t){this.collectionId=e,this.parent=t}}nc.store="collectionParents",nc.keyPath=["collectionId","parent"];class ja{constructor(e,t,r,o){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=o}}ja.store="clientMetadata",ja.keyPath="clientId";class Zd{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}Zd.store="bundles",Zd.keyPath="bundleId";class Kd{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}Kd.store="namedQueries",Kd.keyPath="name";const GD=[Wu.store,mn.store,ci.store,$n.store,Vi.store,ps.store,gs.store,Yr.store,ja.store,Wo.store,nc.store,Zd.store,Kd.store],b_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class T_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new be((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof be?t:be.resolve(t)}catch(t){return be.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):be.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):be.reject(t)}static resolve(e){return new be((t,r)=>{t(e)})}static reject(e){return new be((t,r)=>{r(e)})}static waitFor(e){return new be((t,r)=>{let o=0,l=0,h=!1;e.forEach(y=>{++o,y.next(()=>{++l,h&&l===o&&t()},I=>r(I))}),h=!0,l===o&&t()})}static or(e){let t=be.resolve(!1);for(const r of e)t=t.next(o=>o?be.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,l)=>{r.push(t.call(this,o,l))}),this.waitFor(r)}}class Bf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.It=new Sr,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{t.error?this.It.reject(new Yd(e,t.error)):this.It.resolve()},this.transaction.onerror=r=>{const o=$a(r.target.error);this.It.reject(new Yd(e,o))}}static open(e,t,r,o){try{return new Bf(t,e.transaction(o,r))}catch(l){throw new Yd(t,l)}}get At(){return this.It.promise}abort(e){e&&this.It.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new JE(t)}}class Gs{constructor(e,t,r){this.name=e,this.version=t,this.Rt=r,12.2===Gs.bt((0,Dt.z$)())&&Kn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),Zu(window.indexedDB.deleteDatabase(e)).toPromise()}static Pt(){if(!(0,Dt.hl)())return!1;if(Gs.vt())return!0;const e=(0,Dt.z$)(),t=Gs.bt(e),r=0<t&&t<10,o=Gs.Vt(e),l=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static vt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.St)}static Dt(e,t){return e.store(t)}static bt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Vt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Ct(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=h=>{r(h.target.result)},l.onblocked=()=>{o(new Yd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=h=>{const y=h.target.error;o("VersionError"===y.name?new Se(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===y.name?new Se(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+y):new Yd(e,y))},l.onupgradeneeded=h=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.Rt.Nt(h.target.result,l.transaction,h.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.kt&&(t.db.onversionchange=r=>t.kt(r)),t.db})()}xt(e){this.kt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var l=this;return(0,_e.Z)(function*(){const h="readonly"===t;let y=0;for(;;){++y;try{l.db=yield l.Ct(e);const I=Bf.open(l.db,e,h?"readonly":"readwrite",r),A=o(I).catch(R=>(I.abort(R),be.reject(R))).toPromise();return A.catch(()=>{}),yield I.At,A}catch(I){const A="FirebaseError"!==I.name&&y<3;if(Pe("SimpleDb","Transaction failed with error:",I.message,"Retrying:",A),l.close(),!A)return Promise.reject(I)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class QE{constructor(e){this.$t=e,this.Ot=!1,this.Mt=null}get isDone(){return this.Ot}get Ft(){return this.Mt}set cursor(e){this.$t=e}done(){this.Ot=!0}Lt(e){this.Mt=e}delete(){return Zu(this.$t.delete())}}class Yd extends Se{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function zu(n){return"IndexedDbTransactionError"===n.name}class JE{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Zu(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),Zu(this.store.add(e))}get(e){return Zu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),Zu(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),Zu(this.store.count())}Bt(e,t){const r=this.cursor(this.options(e,t)),o=[];return this.Ut(r,(l,h)=>{o.push(h)}).next(()=>o)}qt(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Kt=!1;const o=this.cursor(r);return this.Ut(o,(l,h,y)=>y.delete())}jt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Ut(o,t)}Qt(e){const t=this.cursor({});return new be((r,o)=>{t.onerror=l=>{const h=$a(l.target.error);o(h)},t.onsuccess=l=>{const h=l.target.result;h?e(h.primaryKey,h.value).next(y=>{y?h.continue():r()}):r()}})}Ut(e,t){const r=[];return new be((o,l)=>{e.onerror=h=>{l(h.target.error)},e.onsuccess=h=>{const y=h.target.result;if(!y)return void o();const I=new QE(y),A=t(y.primaryKey,y.value,I);if(A instanceof be){const R=A.catch(N=>(I.done(),be.reject(N)));r.push(R)}I.isDone?o():null===I.Ft?y.continue():y.continue(I.Ft)}}).next(()=>be.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Kt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Zu(n){return new be((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=$a(r.target.error);t(o)}})}let A_=!1;function $a(n){const e=Gs.bt((0,Dt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return A_||(A_=!0,setTimeout(()=>{throw r},0)),r}}return n}class XE extends T_{constructor(e,t){super(),this.Wt=e,this.currentSequenceNumber=t}}function Ui(n,e){const t=$e(n);return Gs.Dt(t.Wt,e)}class Ku{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&AE(l,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&c_(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&c_(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(vt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yt())}isEqual(e){return this.batchId===e.batchId&&zl(this.mutations,e.mutations,(t,r)=>Pg(t,r))&&zl(this.baseMutations,e.baseMutations,(t,r)=>Pg(t,r))}}class ew{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){mt(e.mutations.length===r.length);let o=PE();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,r[h].version);return new ew(e,t,r,o)}}class zo{constructor(e,t,r,o,l=vt.min(),h=vt.min(),y=Bn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=y}withSequenceNumber(e){return new zo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new zo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new zo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class qD{constructor(e){this.Gt=e}}function Lg(n,e){if(e.document)return $E(n.Gt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=Je.fromSegments(e.noDocument.path),r=Jd(e.noDocument.readTime),o=gn.newNoDocument(t,r);return e.hasCommittedMutations?o.setHasCommittedMutations():o}if(e.unknownDocument){const t=Je.fromSegments(e.unknownDocument.path),r=Jd(e.unknownDocument.version);return gn.newUnknownDocument(t,r)}return it()}function S_(n,e,t){const r=tw(t),o=e.key.path.popLast().toArray();if(e.isFoundDocument()){const l={name:Vf(y=n.Gt,(I=e).key),fields:I.data.value.mapValue.fields,updateTime:Gd(y,I.version.toTimestamp())};return new $n(null,null,l,e.hasCommittedMutations,r,o)}var y,I;if(e.isNoDocument()){const l=e.key.path.toArray(),h=Qd(e.version),y=e.hasCommittedMutations;return new $n(null,new $D(l,h),null,y,r,o)}if(e.isUnknownDocument()){const l=e.key.path.toArray(),h=Qd(e.version);return new $n(new HD(l,h),null,null,!0,r,o)}return it()}function tw(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function dt(n){const e=new zr(n[0],n[1]);return vt.fromTimestamp(e)}function Qd(n){const e=n.toTimestamp();return new jD(e.seconds,e.nanoseconds)}function Jd(n){const e=new zr(n.seconds,n.nanoseconds);return vt.fromTimestamp(e)}function Xd(n,e){const t=(e.baseMutations||[]).map(l=>zd(n.Gt,l));for(let l=0;l<e.mutations.length-1;++l){const h=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(h.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const r=e.mutations.map(l=>zd(n.Gt,l)),o=zr.fromMillis(e.localWriteTimeMs);return new Ku(e.batchId,o,t,r)}function Yu(n){const e=Jd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Jd(n.lastLimboFreeSnapshotVersion):vt.min();let r;var o;return void 0!==n.query.documents?(mt(1===(o=n.query).documents.length),r=ds(Ql($s(o.documents[0])))):r=ds(E_(n.query)),new zo(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Bn.fromBase64String(n.resumeToken))}function nw(n,e){const t=Qd(e.snapshotVersion),r=Qd(e.lastLimboFreeSnapshotVersion);let o;o=Mg(e.target)?v_(n.Gt,e.target):HE(n.Gt,e.target);const l=e.resumeToken.toBase64();return new Vi(e.targetId,Vd(e.target),t,l,e.sequenceNumber,r,o)}function eh(n){const e=E_({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?xf(e,e.limit,"L"):e}class Vg{getBundleMetadata(e,t){return Mn(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Jd(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return Mn(e).put({bundleId:(r=t).id,createTime:Qd(nr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return WD(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:eh(o.bundledQuery),readTime:Jd(o.readTime)};var o})}saveNamedQuery(e,t){return WD(e).put({name:(r=t).name,readTime:Qd(nr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Mn(n){return Ui(n,Zd.store)}function WD(n){return Ui(n,Kd.store)}class rw{constructor(){this.zt=new M_}addToCollectionParentIndex(e,t){return this.zt.add(t),be.resolve()}getCollectionParents(e,t){return be.resolve(this.zt.getEntries(t))}}class M_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Sn(zt.comparator),l=!o.has(r);return this.index[t]=o.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Sn(zt.comparator)).toArray()}}class zD{constructor(){this.Ht=new M_}addToCollectionParentIndex(e,t){if(!this.Ht.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ht.add(t)});const l={collectionId:r,parent:Hs(o)};return x_(e).put(l)}return be.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[pE(t),""],!1,!0);return x_(e).Bt(o).next(l=>{for(const h of l){if(h.collectionId!==t)break;r.push(Ba(h.parent))}return r})}}function x_(n){return Ui(n,nc.store)}const R_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ei{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ei(e,Ei.DEFAULT_COLLECTION_PERCENTILE,Ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function N_(n,e,t){const r=n.store(mn.store),o=n.store(ci.store),l=[],h=IDBKeyRange.only(t.batchId);let y=0;const I=r.jt({range:h},(R,N,G)=>(y++,G.delete()));l.push(I.next(()=>{mt(1===y)}));const A=[];for(const R of t.mutations){const N=ci.key(e,R.key.path,t.batchId);l.push(o.delete(N)),A.push(R.key)}return be.waitFor(l).next(()=>A)}function Ug(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}Ei.DEFAULT_COLLECTION_PERCENTILE=10,Ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ei.DEFAULT=new Ei(41943040,Ei.DEFAULT_COLLECTION_PERCENTILE,Ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ei.DISABLED=new Ei(-1,0,0);class O_{constructor(e,t,r,o){this.userId=e,this.k=t,this.Jt=r,this.referenceDelegate=o,this.Yt={}}static Xt(e,t,r,o){mt(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new O_(l,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qs(e).jt({index:mn.userMutationsIndex,range:r},(o,l,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const l=th(e),h=qs(e);return h.add({}).next(y=>{mt("number"==typeof y);const I=new Ku(y,t,r,o),A=function(G,Q,Ie){const He=Ie.baseMutations.map(Pt=>Wd(G.Gt,Pt)),Xe=Ie.mutations.map(Pt=>Wd(G.Gt,Pt));return new mn(Q,Ie.batchId,Ie.localWriteTime.toMillis(),He,Xe)}(this.k,this.userId,I),R=[];let N=new Sn((G,Q)=>Nt(G.canonicalString(),Q.canonicalString()));for(const G of o){const Q=ci.key(this.userId,G.key.path,y);N=N.add(G.key.path.popLast()),R.push(h.put(A)),R.push(l.put(Q,ci.PLACEHOLDER))}return N.forEach(G=>{R.push(this.Jt.addToCollectionParentIndex(e,G))}),e.addOnCommittedListener(()=>{this.Yt[y]=I.keys()}),be.waitFor(R).next(()=>I)})}lookupMutationBatch(e,t){return qs(e).get(t).next(r=>r?(mt(r.userId===this.userId),Xd(this.k,r)):null)}Zt(e,t){return this.Yt[t]?be.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.Yt[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return qs(e).jt({index:mn.userMutationsIndex,range:o},(h,y,I)=>{y.userId===this.userId&&(mt(y.batchId>=r),l=Xd(this.k,y)),I.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return qs(e).jt({index:mn.userMutationsIndex,range:t,reverse:!0},(o,l,h)=>{r=l.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qs(e).Bt(mn.userMutationsIndex,t).next(r=>r.map(o=>Xd(this.k,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ci.prefixForPath(this.userId,t.path),o=IDBKeyRange.lowerBound(r),l=[];return th(e).jt({range:o},(h,y,I)=>{const[A,R,N]=h,G=Ba(R);if(A===this.userId&&t.path.isEqual(G))return qs(e).get(N).next(Q=>{if(!Q)throw it();mt(Q.userId===this.userId),l.push(Xd(this.k,Q))});I.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Sn(Nt);const o=[];return t.forEach(l=>{const h=ci.prefixForPath(this.userId,l.path),y=IDBKeyRange.lowerBound(h),I=th(e).jt({range:y},(A,R,N)=>{const[G,Q,Ie]=A,He=Ba(Q);G===this.userId&&l.path.isEqual(He)?r=r.add(Ie):N.done()});o.push(I)}),be.waitFor(o).next(()=>this.te(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,l=ci.prefixForPath(this.userId,r),h=IDBKeyRange.lowerBound(l);let y=new Sn(Nt);return th(e).jt({range:h},(I,A,R)=>{const[N,G,Q]=I,Ie=Ba(G);N===this.userId&&r.isPrefixOf(Ie)?Ie.length===o&&(y=y.add(Q)):R.done()}).next(()=>this.te(e,y))}te(e,t){const r=[],o=[];return t.forEach(l=>{o.push(qs(e).get(l).next(h=>{if(null===h)throw it();mt(h.userId===this.userId),r.push(Xd(this.k,h))}))}),be.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return N_(e.Wt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.ee(t.batchId)}),be.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}ee(e){delete this.Yt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return be.resolve();const r=IDBKeyRange.lowerBound(ci.prefixForUser(this.userId)),o=[];return th(e).jt({range:r},(l,h,y)=>{if(l[0]===this.userId){const I=Ba(l[1]);o.push(I)}else y.done()}).next(()=>{mt(0===o.length)})})}containsKey(e,t){return iw(e,this.userId,t)}ne(e){return sw(e).get(this.userId).next(t=>t||new Wu(this.userId,-1,""))}}function iw(n,e,t){const r=ci.prefixForPath(e,t.path),o=r[1],l=IDBKeyRange.lowerBound(r);let h=!1;return th(n).jt({range:l,Kt:!0},(y,I,A)=>{const[R,N,G]=y;R===e&&N===o&&(h=!0),A.done()}).next(()=>h)}function qs(n){return Ui(n,mn.store)}function th(n){return Ui(n,ci.store)}function sw(n){return Ui(n,Wu.store)}class rc{constructor(e){this.se=e}next(){return this.se+=2,this.se}static ie(){return new rc(0)}static re(){return new rc(-1)}}class Bg{constructor(e,t){this.referenceDelegate=e,this.k=t}allocateTargetId(e){return this.oe(e).next(t=>{const r=new rc(t.highestTargetId);return t.highestTargetId=r.next(),this.ce(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.oe(e).next(t=>vt.fromTimestamp(new zr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.oe(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.oe(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.ce(e,o)))}addTargetData(e,t){return this.ae(e,t).next(()=>this.oe(e).next(r=>(r.targetCount+=1,this.ue(t,r),this.ce(e,r))))}updateTargetData(e,t){return this.ae(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ic(e).delete(t.targetId)).next(()=>this.oe(e)).next(r=>(mt(r.targetCount>0),r.targetCount-=1,this.ce(e,r)))}removeTargets(e,t,r){let o=0;const l=[];return ic(e).jt((h,y)=>{const I=Yu(y);I.sequenceNumber<=t&&null===r.get(I.targetId)&&(o++,l.push(this.removeTargetData(e,I)))}).next(()=>be.waitFor(l)).next(()=>o)}forEachTarget(e,t){return ic(e).jt((r,o)=>{const l=Yu(o);t(l)})}oe(e){return P_(e).get(gs.key).next(t=>(mt(null!==t),t))}ce(e,t){return P_(e).put(gs.key,t)}ae(e,t){return ic(e).put(nw(this.k,t))}ue(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.oe(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Vd(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return ic(e).jt({range:o,index:Vi.queryTargetsIndexName},(h,y,I)=>{const A=Yu(y);Sf(t,A.target)&&(l=A,I.done())}).next(()=>l)}addMatchingKeys(e,t,r){const o=[],l=Ha(e);return t.forEach(h=>{const y=Hs(h.path);o.push(l.put(new Yr(r,y))),o.push(this.referenceDelegate.addReference(e,r,h))}),be.waitFor(o)}removeMatchingKeys(e,t,r){const o=Ha(e);return be.forEach(t,l=>{const h=Hs(l.path);return be.waitFor([o.delete([r,h]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=Ha(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Ha(e);let l=Yt();return o.jt({range:r,Kt:!0},(h,y,I)=>{const A=Ba(h[1]),R=new Je(A);l=l.add(R)}).next(()=>l)}containsKey(e,t){const r=Hs(t.path),o=IDBKeyRange.bound([r],[pE(r)],!1,!0);let l=0;return Ha(e).jt({index:Yr.documentTargetsIndex,Kt:!0,range:o},([h,y],I,A)=>{0!==h&&(l++,A.done())}).next(()=>l>0)}Et(e,t){return ic(e).get(t).next(r=>r?Yu(r):null)}}function ic(n){return Ui(n,Vi.store)}function P_(n){return Ui(n,gs.store)}function Ha(n){return Ui(n,Yr.store)}function sc(n){return oc.apply(this,arguments)}function oc(){return oc=(0,_e.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==b_)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),oc.apply(this,arguments)}function nh([n,e],[t,r]){const o=Nt(n,t);return 0===o?Nt(e,r):o}class ZD{constructor(e){this.he=e,this.buffer=new Sn(nh),this.le=0}fe(){return++this.le}de(e){const t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();nh(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class KD{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.we=!1,this._e=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(e){var t=this;const r=this.we?3e5:6e4;Pe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,_e.Z)(function*(){t._e=null,t.we=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){zu(o)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield sc(o)}yield t.me(e)}))}}class YD{constructor(e,t){this.ge=e,this.params=t}calculateTargetCount(e,t){return this.ge.ye(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return be.resolve(Us.I);const r=new ZD(t);return this.ge.forEachTarget(e,o=>r.de(o.sequenceNumber)).next(()=>this.ge.pe(e,o=>r.de(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.ge.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.ge.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(R_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),R_):this.Te(e,t))}getCacheSize(e){return this.ge.getCacheSize(e)}Te(e,t){let r,o,l,h,y,I,A;const R=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,h=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,y=Date.now(),this.removeTargets(e,r,t))).next(N=>(l=N,I=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(A=Date.now(),bf()<=Ls.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-R}ms\n\tDetermined least recently used ${o} in `+(y-h)+`ms\n\tRemoved ${l} targets in `+(I-y)+`ms\n\tRemoved ${N} documents in `+(A-I)+`ms\nTotal Duration: ${A-R}ms`),be.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:N})))}}class ow{constructor(e,t){this.db=e,this.garbageCollector=new YD(this,t)}ye(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Ee(e){let t=0;return this.pe(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pe(e,t){return this.Ie(e,(r,o)=>t(o))}addReference(e,t,r){return jf(e,r)}removeReference(e,t,r){return jf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return jf(e,t)}Ae(e,t){return function(r,o){let l=!1;return sw(r).Qt(h=>iw(r,h,o).next(y=>(y&&(l=!0),be.resolve(!y)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let l=0;return this.Ie(e,(h,y)=>{if(y<=t){const I=this.Ae(e,h).next(A=>{if(!A)return l++,r.getEntry(e,h).next(()=>(r.removeEntry(h),Ha(e).delete([0,Hs(h.path)])))});o.push(I)}}).next(()=>be.waitFor(o)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return jf(e,t)}Ie(e,t){const r=Ha(e);let o,l=Us.I;return r.jt({index:Yr.documentTargetsIndex},([h,y],{path:I,sequenceNumber:A})=>{0===h?(l!==Us.I&&t(new Je(Ba(o)),l),l=A,o=I):l=Us.I}).next(()=>{l!==Us.I&&t(new Je(Ba(o)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function jf(n,e){return Ha(n).put((r=n.currentSequenceNumber,new Yr(0,Hs(e.path),r)));var r}class ac{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,l]of r)if(this.equalsFn(o,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0!==o){for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),!0;return!1}forEach(e){Zl(this.inner,(t,r)=>{for(const[o,l]of r)e(o,l)})}isEmpty(){return Ag(this.inner)}}class aw{constructor(){this.changes=new ac(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:vt.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:gn.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?be.resolve(r.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class uw{constructor(e,t){this.k=e,this.Jt=t}addEntry(e,t,r){return uc(e).put(k_(t),r)}removeEntry(e,t){const r=uc(e),o=k_(t);return r.delete(o)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Re(e,r)))}getEntry(e,t){return uc(e).get(k_(t)).next(r=>this.be(t,r))}Pe(e,t){return uc(e).get(k_(t)).next(r=>({document:this.be(t,r),size:Ug(r)}))}getEntries(e,t){let r=hs();return this.ve(e,t,(o,l)=>{const h=this.be(o,l);r=r.insert(o,h)}).next(()=>r)}Ve(e,t){let r=hs(),o=new Yn(Je.comparator);return this.ve(e,t,(l,h)=>{const y=this.be(l,h);r=r.insert(l,y),o=o.insert(l,Ug(h))}).next(()=>({documents:r,Se:o}))}ve(e,t,r){if(t.isEmpty())return be.resolve();const o=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),l=t.getIterator();let h=l.getNext();return uc(e).jt({range:o},(y,I,A)=>{const R=Je.fromSegments(y);for(;h&&Je.comparator(h,R)<0;)r(h,null),h=l.getNext();h&&h.isEqual(R)&&(r(h,I),h=l.hasNext()?l.getNext():null),h?A.Lt(h.path.toArray()):A.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r){let o=hs();const l=t.path.length+1,h={};if(r.isEqual(vt.min())){const y=t.path.toArray();h.range=IDBKeyRange.lowerBound(y)}else{const y=t.path.toArray(),I=tw(r);h.range=IDBKeyRange.lowerBound([y,I],!0),h.index=$n.collectionReadTimeIndex}return uc(e).jt(h,(y,I,A)=>{if(y.length!==l)return;const R=Lg(this.k,I);t.path.isPrefixOf(R.key.path)?Nf(t,R)&&(o=o.insert(R.key,R)):A.done()}).next(()=>o)}newChangeBuffer(e){return new QD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return lw(e).get(Wo.key).next(t=>(mt(!!t),t))}Re(e,t){return lw(e).put(Wo.key,t)}be(e,t){if(t){const r=Lg(this.k,t);if(!r.isNoDocument()||!r.version.isEqual(vt.min()))return r}return gn.newInvalidDocument(e)}}class QD extends aw{constructor(e,t){super(),this.De=e,this.trackRemovals=t,this.Ce=new ac(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Sn((l,h)=>Nt(l.canonicalString(),h.canonicalString()));return this.changes.forEach((l,h)=>{const y=this.Ce.get(l);if(h.document.isValidDocument()){const I=S_(this.De.k,h.document,this.getReadTime(l));o=o.add(l.path.popLast()),r+=Ug(I)-y,t.push(this.De.addEntry(e,l,I))}else if(r-=y,this.trackRemovals){const I=S_(this.De.k,gn.newNoDocument(l,vt.min()),this.getReadTime(l));t.push(this.De.addEntry(e,l,I))}else t.push(this.De.removeEntry(e,l))}),o.forEach(l=>{t.push(this.De.Jt.addToCollectionParentIndex(e,l))}),t.push(this.De.updateMetadata(e,r)),be.waitFor(t)}getFromCache(e,t){return this.De.Pe(e,t).next(r=>(this.Ce.set(t,r.size),r.document))}getAllFromCache(e,t){return this.De.Ve(e,t).next(({documents:r,Se:o})=>(o.forEach((l,h)=>{this.Ce.set(l,h)}),r))}}function lw(n){return Ui(n,Wo.store)}function uc(n){return Ui(n,$n.store)}function k_(n){return n.path.toArray()}class aT{constructor(e){this.k=e}Nt(e,t,r,o){mt(r<o&&r>=0&&o<=11);const l=new Bf("createOrUpgrade",t);var y;r<1&&o>=1&&(e.createObjectStore(ps.store),(y=e).createObjectStore(Wu.store,{keyPath:Wu.keyPath}),y.createObjectStore(mn.store,{keyPath:mn.keyPath,autoIncrement:!0}).createIndex(mn.userMutationsIndex,mn.userMutationsKeyPath,{unique:!0}),y.createObjectStore(ci.store),JD(e),function(y){y.createObjectStore($n.store)}(e));let h=be.resolve();return r<3&&o>=3&&(0!==r&&(function(y){y.deleteObjectStore(Yr.store),y.deleteObjectStore(Vi.store),y.deleteObjectStore(gs.store)}(e),JD(e)),h=h.next(()=>function(y){const I=y.store(gs.store),A=new gs(0,0,vt.min().toTimestamp(),0);return I.put(gs.key,A)}(l))),r<4&&o>=4&&(0!==r&&(h=h.next(()=>function(y,I){return I.store(mn.store).Bt().next(A=>{y.deleteObjectStore(mn.store),y.createObjectStore(mn.store,{keyPath:mn.keyPath,autoIncrement:!0}).createIndex(mn.userMutationsIndex,mn.userMutationsKeyPath,{unique:!0});const R=I.store(mn.store),N=A.map(G=>R.put(G));return be.waitFor(N)})}(e,l))),h=h.next(()=>{!function(y){y.createObjectStore(ja.store,{keyPath:ja.keyPath})}(e)})),r<5&&o>=5&&(h=h.next(()=>this.Ne(l))),r<6&&o>=6&&(h=h.next(()=>(function(y){y.createObjectStore(Wo.store)}(e),this.ke(l)))),r<7&&o>=7&&(h=h.next(()=>this.xe(l))),r<8&&o>=8&&(h=h.next(()=>this.$e(e,l))),r<9&&o>=9&&(h=h.next(()=>{(function(y){y.objectStoreNames.contains("remoteDocumentChanges")&&y.deleteObjectStore("remoteDocumentChanges")})(e),function(y){const I=y.objectStore($n.store);I.createIndex($n.readTimeIndex,$n.readTimeIndexPath,{unique:!1}),I.createIndex($n.collectionReadTimeIndex,$n.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&o>=10&&(h=h.next(()=>this.Oe(l))),r<11&&o>=11&&(h=h.next(()=>{(function(y){y.createObjectStore(Zd.store,{keyPath:Zd.keyPath})})(e),function(y){y.createObjectStore(Kd.store,{keyPath:Kd.keyPath})}(e)})),h}ke(e){let t=0;return e.store($n.store).jt((r,o)=>{t+=Ug(o)}).next(()=>{const r=new Wo(t);return e.store(Wo.store).put(Wo.key,r)})}Ne(e){const t=e.store(Wu.store),r=e.store(mn.store);return t.Bt().next(o=>be.forEach(o,l=>{const h=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.Bt(mn.userMutationsIndex,h).next(y=>be.forEach(y,I=>{mt(I.userId===l.userId);const A=Xd(this.k,I);return N_(e,l.userId,A).next(()=>{})}))}))}xe(e){const t=e.store(Yr.store),r=e.store($n.store);return e.store(gs.store).get(gs.key).next(o=>{const l=[];return r.jt((h,y)=>{const I=new zt(h),A=[0,Hs(I)];l.push(t.get(A).next(R=>R?be.resolve():t.put(new Yr(0,Hs(I),o.highestListenSequenceNumber))))}).next(()=>be.waitFor(l))})}$e(e,t){e.createObjectStore(nc.store,{keyPath:nc.keyPath});const r=t.store(nc.store),o=new M_,l=h=>{if(o.add(h)){const y=h.lastSegment(),I=h.popLast();return r.put({collectionId:y,parent:Hs(I)})}};return t.store($n.store).jt({Kt:!0},(h,y)=>{const I=new zt(h);return l(I.popLast())}).next(()=>t.store(ci.store).jt({Kt:!0},([h,y,I],A)=>{const R=Ba(y);return l(R.popLast())}))}Oe(e){const t=e.store(Vi.store);return t.jt((r,o)=>{const l=Yu(o),h=nw(this.k,l);return t.put(h)})}}function JD(n){n.createObjectStore(Yr.store,{keyPath:Yr.keyPath}).createIndex(Yr.documentTargetsIndex,Yr.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(Vi.store,{keyPath:Vi.keyPath}).createIndex(Vi.queryTargetsIndexName,Vi.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(gs.store)}const jg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class rh{constructor(e,t,r,o,l,h,y,I,A,R){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Me=l,this.window=h,this.document=y,this.Fe=A,this.Le=R,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=N=>Promise.resolve(),!rh.Pt())throw new Se(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ow(this,o),this.Ge=t+"main",this.k=new qD(I),this.ze=new Gs(this.Ge,11,new aT(this.k)),this.He=new Bg(this.referenceDelegate,this.k),this.Jt=new zD,this.Je=new uw(this.k,this.Jt),this.Ye=new Vg,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===R&&Kn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Se(de.FAILED_PRECONDITION,jg);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.He.getHighestSequenceNumber(e))}).then(e=>{this.Be=new Us(e,this.Fe)}).then(()=>{this.Ue=!0}).catch(e=>(this.ze&&this.ze.close(),Promise.reject(e)))}sn(e){var t=this;return this.We=function(){var r=(0,_e.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ze.xt(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Me.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.Ze())})))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>$g(e).put(new ja(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.rn(e).next(t=>{t||(this.isPrimary=!1,this.Me.enqueueRetryable(()=>this.We(!1)))})}).next(()=>this.on(e)).next(t=>this.isPrimary&&!t?this.cn(e).next(()=>!1):!!t&&this.an(e).next(()=>!0))).catch(e=>{if(zu(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Me.enqueueRetryable(()=>this.We(e)),this.isPrimary=e})}rn(e){return $f(e).get(ps.key).next(t=>be.resolve(this.un(t)))}hn(e){return $g(e).delete(this.clientId)}ln(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.fn(e.Qe,18e5)){e.Qe=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Ui(r,ja.store);return o.Bt().next(l=>{const h=e.dn(l,18e5),y=l.filter(I=>-1===h.indexOf(I));return be.forEach(y,I=>o.delete(I.clientId)).next(()=>y)})}).catch(()=>[]);if(e.Xe)for(const r of t)e.Xe.removeItem(e.wn(r.clientId))}})()}nn(){this.je=this.Me.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ze().then(()=>this.ln()).then(()=>this.nn()))}un(e){return!!e&&e.ownerId===this.clientId}on(e){return this.Le?be.resolve(!0):$f(e).get(ps.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)){if(this.un(t)&&this.networkEnabled)return!0;if(!this.un(t)){if(!t.allowTabSynchronization)throw new Se(de.FAILED_PRECONDITION,jg);return!1}}return!(!this.networkEnabled||!this.inForeground)||$g(e).Bt().next(r=>void 0===this.dn(r,5e3).find(o=>{if(this.clientId!==o.clientId){const h=!this.inForeground&&o.inForeground,y=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||h&&y)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.Ue=!1,e.mn(),e.je&&(e.je.cancel(),e.je=null),e.gn(),e.yn(),yield e.ze.runTransaction("shutdown","readwrite",[ps.store,ja.store],t=>{const r=new XE(t,Us.I);return e.cn(r).next(()=>e.hn(r))}),e.ze.close(),e.pn()})()}dn(e,t){return e.filter(r=>this.fn(r.updateTimeMs,t)&&!this._n(r.clientId))}Tn(){return this.runTransaction("getActiveClients","readonly",e=>$g(e).Bt().next(t=>this.dn(t,18e5).map(r=>r.clientId)))}get started(){return this.Ue}getMutationQueue(e){return O_.Xt(e,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(e,t,r){let l;return Pe("IndexedDbPersistence","Starting transaction:",e),this.ze.runTransaction(e,"readonly"===t?"readonly":"readwrite",GD,h=>(l=new XE(h,this.Be?this.Be.next():Us.I),"readwrite-primary"===t?this.rn(l).next(y=>!!y||this.on(l)).next(y=>{if(!y)throw Kn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Me.enqueueRetryable(()=>this.We(!1)),new Se(de.FAILED_PRECONDITION,b_);return r(l)}).next(y=>this.an(l).next(()=>y)):this.En(l).next(()=>r(l)))).then(h=>(l.raiseOnCommittedEvent(),h))}En(e){return $f(e).get(ps.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)&&!this.un(t)&&!(this.Le||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Se(de.FAILED_PRECONDITION,jg)})}an(e){const t=new ps(this.clientId,this.allowTabSynchronization,Date.now());return $f(e).put(ps.key,t)}static Pt(){return Gs.Pt()}cn(e){const t=$f(e);return t.get(ps.key).next(r=>this.un(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete(ps.key)):be.resolve())}fn(e,t){const r=Date.now();return!(e<r-t||e>r&&(Kn(`Detected an update time that is in the future: ${e} > ${r}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Me.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze()))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=()=>{this.mn(),(0,Dt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Me.enterRestrictedMode(!0),this.Me.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(e){var t;try{const r=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Kn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){Kn("Failed to set zombie client id.",e)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}wn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function $f(n){return Ui(n,ps.store)}function $g(n){return Ui(n,ja.store)}function Hg(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Hf{constructor(e,t){this.progress=e,this.In=t}}class cw{constructor(e,t,r){this.Je=e,this.An=t,this.Jt=r}Rn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.bn(e,t,r))}bn(e,t,r){return this.Je.getEntry(e,t).next(o=>{for(const l of r)l.applyToLocalView(o);return o})}Pn(e,t){e.forEach((r,o)=>{for(const l of t)l.applyToLocalView(o)})}vn(e,t){return this.Je.getEntries(e,t).next(r=>this.Vn(e,r).next(()=>r))}Vn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Pn(t,r))}getDocumentsMatchingQuery(e,t,r){return Je.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.Sn(e,t.path):Rg(t)?this.Dn(e,t,r):this.Cn(e,t,r);var o}Sn(e,t){return this.Rn(e,new Je(t)).next(r=>{let o=kg();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Dn(e,t,r){const o=t.collectionGroup;let l=kg();return this.Jt.getCollectionParents(e,o).next(h=>be.forEach(h,y=>{const I=(A=t,R=y.child(o),new ju(R,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt));var A,R;return this.Cn(e,I,r).next(A=>{A.forEach((R,N)=>{l=l.insert(R,N)})})}).next(()=>l))}Cn(e,t,r){let o,l;return this.Je.getDocumentsMatchingQuery(e,t,r).next(h=>(o=h,this.An.getAllMutationBatchesAffectingQuery(e,t))).next(h=>(l=h,this.Nn(e,l,o).next(y=>{o=y;for(const I of l)for(const A of I.mutations){const R=A.key;let N=o.get(R);null==N&&(N=gn.newInvalidDocument(R),o=o.insert(R,N)),c_(A,N,I.localWriteTime),N.isFoundDocument()||(o=o.remove(R))}}))).next(()=>(o.forEach((h,y)=>{Nf(t,y)||(o=o.remove(h))}),o))}Nn(e,t,r){let o=Yt();for(const h of t)for(const y of h.mutations)y instanceof qo&&null===r.get(y.key)&&(o=o.add(y.key));let l=r;return this.Je.getEntries(e,o).next(h=>(h.forEach((y,I)=>{I.isFoundDocument()&&(l=l.insert(y,I))}),l))}}class F_{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.kn=r,this.xn=o}static $n(e,t){let r=Yt(),o=Yt();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new F_(e,t.fromCache,r,o)}}class dw{On(e){this.Mn=e}getDocumentsMatchingQuery(e,t,r,o){return 0===(l=t).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||r.isEqual(vt.min())?this.Fn(e,t):this.Mn.vn(e,o).next(l=>{const h=this.Ln(t,l);return(n_(t)||xg(t))&&this.Bn(t.limitType,h,o,r)?this.Fn(e,t):(bf()<=Ls.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),s_(t)),this.Mn.getDocumentsMatchingQuery(e,t,r).next(y=>(h.forEach(I=>{y=y.insert(I.key,I)}),y)))});var l}Ln(e,t){let r=new Sn(wE(e));return t.forEach((o,l)=>{Nf(e,l)&&(r=r.add(l))}),r}Bn(e,t,r,o){if(r.size!==t.size)return!0;const l="F"===e?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Fn(e,t){return bf()<=Ls.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",s_(t)),this.Mn.getDocumentsMatchingQuery(e,t,vt.min())}}class XD{constructor(e,t,r,o){this.persistence=e,this.Un=t,this.k=o,this.qn=new Yn(Nt),this.Kn=new ac(l=>Vd(l),Sf),this.jn=vt.min(),this.An=e.getMutationQueue(r),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new cw(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.On(this.Wn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qn))}}function hw(n,e,t,r){return new XD(n,e,t,r)}function L_(n,e){return V_.apply(this,arguments)}function V_(){return V_=(0,_e.Z)(function*(n,e){const t=$e(n);let r=t.An,o=t.Wn;const l=yield t.persistence.runTransaction("Handle user change","readonly",h=>{let y;return t.An.getAllMutationBatches(h).next(I=>(y=I,r=t.persistence.getMutationQueue(e),o=new cw(t.Qn,r,t.persistence.getIndexManager()),r.getAllMutationBatches(h))).next(I=>{const A=[],R=[];let N=Yt();for(const G of y){A.push(G.batchId);for(const Q of G.mutations)N=N.add(Q.key)}for(const G of I){R.push(G.batchId);for(const Q of G.mutations)N=N.add(Q.key)}return o.vn(h,N).next(G=>({Gn:G,removedBatchIds:A,addedBatchIds:R}))})});return t.An=r,t.Wn=o,t.Un.On(t.Wn),l}),V_.apply(this,arguments)}function eC(n,e){const t=$e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),l=t.Qn.newChangeBuffer({trackRemovals:!0});return function(h,y,I,A){const R=I.batch,N=R.keys();let G=be.resolve();return N.forEach(Q=>{G=G.next(()=>A.getEntry(y,Q)).next(Ie=>{const He=I.docVersions.get(Q);mt(null!==He),Ie.version.compareTo(He)<0&&(R.applyToRemoteDocument(Ie,I),Ie.isValidDocument()&&A.addEntry(Ie,I.commitVersion))})}),G.next(()=>h.An.removeMutationBatch(y,R))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.An.performConsistencyCheck(r)).next(()=>t.Wn.vn(r,o))})}function lc(n){const e=$e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.He.getLastRemoteSnapshotVersion(t))}function tC(n,e){const t=$e(n),r=e.snapshotVersion;let o=t.qn;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.Qn.newChangeBuffer({trackRemovals:!0});o=t.qn;const y=[];e.targetChanges.forEach((A,R)=>{const N=o.get(R);if(!N)return;y.push(t.He.removeMatchingKeys(l,A.removedDocuments,R).next(()=>t.He.addMatchingKeys(l,A.addedDocuments,R)));let G=N.withSequenceNumber(l.currentSequenceNumber);var Q,Ie,He;e.targetMismatches.has(R)?G=G.withResumeToken(Bn.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):A.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(A.resumeToken,r)),o=o.insert(R,G),Ie=G,He=A,(0===(Q=N).resumeToken.approximateByteSize()||Ie.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=3e8||He.addedDocuments.size+He.modifiedDocuments.size+He.removedDocuments.size>0)&&y.push(t.He.updateTargetData(l,G))});let I=hs();if(e.documentUpdates.forEach((A,R)=>{e.resolvedLimboDocuments.has(A)&&y.push(t.persistence.referenceDelegate.updateLimboDocument(l,A))}),y.push(U_(l,h,e.documentUpdates,r,void 0).next(A=>{I=A})),!r.isEqual(vt.min())){const A=t.He.getLastRemoteSnapshotVersion(l).next(R=>t.He.setTargetsMetadata(l,l.currentSequenceNumber,r));y.push(A)}return be.waitFor(y).next(()=>h.apply(l)).next(()=>t.Wn.Vn(l,I)).next(()=>I)}).then(l=>(t.qn=o,l))}function U_(n,e,t,r,o){let l=Yt();return t.forEach(h=>l=l.add(h)),e.getEntries(n,l).next(h=>{let y=hs();return t.forEach((I,A)=>{const R=h.get(I),N=(null==o?void 0:o.get(I))||r;A.isNoDocument()&&A.version.isEqual(vt.min())?(e.removeEntry(I,N),y=y.insert(I,A)):!R.isValidDocument()||A.version.compareTo(R.version)>0||0===A.version.compareTo(R.version)&&R.hasPendingWrites?(e.addEntry(A,N),y=y.insert(I,A)):Pe("LocalStore","Ignoring outdated watch update for ",I,". Current version:",R.version," Watch version:",A.version)}),y})}function nC(n,e){const t=$e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.An.getNextMutationBatchAfterBatchId(r,e)))}function cc(n,e){const t=$e(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.He.getTargetData(r,e).next(l=>l?(o=l,be.resolve(o)):t.He.allocateTargetId(r).next(h=>(o=new zo(e,h,0,r.currentSequenceNumber),t.He.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.qn.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.qn=t.qn.insert(r.targetId,r),t.Kn.set(e,r.targetId)),r})}function ih(n,e,t){return Gg.apply(this,arguments)}function Gg(){return Gg=(0,_e.Z)(function*(n,e,t){const r=$e(n),o=r.qn.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!zu(h))throw h;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.qn=r.qn.remove(e),r.Kn.delete(o.target)}),Gg.apply(this,arguments)}function qg(n,e,t){const r=$e(n);let o=vt.min(),l=Yt();return r.persistence.runTransaction("Execute query","readonly",h=>function(y,I,A){const R=$e(y),N=R.Kn.get(A);return void 0!==N?be.resolve(R.qn.get(N)):R.He.getTargetData(I,A)}(r,h,ds(e)).next(y=>{if(y)return o=y.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(h,y.targetId).next(I=>{l=I})}).next(()=>r.Un.getDocumentsMatchingQuery(h,e,t?o:vt.min(),t?l:Yt())).next(y=>({documents:y,zn:l})))}function Wg(n,e){const t=$e(n),r=$e(t.He),o=t.qn.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",l=>r.Et(l,e).next(h=>h?h.target:null))}function fw(n){const e=$e(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,o,l){const h=$e(r);let y=hs(),I=tw(l);const A=uc(o),R=IDBKeyRange.lowerBound(I,!0);return A.jt({index:$n.readTimeIndex,range:R},(N,G)=>{const Q=Lg(h.k,G);y=y.insert(Q.key,Q),I=G.readTime}).next(()=>({In:y,readTime:dt(I)}))}(e.Qn,t,e.jn)).then(({In:t,readTime:r})=>(e.jn=r,t))}function zg(){return zg=(0,_e.Z)(function*(n){const e=$e(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const o=uc(r);let l=vt.min();return o.jt({index:$n.readTimeIndex,reverse:!0},(h,y,I)=>{y.readTime&&(l=dt(y.readTime)),I.done()}).next(()=>l)}(t)).then(t=>{e.jn=t})}),zg.apply(this,arguments)}function B_(){return B_=(0,_e.Z)(function*(n,e,t,r){const o=$e(n);let l=Yt(),h=hs(),y=PE();for(const R of t){const N=e.Hn(R.metadata.name);R.document&&(l=l.add(N)),h=h.insert(N,e.Jn(R)),y=y.insert(N,e.Yn(R.metadata.readTime))}const I=o.Qn.newChangeBuffer({trackRemovals:!0}),A=yield cc(o,(R=r,ds(Ql(zt.fromString(`__bundle__/docs/${R}`)))));var R;return o.persistence.runTransaction("Apply bundle documents","readwrite",R=>U_(R,I,h,vt.min(),y).next(N=>(I.apply(R),N)).next(N=>o.He.removeMatchingKeysForTargetId(R,A.targetId).next(()=>o.He.addMatchingKeys(R,l,A.targetId)).next(()=>o.Wn.Vn(R,N)).next(()=>N)))}),B_.apply(this,arguments)}function iC(n,e){return Gf.apply(this,arguments)}function Gf(){return Gf=(0,_e.Z)(function*(n,e,t=Yt()){const r=yield cc(n,ds(eh(e.bundledQuery))),o=$e(n);return o.persistence.runTransaction("Save named query","readwrite",l=>{const h=nr(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return o.Ye.saveNamedQuery(l,e);const y=r.withResumeToken(Bn.EMPTY_BYTE_STRING,h);return o.qn=o.qn.insert(y.targetId,y),o.He.updateTargetData(l,y).next(()=>o.He.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>o.He.addMatchingKeys(l,t,r.targetId)).next(()=>o.Ye.saveNamedQuery(l,e))})}),Gf.apply(this,arguments)}class sC{constructor(e){this.k=e,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(e,t){return be.resolve(this.Xn.get(t))}saveBundleMetadata(e,t){var r;return this.Xn.set(t.id,{id:(r=t).id,version:r.version,createTime:nr(r.createTime)}),be.resolve()}getNamedQuery(e,t){return be.resolve(this.Zn.get(t))}saveNamedQuery(e,t){return this.Zn.set(t.name,{name:(r=t).name,query:eh(r.bundledQuery),readTime:nr(r.readTime)}),be.resolve();var r}}class Zg{constructor(){this.ts=new Sn(Rr.es),this.ns=new Sn(Rr.ss)}isEmpty(){return this.ts.isEmpty()}addReference(e,t){const r=new Rr(e,t);this.ts=this.ts.add(r),this.ns=this.ns.add(r)}rs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.os(new Rr(e,t))}cs(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new Je(new zt([])),r=new Rr(t,e),o=new Rr(t,e+1),l=[];return this.ns.forEachInRange([r,o],h=>{this.os(h),l.push(h.key)}),l}hs(){this.ts.forEach(e=>this.os(e))}os(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}ls(e){const t=new Je(new zt([])),r=new Rr(t,e),o=new Rr(t,e+1);let l=Yt();return this.ns.forEachInRange([r,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new Rr(e,0),r=this.ts.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Rr{constructor(e,t){this.key=e,this.fs=t}static es(e,t){return Je.comparator(e.key,t.key)||Nt(e.fs,t.fs)}static ss(e,t){return Nt(e.fs,t.fs)||Je.comparator(e.key,t.key)}}class oC{constructor(e,t){this.Jt=e,this.referenceDelegate=t,this.An=[],this.ds=1,this.ws=new Sn(Rr.es)}checkEmpty(e){return be.resolve(0===this.An.length)}addMutationBatch(e,t,r,o){const l=this.ds;this.ds++;const h=new Ku(l,t,r,o);this.An.push(h);for(const y of o)this.ws=this.ws.add(new Rr(y.key,l)),this.Jt.addToCollectionParentIndex(e,y.key.path.popLast());return be.resolve(h)}lookupMutationBatch(e,t){return be.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.gs(t+1),l=o<0?0:o;return be.resolve(this.An.length>l?this.An[l]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(e){return be.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Rr(t,0),o=new Rr(t,Number.POSITIVE_INFINITY),l=[];return this.ws.forEachInRange([r,o],h=>{const y=this._s(h.fs);l.push(y)}),be.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Sn(Nt);return t.forEach(o=>{const l=new Rr(o,0),h=new Rr(o,Number.POSITIVE_INFINITY);this.ws.forEachInRange([l,h],y=>{r=r.add(y.fs)})}),be.resolve(this.ys(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let l=r;Je.isDocumentKey(l)||(l=l.child(""));const h=new Rr(new Je(l),0);let y=new Sn(Nt);return this.ws.forEachWhile(I=>{const A=I.key.path;return!!r.isPrefixOf(A)&&(A.length===o&&(y=y.add(I.fs)),!0)},h),be.resolve(this.ys(y))}ys(e){const t=[];return e.forEach(r=>{const o=this._s(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){mt(0===this.ps(t.batchId,"removed")),this.An.shift();let r=this.ws;return be.forEach(t.mutations,o=>{const l=new Rr(o.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ws=r})}ee(e){}containsKey(e,t){const r=new Rr(t,0),o=this.ws.firstAfterOrEqual(r);return be.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return be.resolve()}ps(e,t){return this.gs(e)}gs(e){return 0===this.An.length?0:e-this.An[0].batchId}_s(e){const t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}class aC{constructor(e,t){this.Jt=e,this.Ts=t,this.docs=new Yn(Je.comparator),this.size=0}addEntry(e,t,r){const o=t.key,l=this.docs.get(o),h=l?l.size:0,y=this.Ts(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:y,readTime:r}),this.size+=y-h,this.Jt.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return be.resolve(r?r.document.mutableCopy():gn.newInvalidDocument(t))}getEntries(e,t){let r=hs();return t.forEach(o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.mutableCopy():gn.newInvalidDocument(o))}),be.resolve(r)}getDocumentsMatchingQuery(e,t,r){let o=hs();const l=new Je(t.path.child("")),h=this.docs.getIteratorFrom(l);for(;h.hasNext();){const{key:y,value:{document:I,readTime:A}}=h.getNext();if(!t.path.isPrefixOf(y.path))break;A.compareTo(r)<=0||Nf(t,I)&&(o=o.insert(I.key,I.mutableCopy()))}return be.resolve(o)}Es(e,t){return be.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new uC(this)}getSize(e){return be.resolve(this.size)}}class uC extends aw{constructor(e){super(),this.De=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.document.isValidDocument()?t.push(this.De.addEntry(e,o.document,this.getReadTime(r))):this.De.removeEntry(r)}),be.waitFor(t)}getFromCache(e,t){return this.De.getEntry(e,t)}getAllFromCache(e,t){return this.De.getEntries(e,t)}}class lC{constructor(e){this.persistence=e,this.Is=new ac(t=>Vd(t),Sf),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.As=0,this.Rs=new Zg,this.targetCount=0,this.bs=rc.ie()}forEachTarget(e,t){return this.Is.forEach((r,o)=>t(o)),be.resolve()}getLastRemoteSnapshotVersion(e){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return be.resolve(this.As)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.As&&(this.As=t),be.resolve()}ae(e){this.Is.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.bs=new rc(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}addTargetData(e,t){return this.ae(t),this.targetCount+=1,be.resolve()}updateTargetData(e,t){return this.ae(t),be.resolve()}removeTargetData(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,be.resolve()}removeTargets(e,t,r){let o=0;const l=[];return this.Is.forEach((h,y)=>{y.sequenceNumber<=t&&null===r.get(y.targetId)&&(this.Is.delete(h),l.push(this.removeMatchingKeysForTargetId(e,y.targetId)),o++)}),be.waitFor(l).next(()=>o)}getTargetCount(e){return be.resolve(this.targetCount)}getTargetData(e,t){const r=this.Is.get(t)||null;return be.resolve(r)}addMatchingKeys(e,t,r){return this.Rs.rs(t,r),be.resolve()}removeMatchingKeys(e,t,r){this.Rs.cs(t,r);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),be.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Rs.us(t),be.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Rs.ls(t);return be.resolve(r)}containsKey(e,t){return be.resolve(this.Rs.containsKey(t))}}class cC{constructor(e,t){this.Ps={},this.Be=new Us(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new lC(this),this.Jt=new rw,this.Je=new aC(this.Jt,r=>this.referenceDelegate.vs(r)),this.k=new qD(t),this.Ye=new sC(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(e){let t=this.Ps[e.toKey()];return t||(t=new oC(this.Jt,this.referenceDelegate),this.Ps[e.toKey()]=t),t}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const o=new dC(this.Be.next());return this.referenceDelegate.Vs(),r(o).next(l=>this.referenceDelegate.Ss(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ds(e,t){return be.or(Object.values(this.Ps).map(r=>()=>r.containsKey(e,t)))}}class dC extends T_{constructor(e){super(),this.currentSequenceNumber=e}}class j_{constructor(e){this.persistence=e,this.Cs=new Zg,this.Ns=null}static ks(e){return new j_(e)}get xs(){if(this.Ns)return this.Ns;throw it()}addReference(e,t,r){return this.Cs.addReference(r,t),this.xs.delete(r.toString()),be.resolve()}removeReference(e,t,r){return this.Cs.removeReference(r,t),this.xs.add(r.toString()),be.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),be.resolve()}removeTarget(e,t){this.Cs.us(t.targetId).forEach(o=>this.xs.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.xs.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Vs(){this.Ns=new Set}Ss(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.xs,r=>{const o=Je.fromPath(r);return this.$s(e,o).next(l=>{l||t.removeEntry(o)})}).next(()=>(this.Ns=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.xs.delete(t.toString()):this.xs.add(t.toString())})}vs(e){return 0}$s(e,t){return be.or([()=>be.resolve(this.Cs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ds(e,t)])}}function $_(n,e){return`firestore_clients_${n}_${e}`}function H_(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function G_(n,e){return`firestore_targets_${n}_${e}`}class Kg{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Os(e,t,r){const o=JSON.parse(r);let l,h="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return h&&o.error&&(h="string"==typeof o.error.message&&"string"==typeof o.error.code,h&&(l=new Se(o.error.code,o.error.message))),h?new Kg(e,t,o.state,l):(Kn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ms(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sh{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Os(e,t){const r=JSON.parse(t);let o,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(o=new Se(r.error.code,r.error.message))),l?new sh(e,r.state,o):(Kn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Ms(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Os(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,l=jn();for(let h=0;o&&h<r.activeTargetIds.length;++h)o=ku(r.activeTargetIds[h]),l=l.add(r.activeTargetIds[h]);return o?new Yg(e,l):(Kn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class q_{constructor(e,t){this.clientId=e,this.onlineState=t}static Os(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new q_(t.clientId,t.onlineState):(Kn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class W_{constructor(){this.activeTargetIds=jn()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ls(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ms(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qf{constructor(e,t,r,o,l){this.window=e,this.Me=t,this.persistenceKey=r,this.Bs=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new Yn(Nt),this.started=!1,this.js=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Qs=$_(this.persistenceKey,this.Bs),this.Ws=`firestore_sequence_number_${this.persistenceKey}`,this.Ks=this.Ks.insert(this.Bs,new W_),this.Gs=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.Js=`firestore_online_state_${this.persistenceKey}`,this.Ys=function(y){return`firestore_bundle_loaded_${y}`}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static Pt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.Tn();for(const o of t){if(o===e.Bs)continue;const l=e.getItem($_(e.persistenceKey,o));if(l){const h=Yg.Os(o,l);h&&(e.Ks=e.Ks.insert(h.clientId,h))}}e.Xs();const r=e.storage.getItem(e.Js);if(r){const o=e.Zs(r);o&&e.ti(o)}for(const o of e.js)e.qs(o);e.js=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(e){let t=!1;return this.Ks.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ni(e,"pending")}updateMutationState(e,t,r){this.ni(e,t,r),this.si(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(G_(this.persistenceKey,e));if(r){const o=sh.Os(e,r);o&&(t=o.state)}}return this.ii.Fs(e),this.Xs(),t}removeLocalQueryTarget(e){this.ii.Ls(e),this.Xs()}isLocalQueryTarget(e){return this.ii.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(G_(this.persistenceKey,e))}updateQueryState(e,t,r){this.ri(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.si(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.oi(e)}notifyBundleLoaded(){this.ci()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}qs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Qs)return void Kn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Me.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.Gs.test(r.key)){if(null==r.newValue){const o=t.ai(r.key);return t.ui(o,null)}{const o=t.hi(r.key,r.newValue);if(o)return t.ui(o.clientId,o)}}else if(t.zs.test(r.key)){if(null!==r.newValue){const o=t.li(r.key,r.newValue);if(o)return t.fi(o)}}else if(t.Hs.test(r.key)){if(null!==r.newValue){const o=t.di(r.key,r.newValue);if(o)return t.wi(o)}}else if(r.key===t.Js){if(null!==r.newValue){const o=t.Zs(r.newValue);if(o)return t.ti(o)}}else if(r.key===t.Ws){const o=function(l){let h=Us.I;if(null!=l)try{const y=JSON.parse(l);mt("number"==typeof y),h=y}catch(y){Kn("SharedClientState","Failed to read sequence number from WebStorage",y)}return h}(r.newValue);o!==Us.I&&t.sequenceNumberHandler(o)}else if(r.key===t.Ys)return t.syncEngine._i()}else t.js.push(r)}))}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Ms())}ni(e,t,r){const o=new Kg(this.currentUser,e,t,r),l=H_(this.persistenceKey,this.currentUser,e);this.setItem(l,o.Ms())}si(e){const t=H_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}oi(e){this.storage.setItem(this.Js,JSON.stringify({clientId:this.Bs,onlineState:e}))}ri(e,t,r){const o=G_(this.persistenceKey,e),l=new sh(e,t,r);this.setItem(o,l.Ms())}ci(){this.setItem(this.Ys,"value-not-used")}ai(e){const t=this.Gs.exec(e);return t?t[1]:null}hi(e,t){const r=this.ai(e);return Yg.Os(r,t)}li(e,t){const r=this.zs.exec(e),o=Number(r[1]);return Kg.Os(new Wr(void 0!==r[2]?r[2]:null),o,t)}di(e,t){const r=this.Hs.exec(e),o=Number(r[1]);return sh.Os(o,t)}Zs(e){return q_.Os(e)}fi(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.mi(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}wi(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}ui(e,t){const r=t?this.Ks.insert(e,t):this.Ks.remove(e),o=this.ei(this.Ks),l=this.ei(r),h=[],y=[];return l.forEach(I=>{o.has(I)||h.push(I)}),o.forEach(I=>{l.has(I)||y.push(I)}),this.syncEngine.yi(h,y).then(()=>{this.Ks=r})}ti(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ei(e){let t=jn();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class Qg{constructor(){this.pi=new W_,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.pi.Fs(e),this.Ti[e]||"not-current"}updateQueryState(e,t,r){this.Ti[e]=t}removeLocalQueryTarget(e){this.pi.Ls(e)}isLocalQueryTarget(e){return this.pi.activeTargetIds.has(e)}clearQueryState(e){delete this.Ti[e]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(e){return this.pi.activeTargetIds.has(e)}start(){return this.pi=new W_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class gw{Ei(e){}shutdown(){}}class Jg{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.bi(),this.Pi=[],this.vi()}Ei(e){this.Pi.push(e)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Pi)e(0)}bi(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Pi)e(1)}static Pt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const hC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class fC{constructor(e){this.Vi=e.Vi,this.Si=e.Si}Di(e){this.Ci=e}Ni(e){this.ki=e}onMessage(e){this.xi=e}close(){this.Si()}send(e){this.Vi(e)}$i(){this.Ci()}Oi(e){this.ki(e)}Mi(e){this.xi(e)}}class z_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(e,t,r,o,l){const h=this.Ui(e,t);Pe("RestConnection","Sending: ",h,r);const y={};return this.qi(y,o,l),this.Ki(e,h,y,r).then(I=>(Pe("RestConnection","Received: ",I),I),I=>{throw Od("RestConnection",`${e} failed with error: `,I,"url: ",h,"request:",r),I})}ji(e,t,r,o,l){return this.Bi(e,t,r,o,l)}qi(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Nd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),r&&r.headers.forEach((o,l)=>e[l]=o)}Ui(e,t){return`${this.Fi}/v1/${t}:${hC[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Ki(e,t,r,o){return new Promise((l,h)=>{const y=new yD;y.listenOnce(Rd.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case bg.NO_ERROR:const A=y.getResponseJson();Pe("Connection","XHR received:",JSON.stringify(A)),l(A);break;case bg.TIMEOUT:Pe("Connection",'RPC "'+e+'" timed out'),h(new Se(de.DEADLINE_EXCEEDED,"Request time out"));break;case bg.HTTP_ERROR:const R=y.getStatus();if(Pe("Connection",'RPC "'+e+'" failed with status:',R,"response text:",y.getResponseText()),R>0){const N=y.getResponseJson().error;if(N&&N.status&&N.message){const G=function(Q){const Ie=Q.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(Ie)>=0?Ie:de.UNKNOWN}(N.status);h(new Se(G,N.message))}else h(new Se(de.UNKNOWN,"Server responded with status "+y.getStatus()))}else h(new Se(de.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{Pe("Connection",'RPC "'+e+'" completed.')}});const I=JSON.stringify(o);y.send(t,"POST",I,r,15)})}Qi(e,t,r){const o=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=pD(),h=gD(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(y.xmlHttpFactory=new mD({})),this.qi(y.initMessageHeaders,t,r),(0,Dt.uI)()||(0,Dt.b$)()||(0,Dt.d)()||(0,Dt.w1)()||(0,Dt.Mn)()||(0,Dt.ru)()||(y.httpHeadersOverwriteParam="$httpHeaders");const I=o.join("");Pe("Connection","Creating WebChannel: "+I,y);const A=l.createWebChannel(I,y);let R=!1,N=!1;const G=new fC({Vi:Ie=>{N?Pe("Connection","Not sending because WebChannel is closed:",Ie):(R||(Pe("Connection","Opening WebChannel transport."),A.open(),R=!0),Pe("Connection","WebChannel sending:",Ie),A.send(Ie))},Si:()=>A.close()}),Q=(Ie,He,Xe)=>{Ie.listen(He,Pt=>{try{Xe(Pt)}catch(Jt){setTimeout(()=>{throw Jt},0)}})};return Q(A,Va.EventType.OPEN,()=>{N||Pe("Connection","WebChannel transport opened.")}),Q(A,Va.EventType.CLOSE,()=>{N||(N=!0,Pe("Connection","WebChannel transport closed"),G.Oi())}),Q(A,Va.EventType.ERROR,Ie=>{N||(N=!0,Od("Connection","WebChannel transport errored:",Ie),G.Oi(new Se(de.UNAVAILABLE,"The operation could not be completed")))}),Q(A,Va.EventType.MESSAGE,Ie=>{var He;if(!N){const Xe=Ie.data[0];mt(!!Xe);const Pt=Xe,Jt=Pt.error||(null===(He=Pt[0])||void 0===He?void 0:He.error);if(Jt){Pe("Connection","WebChannel received error:",Jt);const Dn=Jt.status;let xt=function(Ja){const GI=tr[Ja];if(void 0!==GI)return p_(GI)}(Dn),xn=Jt.message;void 0===xt&&(xt=de.INTERNAL,xn="Unknown error status: "+Dn+" with message "+Jt.message),N=!0,G.Oi(new Se(xt,xn)),A.close()}else Pe("Connection","WebChannel received:",Xe),G.Mi(Xe)}}),Q(h,uE.STAT_EVENT,Ie=>{Ie.stat===lE.PROXY?Pe("Connection","Detected buffering proxy"):Ie.stat===lE.NOPROXY&&Pe("Connection","Detected no buffering proxy")}),setTimeout(()=>{G.$i()},0),G}}function mw(){return"undefined"!=typeof window?window:null}function Wf(){return"undefined"!=typeof document?document:null}function zf(n){return new FD(n,!0)}class Xg{constructor(e,t,r=1e3,o=1.5,l=6e4){this.Me=e,this.timerId=t,this.Wi=r,this.Gi=o,this.zi=l,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const t=Math.floor(this.Hi+this.tr()),r=Math.max(0,Date.now()-this.Yi),o=Math.max(0,t-r);o>0&&Pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Hi} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ji=this.Me.enqueueAfterDelay(this.timerId,o,()=>(this.Yi=Date.now(),e())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class yw{constructor(e,t,r,o,l,h,y,I){this.Me=e,this.nr=r,this.sr=o,this.ir=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=y,this.listener=I,this.state=0,this.rr=0,this.cr=null,this.ar=null,this.stream=null,this.ur=new Xg(e,t)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}stop(){var e=this;return(0,_e.Z)(function*(){e.hr()&&(yield e.close(0))})()}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.cr&&(this.cr=this.Me.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(e){this.yr(),this.stream.send(e)}mr(){var e=this;return(0,_e.Z)(function*(){if(e.lr())return e.close(0)})()}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}pr(){this.ar&&(this.ar.cancel(),this.ar=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.yr(),r.pr(),r.ur.cancel(),r.rr++,4!==e?r.ur.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(Kn(t.toString()),Kn("Using maximum backoff delay to prevent overloading the backend."),r.ur.Xi()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Tr(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ni(t)})()}Tr(){}auth(){this.state=1;const e=this.Er(this.rr),t=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.rr===t&&this.Ir(r,o)},r=>{e(()=>{const o=new Se(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ar(o)})})}Ir(e,t){const r=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di(()=>{r(()=>(this.state=2,this.ar=this.Me.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(o=>{r(()=>this.Ar(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}dr(){var e=this;this.state=5,this.ur.Zi((0,_e.Z)(function*(){e.state=0,e.start()}))}Ar(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Er(e){return t=>{this.Me.enqueueAndForget(()=>this.rr===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _w extends yw{constructor(e,t,r,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,h),this.k=l}Rr(e,t){return this.ir.Qi("Listen",e,t)}onMessage(e){this.ur.reset();const t=function UD(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(I=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===I?1:"REMOVE"===I?2:"CURRENT"===I?3:"RESET"===I?4:it(),o=e.targetChange.targetIds||[],l=function(I,A){return I.C?(mt(void 0===A||"string"==typeof A),Bn.fromBase64String(A||"")):(mt(void 0===A||A instanceof Uint8Array),Bn.fromUint8Array(A||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,y=h&&function(I){const A=void 0===I.code?de.UNKNOWN:p_(I.code);return new Se(A,I.message||"")}(h);t=new kE(r,o,l,y||null)}else if("documentChange"in e){const r=e.documentChange,o=gr(n,r.document.name),l=nr(r.document.updateTime),h=new Kr({mapValue:{fields:r.document.fields}}),y=gn.newFoundDocument(o,l,h);t=new Fg(r.targetIds||[],r.removedTargetIds||[],y.key,y)}else if("documentDelete"in e){const r=e.documentDelete,o=gr(n,r.document),l=r.readTime?nr(r.readTime):vt.min(),h=gn.newNoDocument(o,l);t=new Fg([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,o=gr(n,r.document);t=new Fg([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return it();{const r=e.filter,l=new xE(r.count||0);t=new m_(r.targetId,l)}}var I;return t}(this.k,e),r=function(o){if(!("targetChange"in o))return vt.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?vt.min():l.readTime?nr(l.readTime):vt.min()}(e);return this.listener.br(t,r)}Pr(e){const t={};t.database=qd(this.k),t.addTarget=function(o,l){let h;const y=l.target;return h=Mg(y)?{documents:v_(o,y)}:{query:HE(o,y)},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?h.resumeToken=LD(o,l.resumeToken):l.snapshotVersion.compareTo(vt.min())>0&&(h.readTime=Gd(o,l.snapshotVersion.toTimestamp())),h}(this.k,e);const r=function GE(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return it()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.gr(t)}vr(e){const t={};t.database=qd(this.k),t.removeTarget=e,this.gr(t)}}class uT extends yw{constructor(e,t,r,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,h),this.k=l,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(e,t){return this.ir.Qi("Write",e,t)}onMessage(e){if(mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();const t=function BD(n,e){return n&&n.length>0?(mt(void 0!==e),n.map(t=>function(r,o){let l=nr(r.updateTime?r.updateTime:o);return l.isEqual(vt.min())&&(l=nr(o)),new TE(l,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=nr(e.commitTime);return this.listener.Cr(r,t)}return mt(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const e={};e.database=qd(this.k),this.gr(e)}Dr(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Wd(this.k,r))};this.gr(t)}}class pC extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.ir=r,this.k=o,this.$r=!1}Or(){if(this.$r)throw new Se(de.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(e,t,r){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.ir.Bi(e,t,r,o,l)).catch(o=>{throw"FirebaseError"===o.name?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Se(de.UNKNOWN,o.toString())})}ji(e,t,r){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.ir.ji(e,t,r,o,l)).catch(o=>{throw"FirebaseError"===o.name?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Se(de.UNKNOWN,o.toString())})}terminate(){this.$r=!0}}class Zf{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Mr=0,this.Fr=null,this.Lr=!0}Br(){0===this.Mr&&(this.Ur("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Fr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(e){"Online"===this.state?this.Ur("Unknown"):(this.Mr++,this.Mr>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Ur("Offline")))}set(e){this.jr(),this.Mr=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}Ur(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}qr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(Kn(t),this.Lr=!1):Pe("OnlineStateTracker",t)}jr(){null!==this.Fr&&(this.Fr.cancel(),this.Fr=null)}}class gC{constructor(e,t,r,o,l){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=l,this.Hr.Ei(y=>{r.enqueueAndForget((0,_e.Z)(function*(){var I;Ga(h)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(I=(0,_e.Z)(function*(A){const R=$e(A);R.Gr.add(4),yield oh(R),R.Jr.set("Unknown"),R.Gr.delete(4),yield Zo(R)}),function(A){return I.apply(this,arguments)})(h))}))}),this.Jr=new Zf(r,o)}}function Zo(n){return dc.apply(this,arguments)}function dc(){return dc=(0,_e.Z)(function*(n){if(Ga(n))for(const e of n.zr)yield e(!0)}),dc.apply(this,arguments)}function oh(n){return vw.apply(this,arguments)}function vw(){return vw=(0,_e.Z)(function*(n){for(const e of n.zr)yield e(!1)}),vw.apply(this,arguments)}function Kf(n,e){const t=$e(n);t.Wr.has(e.targetId)||(t.Wr.set(e.targetId,e),em(t)?K_(t):lh(t).lr()&&Z_(t,e))}function Yf(n,e){const t=$e(n),r=lh(t);t.Wr.delete(e),r.lr()&&Ew(t,e),0===t.Wr.size&&(r.lr()?r._r():Ga(t)&&t.Jr.set("Unknown"))}function Z_(n,e){n.Yr.X(e.targetId),lh(n).Pr(e)}function Ew(n,e){n.Yr.X(e),lh(n).vr(e)}function K_(n){n.Yr=new FE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Wr.get(e)||null}),lh(n).start(),n.Jr.Br()}function em(n){return Ga(n)&&!lh(n).hr()&&n.Wr.size>0}function Ga(n){return 0===$e(n).Gr.size}function tm(n){n.Yr=void 0}function nm(n){return hc.apply(this,arguments)}function hc(){return hc=(0,_e.Z)(function*(n){n.Wr.forEach((e,t)=>{Z_(n,e)})}),hc.apply(this,arguments)}function mC(n,e){return rm.apply(this,arguments)}function rm(){return rm=(0,_e.Z)(function*(n,e){tm(n),em(n)?(n.Jr.Kr(e),K_(n)):n.Jr.set("Unknown")}),rm.apply(this,arguments)}function ww(n,e,t){return Y_.apply(this,arguments)}function Y_(){return Y_=(0,_e.Z)(function*(n,e,t){if(n.Jr.set("Online"),e instanceof kE&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(o,l){const h=l.cause;for(const y of l.targetIds)o.Wr.has(y)&&(yield o.remoteSyncer.rejectListen(y,h),o.Wr.delete(y),o.Yr.removeTarget(y))}),function(o,l){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield im(n,r)}else if(e instanceof Fg?n.Yr.ot(e):e instanceof m_?n.Yr.dt(e):n.Yr.ut(e),!t.isEqual(vt.min()))try{const r=yield lc(n.localStore);t.compareTo(r)>=0&&(yield function(o,l){const h=o.Yr.gt(l);return h.targetChanges.forEach((y,I)=>{if(y.resumeToken.approximateByteSize()>0){const A=o.Wr.get(I);A&&o.Wr.set(I,A.withResumeToken(y.resumeToken,l))}}),h.targetMismatches.forEach(y=>{const I=o.Wr.get(y);if(!I)return;o.Wr.set(y,I.withResumeToken(Bn.EMPTY_BYTE_STRING,I.snapshotVersion)),Ew(o,y);const A=new zo(I.target,y,1,I.sequenceNumber);Z_(o,A)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield im(n,r)}var r}),Y_.apply(this,arguments)}function im(n,e,t){return Q_.apply(this,arguments)}function Q_(){return Q_=(0,_e.Z)(function*(n,e,t){if(!zu(e))throw e;n.Gr.add(1),yield oh(n),n.Jr.set("Offline"),t||(t=()=>lc(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n.Gr.delete(1),yield Zo(n)}))}),Q_.apply(this,arguments)}function sm(n,e){return e().catch(t=>im(n,t,e))}function ah(n){return Iw.apply(this,arguments)}function Iw(){return Iw=(0,_e.Z)(function*(n){const e=$e(n),t=Qu(e);let r=e.Qr.length>0?e.Qr[e.Qr.length-1].batchId:-1;for(;yC(e);)try{const o=yield nC(e.localStore,r);if(null===o){0===e.Qr.length&&t._r();break}r=o.batchId,_C(e,o)}catch(o){yield im(e,o)}fc(e)&&J_(e)}),Iw.apply(this,arguments)}function yC(n){return Ga(n)&&n.Qr.length<10}function _C(n,e){n.Qr.push(e);const t=Qu(n);t.lr()&&t.Sr&&t.Dr(e.mutations)}function fc(n){return Ga(n)&&!Qu(n).hr()&&n.Qr.length>0}function J_(n){Qu(n).start()}function uh(n){return Dw.apply(this,arguments)}function Dw(){return Dw=(0,_e.Z)(function*(n){Qu(n).kr()}),Dw.apply(this,arguments)}function Cw(n){return X_.apply(this,arguments)}function X_(){return X_=(0,_e.Z)(function*(n){const e=Qu(n);for(const t of n.Qr)e.Dr(t.mutations)}),X_.apply(this,arguments)}function lT(n,e,t){return om.apply(this,arguments)}function om(){return om=(0,_e.Z)(function*(n,e,t){const r=n.Qr.shift(),o=ew.from(r,e,t);yield sm(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield ah(n)}),om.apply(this,arguments)}function cT(n,e){return am.apply(this,arguments)}function am(){return am=(0,_e.Z)(function*(n,e){var t;e&&Qu(n).Sr&&(yield(t=(0,_e.Z)(function*(r,o){if(RE(l=o.code)&&l!==de.ABORTED){const h=r.Qr.shift();Qu(r).wr(),yield sm(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,o)),yield ah(r)}var l}),function(r,o){return t.apply(this,arguments)})(n,e)),fc(n)&&J_(n)}),am.apply(this,arguments)}function um(n,e){return ev.apply(this,arguments)}function ev(){return ev=(0,_e.Z)(function*(n,e){const t=$e(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=Ga(t);t.Gr.add(3),yield oh(t),r&&t.Jr.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Gr.delete(3),yield Zo(t)}),ev.apply(this,arguments)}function tv(n,e){return nv.apply(this,arguments)}function nv(){return nv=(0,_e.Z)(function*(n,e){const t=$e(n);e?(t.Gr.delete(2),yield Zo(t)):e||(t.Gr.add(2),yield oh(t),t.Jr.set("Unknown"))}),nv.apply(this,arguments)}function lh(n){return n.Xr||(n.Xr=function(e,t,r){const o=$e(e);return o.Or(),new _w(t,o.ir,o.authCredentials,o.appCheckCredentials,o.k,r)}(n.datastore,n.asyncQueue,{Di:nm.bind(null,n),Ni:mC.bind(null,n),br:ww.bind(null,n)}),n.zr.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Xr.wr(),em(n)?K_(n):n.Jr.set("Unknown")):(yield n.Xr.stop(),tm(n))});return function(t){return e.apply(this,arguments)}}())),n.Xr}function Qu(n){return n.Zr||(n.Zr=function(e,t,r){const o=$e(e);return o.Or(),new uT(t,o.ir,o.authCredentials,o.appCheckCredentials,o.k,r)}(n.datastore,n.asyncQueue,{Di:uh.bind(null,n),Ni:cT.bind(null,n),Nr:Cw.bind(null,n),Cr:lT.bind(null,n)}),n.zr.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Zr.wr(),yield ah(n)):(yield n.Zr.stop(),n.Qr.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.Qr.length} pending writes`),n.Qr=[]))});return function(t){return e.apply(this,arguments)}}())),n.Zr}class rv{constructor(e,t,r,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new Sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,o,l){const h=Date.now()+r,y=new rv(e,t,h,o,l);return y.start(r),y}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Se(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ch(n,e){if(Kn("AsyncQueue",`${e}: ${n}`),zu(n))return new Se(de.UNAVAILABLE,`${e}: ${n}`);throw n}class dh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Je.comparator(t.key,r.key):(t,r)=>Je.comparator(t.key,r.key),this.keyedMap=kg(),this.sortedSet=new Yn(this.comparator)}static emptySet(e){return new dh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof dh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new dh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class bw{constructor(){this.eo=new Yn(Je.comparator)}track(e){const t=e.doc.key,r=this.eo.get(t);r?0!==e.type&&3===r.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==r.type?this.eo=this.eo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.eo=this.eo.remove(t):1===e.type&&2===r.type?this.eo=this.eo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):it():this.eo=this.eo.insert(t,e)}no(){const e=[];return this.eo.inorderTraversal((t,r)=>{e.push(r)}),e}}class hh{constructor(e,t,r,o,l,h,y,I){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=y,this.excludesMetadataChanges=I}static fromInitialDocuments(e,t,r,o){const l=[];return t.forEach(h=>{l.push({type:0,doc:h})}),new hh(e,t,dh.emptySet(t),l,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class Qf{constructor(){this.so=void 0,this.listeners=[]}}class Tw{constructor(){this.queries=new ac(e=>i_(e),Rf),this.onlineState="Unknown",this.io=new Set}}function lm(n,e){return cm.apply(this,arguments)}function cm(){return cm=(0,_e.Z)(function*(n,e){const t=$e(n),r=e.query;let o=!1,l=t.queries.get(r);if(l||(o=!0,l=new Qf),o)try{l.so=yield t.onListen(r)}catch(h){const y=ch(h,`Initialization of query '${s_(e.query)}' failed`);return void e.onError(y)}t.queries.set(r,l),l.listeners.push(e),e.ro(t.onlineState),l.so&&e.oo(l.so)&&fm(t)}),cm.apply(this,arguments)}function dm(n,e){return hm.apply(this,arguments)}function hm(){return hm=(0,_e.Z)(function*(n,e){const t=$e(n),r=e.query;let o=!1;const l=t.queries.get(r);if(l){const h=l.listeners.indexOf(e);h>=0&&(l.listeners.splice(h,1),o=0===l.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),hm.apply(this,arguments)}function Aw(n,e){const t=$e(n);let r=!1;for(const o of e){const h=t.queries.get(o.query);if(h){for(const y of h.listeners)y.oo(o)&&(r=!0);h.so=o}}r&&fm(t)}function vC(n,e,t){const r=$e(n),o=r.queries.get(e);if(o)for(const l of o.listeners)l.onError(t);r.queries.delete(e)}function fm(n){n.io.forEach(e=>{e.next()})}class iv{constructor(e,t,r){this.query=e,this.co=t,this.ao=!1,this.uo=null,this.onlineState="Unknown",this.options=r||{}}oo(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new hh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.ao?this.ho(e)&&(this.co.next(e),t=!0):this.lo(e,this.onlineState)&&(this.fo(e),t=!0),this.uo=e,t}onError(e){this.co.error(e)}ro(e){this.onlineState=e;let t=!1;return this.uo&&!this.ao&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}lo(e,t){return!e.fromCache||!(this.options.wo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}ho(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}fo(e){e=hh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.ao=!0,this.co.next(e)}}class EC{constructor(e,t){this.payload=e,this.byteLength=t}_o(){return"metadata"in this.payload}}class Sw{constructor(e){this.k=e}Hn(e){return gr(this.k,e)}Jn(e){return e.metadata.exists?$E(this.k,e.document,!1):gn.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}Yn(e){return nr(e)}}class wC{constructor(e,t,r){this.mo=e,this.localStore=t,this.k=r,this.queries=[],this.documents=[],this.progress=fh(e)}yo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}po(e){const t=new Map,r=new Sw(this.k);for(const o of e)if(o.metadata.queries){const l=r.Hn(o.metadata.name);for(const h of o.metadata.queries){const y=(t.get(h)||Yt()).add(l);t.set(h,y)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function rC(n,e,t,r){return B_.apply(this,arguments)}(e.localStore,new Sw(e.k),e.documents,e.mo.id),r=e.po(e.documents);for(const o of e.queries)yield iC(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",new Hf(Object.assign({},e.progress),t)})()}}function fh(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Mw{constructor(e){this.key=e}}class pm{constructor(e){this.key=e}}class vo{constructor(e,t){this.query=e,this.To=t,this.Eo=null,this.current=!1,this.Io=Yt(),this.mutatedKeys=Yt(),this.Ao=wE(e),this.Ro=new dh(this.Ao)}get bo(){return this.To}Po(e,t){const r=t?t.vo:new bw,o=t?t.Ro:this.Ro;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,y=!1;const I=n_(this.query)&&o.size===this.query.limit?o.last():null,A=xg(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((R,N)=>{const G=o.get(R),Q=Nf(this.query,N)?N:null,Ie=!!G&&this.mutatedKeys.has(G.key),He=!!Q&&(Q.hasLocalMutations||this.mutatedKeys.has(Q.key)&&Q.hasCommittedMutations);let Xe=!1;G&&Q?G.data.isEqual(Q.data)?Ie!==He&&(r.track({type:3,doc:Q}),Xe=!0):this.Vo(G,Q)||(r.track({type:2,doc:Q}),Xe=!0,(I&&this.Ao(Q,I)>0||A&&this.Ao(Q,A)<0)&&(y=!0)):!G&&Q?(r.track({type:0,doc:Q}),Xe=!0):G&&!Q&&(r.track({type:1,doc:G}),Xe=!0,(I||A)&&(y=!0)),Xe&&(Q?(h=h.add(Q),l=He?l.add(R):l.delete(R)):(h=h.delete(R),l=l.delete(R)))}),n_(this.query)||xg(this.query))for(;h.size>this.query.limit;){const R=n_(this.query)?h.last():h.first();h=h.delete(R.key),l=l.delete(R.key),r.track({type:1,doc:R})}return{Ro:h,vo:r,Bn:y,mutatedKeys:l}}Vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;const l=e.vo.no();l.sort((A,R)=>function(N,G){const Q=Ie=>{switch(Ie){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return Q(N)-Q(G)}(A.type,R.type)||this.Ao(A.doc,R.doc)),this.So(r);const h=t?this.Do():[],y=0===this.Io.size&&this.current?1:0,I=y!==this.Eo;return this.Eo=y,0!==l.length||I?{snapshot:new hh(this.query,e.Ro,o,l,e.mutatedKeys,0===y,I,!1),Co:h}:{Co:h}}ro(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new bw,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}So(e){e&&(e.addedDocuments.forEach(t=>this.To=this.To.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.To=this.To.delete(t)),this.current=e.current)}Do(){if(!this.current)return[];const e=this.Io;this.Io=Yt(),this.Ro.forEach(r=>{this.No(r.key)&&(this.Io=this.Io.add(r.key))});const t=[];return e.forEach(r=>{this.Io.has(r)||t.push(new pm(r))}),this.Io.forEach(r=>{e.has(r)||t.push(new Mw(r))}),t}ko(e){this.To=e.zn,this.Io=Yt();const t=this.Po(e.documents);return this.applyChanges(t,!0)}xo(){return hh.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class IC{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class sv{constructor(e){this.key=e,this.$o=!1}}class Jf{constructor(e,t,r,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Oo={},this.Mo=new ac(y=>i_(y),Rf),this.Fo=new Map,this.Lo=new Set,this.Bo=new Yn(Je.comparator),this.Uo=new Map,this.qo=new Zg,this.Ko={},this.jo=new Map,this.Qo=rc.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}function DC(n,e){return ov.apply(this,arguments)}function ov(){return ov=(0,_e.Z)(function*(n,e){const t=np(n);let r,o;const l=t.Mo.get(e);if(l)r=l.targetId,t.sharedClientState.addLocalQueryTarget(r),o=l.view.xo();else{const h=yield cc(t.localStore,ds(e)),y=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,o=yield av(t,e,r,"current"===y),t.isPrimaryClient&&Kf(t.remoteStore,h)}return o}),ov.apply(this,arguments)}function av(n,e,t,r){return ph.apply(this,arguments)}function ph(){return ph=(0,_e.Z)(function*(n,e,t,r){n.Go=(R,N,G)=>{return(Q=(0,_e.Z)(function*(Ie,He,Xe,Pt){let Jt=He.view.Po(Xe);Jt.Bn&&(Jt=yield qg(Ie.localStore,He.query,!1).then(({documents:xn})=>He.view.Po(xn,Jt)));const Dn=Pt&&Pt.targetChanges.get(He.targetId),xt=He.view.applyChanges(Jt,Ie.isPrimaryClient,Dn);return _m(Ie,He.targetId,xt.Co),xt.snapshot}),function(Ie,He,Xe,Pt){return Q.apply(this,arguments)})(n,R,N,G);var Q};const o=yield qg(n.localStore,e,!0),l=new vo(e,o.zn),h=l.Po(o.documents),y=Lf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),I=l.applyChanges(h,n.isPrimaryClient,y);_m(n,t,I.Co);const A=new IC(e,t,l);return n.Mo.set(e,A),n.Fo.has(t)?n.Fo.get(t).push(e):n.Fo.set(t,[e]),I.snapshot}),ph.apply(this,arguments)}function gm(n,e){return uv.apply(this,arguments)}function uv(){return uv=(0,_e.Z)(function*(n,e){const t=$e(n),r=t.Mo.get(e),o=t.Fo.get(r.targetId);if(o.length>1)return t.Fo.set(r.targetId,o.filter(l=>!Rf(l,e))),void t.Mo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ih(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Yf(t.remoteStore,r.targetId),gh(t,r.targetId)}).catch(sc))):(gh(t,r.targetId),yield ih(t.localStore,r.targetId,!0))}),uv.apply(this,arguments)}function mm(){return mm=(0,_e.Z)(function*(n,e,t){const r=Im(n);try{const o=yield function(l,h){const y=$e(l),I=zr.now(),A=h.reduce((N,G)=>N.add(G.key),Yt());let R;return y.persistence.runTransaction("Locally write mutations","readwrite",N=>y.Wn.vn(N,A).next(G=>{R=G;const Q=[];for(const Ie of h){const He=SE(Ie,R.get(Ie.key));null!=He&&Q.push(new qo(Ie.key,He,e_(He.value.mapValue),pr.exists(!0)))}return y.An.addMutationBatch(N,I,Q,h)})).then(N=>(N.applyToLocalDocumentSet(R),{batchId:N.batchId,changes:R}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(l,h,y){let I=l.Ko[l.currentUser.toKey()];I||(I=new Yn(Nt)),I=I.insert(h,y),l.Ko[l.currentUser.toKey()]=I}(r,o.batchId,t),yield qa(r,o.changes),yield ah(r.remoteStore)}catch(o){const l=ch(o,"Failed to persist write");t.reject(l)}}),mm.apply(this,arguments)}function lv(n,e){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,_e.Z)(function*(n,e){const t=$e(n);try{const r=yield tC(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.Uo.get(l);h&&(mt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.$o=!0:o.modifiedDocuments.size>0?mt(h.$o):o.removedDocuments.size>0&&(mt(h.$o),h.$o=!1))}),yield qa(t,r,e)}catch(r){yield sc(r)}}),Xf.apply(this,arguments)}function cv(n,e,t){const r=$e(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.Mo.forEach((l,h)=>{const y=h.view.ro(e);y.snapshot&&o.push(y.snapshot)}),function(l,h){const y=$e(l);y.onlineState=h;let I=!1;y.queries.forEach((A,R)=>{for(const N of R.listeners)N.ro(h)&&(I=!0)}),I&&fm(y)}(r.eventManager,e),o.length&&r.Oo.br(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function bC(n,e,t){return dv.apply(this,arguments)}function dv(){return dv=(0,_e.Z)(function*(n,e,t){const r=$e(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Uo.get(e),l=o&&o.key;if(l){let h=new Yn(Je.comparator);h=h.insert(l,gn.newNoDocument(l,vt.min()));const y=Yt().add(l),I=new Hd(vt.min(),new Map,new Sn(Nt),h,y);yield lv(r,I),r.Bo=r.Bo.remove(l),r.Uo.delete(e),vm(r)}else yield ih(r.localStore,e,!1).then(()=>gh(r,e,t)).catch(sc)}),dv.apply(this,arguments)}function dT(n,e){return ep.apply(this,arguments)}function ep(){return ep=(0,_e.Z)(function*(n,e){const t=$e(n),r=e.batch.batchId;try{const o=yield eC(t.localStore,e);gv(t,r,null),pv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield qa(t,o)}catch(o){yield sc(o)}}),ep.apply(this,arguments)}function hv(n,e,t){return ym.apply(this,arguments)}function ym(){return ym=(0,_e.Z)(function*(n,e,t){const r=$e(n);try{const o=yield function(l,h){const y=$e(l);return y.persistence.runTransaction("Reject batch","readwrite-primary",I=>{let A;return y.An.lookupMutationBatch(I,h).next(R=>(mt(null!==R),A=R.keys(),y.An.removeMutationBatch(I,R))).next(()=>y.An.performConsistencyCheck(I)).next(()=>y.Wn.vn(I,A))})}(r.localStore,e);gv(r,e,t),pv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield qa(r,o)}catch(o){yield sc(o)}}),ym.apply(this,arguments)}function tp(){return tp=(0,_e.Z)(function*(n,e){const t=$e(n);Ga(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const h=$e(l);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",y=>h.An.getHighestUnacknowledgedBatchId(y))}(t.localStore);if(-1===r)return void e.resolve();const o=t.jo.get(r)||[];o.push(e),t.jo.set(r,o)}catch(r){const o=ch(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),tp.apply(this,arguments)}function pv(n,e){(n.jo.get(e)||[]).forEach(t=>{t.resolve()}),n.jo.delete(e)}function gv(n,e,t){const r=$e(n);let o=r.Ko[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),r.Ko[r.currentUser.toKey()]=o}}function gh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Fo.get(e))n.Mo.delete(r),t&&n.Oo.zo(r,t);n.Fo.delete(e),n.isPrimaryClient&&n.qo.us(e).forEach(r=>{n.qo.containsKey(r)||xw(n,r)})}function xw(n,e){n.Lo.delete(e.path.canonicalString());const t=n.Bo.get(e);null!==t&&(Yf(n.remoteStore,t),n.Bo=n.Bo.remove(e),n.Uo.delete(t),vm(n))}function _m(n,e,t){for(const r of t)r instanceof Mw?(n.qo.addReference(r.key,e),mv(n,r)):r instanceof pm?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.qo.removeReference(r.key,e),n.qo.containsKey(r.key)||xw(n,r.key)):it()}function mv(n,e){const t=e.key,r=t.path.canonicalString();n.Bo.get(t)||n.Lo.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.Lo.add(r),vm(n))}function vm(n){for(;n.Lo.size>0&&n.Bo.size<n.maxConcurrentLimboResolutions;){const e=n.Lo.values().next().value;n.Lo.delete(e);const t=new Je(zt.fromString(e)),r=n.Qo.next();n.Uo.set(r,new sv(t)),n.Bo=n.Bo.insert(t,r),Kf(n.remoteStore,new zo(ds(Ql(t.path)),r,2,Us.I))}}function qa(n,e,t){return Em.apply(this,arguments)}function Em(){return Em=(0,_e.Z)(function*(n,e,t){const r=$e(n),o=[],l=[],h=[];var y;r.Mo.isEmpty()||(r.Mo.forEach((y,I)=>{h.push(r.Go(I,e,t).then(A=>{if(A){r.isPrimaryClient&&r.sharedClientState.updateQueryState(I.targetId,A.fromCache?"not-current":"current"),o.push(A);const R=F_.$n(I.targetId,A);l.push(R)}}))}),yield Promise.all(h),r.Oo.br(o),yield(y=(0,_e.Z)(function*(I,A){const R=$e(I);try{yield R.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>be.forEach(A,G=>be.forEach(G.kn,Q=>R.persistence.referenceDelegate.addReference(N,G.targetId,Q)).next(()=>be.forEach(G.xn,Q=>R.persistence.referenceDelegate.removeReference(N,G.targetId,Q)))))}catch(N){if(!zu(N))throw N;Pe("LocalStore","Failed to update sequence numbers: "+N)}for(const N of A){const G=N.targetId;if(!N.fromCache){const Q=R.qn.get(G),He=Q.withLastLimboFreeSnapshotVersion(Q.snapshotVersion);R.qn=R.qn.insert(G,He)}}}),function(I,A){return y.apply(this,arguments)})(r.localStore,l))}),Em.apply(this,arguments)}function Rw(n,e){return yv.apply(this,arguments)}function yv(){return yv=(0,_e.Z)(function*(n,e){const t=$e(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield L_(t.localStore,e);t.currentUser=e,(o=t).jo.forEach(h=>{h.forEach(y=>{y.reject(new Se(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.jo.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield qa(t,r.Gn)}var o}),yv.apply(this,arguments)}function Nw(n,e){const t=$e(n),r=t.Uo.get(e);if(r&&r.$o)return Yt().add(r.key);{let o=Yt();const l=t.Fo.get(e);if(!l)return o;for(const h of l){const y=t.Mo.get(h);o=o.unionWith(y.view.bo)}return o}}function Ow(n,e){return _v.apply(this,arguments)}function _v(){return _v=(0,_e.Z)(function*(n,e){const t=$e(n),r=yield qg(t.localStore,e.query,!0),o=e.view.ko(r);return t.isPrimaryClient&&_m(t,e.targetId,o.Co),o}),_v.apply(this,arguments)}function Pw(n){return vv.apply(this,arguments)}function vv(){return vv=(0,_e.Z)(function*(n){const e=$e(n);return fw(e.localStore).then(t=>qa(e,t))}),vv.apply(this,arguments)}function wi(n,e,t,r){return Ju.apply(this,arguments)}function Ju(){return Ju=(0,_e.Z)(function*(n,e,t,r){const o=$e(n),l=yield function(h,y){const I=$e(h),A=$e(I.An);return I.persistence.runTransaction("Lookup mutation documents","readonly",R=>A.Zt(R,y).next(N=>N?I.Wn.vn(R,N):be.resolve(null)))}(o.localStore,e);var y;null!==l?("pending"===t?yield ah(o.remoteStore):"acknowledged"===t||"rejected"===t?(gv(o,e,r||null),pv(o,e),y=e,$e($e(o.localStore).An).ee(y)):it(),yield qa(o,l)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),Ju.apply(this,arguments)}function Ev(){return Ev=(0,_e.Z)(function*(n,e){const t=$e(n);if(np(t),Im(t),!0===e&&!0!==t.Wo){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield AC(t,r.toArray());t.Wo=!0,yield tv(t.remoteStore,!0);for(const l of o)Kf(t.remoteStore,l)}else if(!1===e&&!1!==t.Wo){const r=[];let o=Promise.resolve();t.Fo.forEach((l,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):o=o.then(()=>(gh(t,h),ih(t.localStore,h,!0))),Yf(t.remoteStore,h)}),yield o,yield AC(t,r),function(l){const h=$e(l);h.Uo.forEach((y,I)=>{Yf(h.remoteStore,I)}),h.qo.hs(),h.Uo=new Map,h.Bo=new Yn(Je.comparator)}(t),t.Wo=!1,yield tv(t.remoteStore,!1)}}),Ev.apply(this,arguments)}function AC(n,e,t){return pc.apply(this,arguments)}function pc(){return pc=(0,_e.Z)(function*(n,e,t){const r=$e(n),o=[],l=[];for(const h of e){let y;const I=r.Fo.get(h);if(I&&0!==I.length){y=yield cc(r.localStore,ds(I[0]));for(const A of I){const R=r.Mo.get(A),N=yield Ow(r,R);N.snapshot&&l.push(N.snapshot)}}else{const A=yield Wg(r.localStore,h);y=yield cc(r.localStore,A),yield av(r,kw(A),h,!1)}o.push(y)}return r.Oo.br(l),o}),pc.apply(this,arguments)}function kw(n){return EE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function wv(n){const e=$e(n);return $e($e(e.localStore).persistence).Tn()}function SC(n,e,t,r){return wm.apply(this,arguments)}function wm(){return wm=(0,_e.Z)(function*(n,e,t,r){const o=$e(n);if(o.Wo)Pe("SyncEngine","Ignoring unexpected query state notification.");else if(o.Fo.has(e))switch(t){case"current":case"not-current":{const l=yield fw(o.localStore),h=Hd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield qa(o,l,h);break}case"rejected":yield ih(o.localStore,e,!0),gh(o,e,r);break;default:it()}}),wm.apply(this,arguments)}function MC(n,e,t){return Iv.apply(this,arguments)}function Iv(){return Iv=(0,_e.Z)(function*(n,e,t){const r=np(n);if(r.Wo){for(const o of e){if(r.Fo.has(o)){Pe("SyncEngine","Adding an already active target "+o);continue}const l=yield Wg(r.localStore,o),h=yield cc(r.localStore,l);yield av(r,kw(l),h.targetId,!1),Kf(r.remoteStore,h)}for(const o of t)r.Fo.has(o)&&(yield ih(r.localStore,o,!1).then(()=>{Yf(r.remoteStore,o),gh(r,o)}).catch(sc))}}),Iv.apply(this,arguments)}function np(n){const e=$e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=lv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Nw.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bC.bind(null,e),e.Oo.br=Aw.bind(null,e.eventManager),e.Oo.zo=vC.bind(null,e.eventManager),e}function Im(n){const e=$e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hv.bind(null,e),e}class rp{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.k=zf(e.databaseInfo.databaseId),t.sharedClientState=t.Jo(e),t.persistence=t.Yo(e),yield t.persistence.start(),t.gcScheduler=t.Xo(e),t.localStore=t.Zo(e)})()}Xo(e){return null}Zo(e){return hw(this.persistence,new dw,e.initialUser,this.k)}Yo(e){return new cC(j_.ks,this.k)}Jo(e){return new Qg}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Dm extends rp{constructor(e,t,r){super(),this.tc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield function pw(n){return zg.apply(this,arguments)}(r.localStore),yield r.tc.initialize(r,e),yield Im(r.tc.syncEngine),yield ah(r.tc.remoteStore),yield r.persistence.sn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Zo(e){return hw(this.persistence,new dw,e.initialUser,this.k)}Xo(e){return new KD(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Yo(e){const t=Hg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ei.withCacheSize(this.cacheSizeBytes):Ei.DEFAULT;return new rh(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,mw(),Wf(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(e){return new Qg}}class hT extends Dm{constructor(e,t){super(e,t,!1),this.tc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const o=r.tc.syncEngine;r.sharedClientState instanceof qf&&(r.sharedClientState.syncEngine={mi:wi.bind(null,o),gi:SC.bind(null,o),yi:MC.bind(null,o),Tn:wv.bind(null,o),_i:Pw.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.sn(function(){var l=(0,_e.Z)(function*(h){yield function TC(n,e){return Ev.apply(this,arguments)}(r.tc.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):h||r.gcScheduler.stop())});return function(h){return l.apply(this,arguments)}}())})()}Jo(e){const t=mw();if(!qf.Pt(t))throw new Se(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Hg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qf(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Cm{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>cv(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=Rw.bind(null,r.syncEngine),yield tv(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Tw}createDatastore(e){const t=zf(e.databaseInfo.databaseId),r=new z_(e.databaseInfo);return new pC(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,l=y=>cv(this.syncEngine,y,0),h=Jg.Pt()?new Jg:new gw,new gC(t,r,o,l,h);var t,r,o,l,h}createSyncEngine(e,t){return function(r,o,l,h,y,I,A){const R=new Jf(r,o,l,h,y,I);return A&&(R.Wo=!0),R}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=$e(t);Pe("RemoteStore","RemoteStore shutting down."),r.Gr.add(5),yield oh(r),r.Hr.shutdown(),r.Jr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Lw(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ip{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ec(this.observer.next,e)}error(e){this.observer.error?this.ec(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}nc(){this.muted=!0}ec(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class bm{constructor(e,t){this.sc=e,this.k=t,this.metadata=new Sr,this.buffer=new Uint8Array,this.ic=new TextDecoder("utf-8"),this.rc().then(r=>{r&&r._o()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.sc.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}Ho(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.rc()})()}rc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.oc();if(null===t)return null;const r=e.ic.decode(t),o=Number(r);isNaN(o)&&e.cc(`length string (${r}) is not valid number`);const l=yield e.ac(o);return new EC(JSON.parse(l),t.length+o)})()}uc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}oc(){var e=this;return(0,_e.Z)(function*(){for(;e.uc()<0&&!(yield e.hc()););if(0===e.buffer.length)return null;const t=e.uc();t<0&&e.cc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ac(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.hc())&&t.cc("Reached the end of bundle when more is expected.");const r=t.ic.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}cc(e){throw this.sc.cancel(),new Error(`Invalid bundle format: ${e}`)}hc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.sc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Vw{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Se(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,_e.Z)(function*(l,h){const y=$e(l),I=qd(y.k)+"/documents",A={documents:h.map(Q=>Vf(y.k,Q))},R=yield y.ji("BatchGetDocuments",I,A),N=new Map;R.forEach(Q=>{const Ie=function VD(n,e){return"found"in e?function(t,r){mt(!!r.found);const o=gr(t,r.found.name),l=nr(r.found.updateTime),h=new Kr({mapValue:{fields:r.found.fields}});return gn.newFoundDocument(o,l,h)}(n,e):"missing"in e?function(t,r){mt(!!r.missing),mt(!!r.readTime);const o=gr(t,r.missing),l=nr(r.readTime);return gn.newNoDocument(o,l)}(n,e):it()}(y.k,Q);N.set(Ie.key.toString(),Ie)});const G=[];return h.forEach(Q=>{const Ie=N.get(Q.toString());mt(!!Ie),G.push(Ie)}),G}),function(l,h){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new $d(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const l=Je.fromPath(o);e.mutations.push(new kf(l,e.precondition(l)))}),yield(r=(0,_e.Z)(function*(o,l){const h=$e(o),y=qd(h.k)+"/documents",I={writes:l.map(A=>Wd(h.k,A))};yield h.Bi("Commit",y,I)}),function(o,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Se(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?pr.updateTime(t):pr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vt.min()))throw new Se(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pr.updateTime(t)}return pr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class xC{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.lc=5,this.ur=new Xg(this.asyncQueue,"transaction_retry")}run(){this.lc-=1,this.fc()}fc(){var e=this;this.ur.Zi((0,_e.Z)(function*(){const t=new Vw(e.datastore),r=e.dc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(l=>{e.wc(l)}))}).catch(o=>{e.wc(o)})}))}dc(e){try{const t=this.updateFunction(e);return!mo(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}wc(e){this.lc>0&&this._c(e)?(this.lc-=1,this.asyncQueue.enqueueAndForget(()=>(this.fc(),Promise.resolve()))):this.deferred.reject(e)}_c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!RE(t)}return!1}}class Dv{constructor(e,t,r,o){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Wr.UNAUTHENTICATED,this.clientId=Qy.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,_e.Z)(function*(y){Pe("FirestoreClient","Received user=",y.uid),yield l.authCredentialListener(y),l.user=y});return function(y){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,h=>(Pe("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Se(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=ch(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function Tm(n,e){return Uw.apply(this,arguments)}function Uw(){return Uw=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,_e.Z)(function*(l){r.isEqual(l)||(yield L_(e.localStore,l),r=l)});return function(l){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Uw.apply(this,arguments)}function Bw(n,e){return Cv.apply(this,arguments)}function Cv(){return Cv=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Am(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>um(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,l)=>um(e.remoteStore,l)),n.onlineComponents=e}),Cv.apply(this,arguments)}function Am(n){return Sm.apply(this,arguments)}function Sm(){return Sm=(0,_e.Z)(function*(n){return n.offlineComponents||(Pe("FirestoreClient","Using default OfflineComponentProvider"),yield Tm(n,new rp)),n.offlineComponents}),Sm.apply(this,arguments)}function Mm(n){return xm.apply(this,arguments)}function xm(){return xm=(0,_e.Z)(function*(n){return n.onlineComponents||(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield Bw(n,new Cm)),n.onlineComponents}),xm.apply(this,arguments)}function bv(n){return Am(n).then(e=>e.persistence)}function Tv(n){return Am(n).then(e=>e.localStore)}function jw(n){return Mm(n).then(e=>e.remoteStore)}function Rm(n){return Mm(n).then(e=>e.syncEngine)}function mh(n){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,_e.Z)(function*(n){const e=yield Mm(n),t=e.eventManager;return t.onListen=DC.bind(null,e.syncEngine),t.onUnlisten=gm.bind(null,e.syncEngine),t}),Nm.apply(this,arguments)}function qw(n,e,t={}){const r=new Sr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(o,l,h,y,I){const A=new ip({next:N=>{l.enqueueAndForget(()=>dm(o,R));const G=N.docs.has(h);!G&&N.fromCache?I.reject(new Se(de.UNAVAILABLE,"Failed to get document because the client is offline.")):G&&N.fromCache&&y&&"server"===y.source?I.reject(new Se(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):I.resolve(N)},error:N=>I.reject(N)}),R=new iv(Ql(h.path),A,{includeMetadataChanges:!0,wo:!0});return lm(o,R)}(yield mh(n),n.asyncQueue,e,t,r)})),r.promise}function NC(n,e,t={}){const r=new Sr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(o,l,h,y,I){const A=new ip({next:N=>{l.enqueueAndForget(()=>dm(o,R)),N.fromCache&&"server"===y.source?I.reject(new Se(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):I.resolve(N)},error:N=>I.reject(N)}),R=new iv(h,A,{includeMetadataChanges:!0,wo:!0});return lm(o,R)}(yield mh(n),n.asyncQueue,e,t,r)})),r.promise}class mT{constructor(e,t,r,o,l,h,y,I){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=y,this.useFetchStreams=I}}class sp{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof sp&&e.projectId===this.projectId&&e.database===this.database}}const OC=new Map;function zw(n,e,t){if(!t)throw new Se(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function PC(n,e,t,r){if(!0===e&&!0===r)throw new Se(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function op(n){if(!Je.isDocumentKey(n))throw new Se(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function kC(n){if(Je.isDocumentKey(n))throw new Se(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function yh(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function St(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Se(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=yh(n);throw new Se(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Av(n,e){if(e<=0)throw new Se(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Zw{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Se(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Se(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,PC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ap{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zw({}),this._settingsFrozen=!1,e instanceof sp?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Se(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sp(o.options.projectId)}(e))}get app(){if(!this._app)throw new Se(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Se(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zw(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new tT;switch(t.type){case"gapi":const r=t.client;return mt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new fE(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Se(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=OC.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),OC.delete(e),t.terminate())}(this),Promise.resolve()}}class un{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new un(this.firestore,e,this._key)}}class Qr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qr(this.firestore,e,this._query)}}class Eo extends Qr{constructor(e,t,r){super(e,t,Ql(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new un(this.firestore,null,new Je(e))}withConverter(e){return new Eo(this.firestore,e,this._path)}}function FC(n,e,...t){if(n=(0,Dt.m9)(n),zw("collection","path",e),n instanceof ap){const r=zt.fromString(e,...t);return kC(r),new Eo(n,null,r)}{if(!(n instanceof un||n instanceof Eo))throw new Se(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(zt.fromString(e,...t));return kC(r),new Eo(n.firestore,null,r)}}function gc(n,e,...t){if(n=(0,Dt.m9)(n),1===arguments.length&&(e=Qy.A()),zw("doc","path",e),n instanceof ap){const r=zt.fromString(e,...t);return op(r),new un(n,null,new Je(r))}{if(!(n instanceof un||n instanceof Eo))throw new Se(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(zt.fromString(e,...t));return op(r),new un(n.firestore,n instanceof Eo?n.converter:null,new Je(r))}}function Mv(n,e){return n=(0,Dt.m9)(n),e=(0,Dt.m9)(e),(n instanceof un||n instanceof Eo)&&(e instanceof un||e instanceof Eo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function LC(n,e){return n=(0,Dt.m9)(n),e=(0,Dt.m9)(e),n instanceof Qr&&e instanceof Qr&&n.firestore===e.firestore&&Rf(n._query,e._query)&&n.converter===e.converter}class yT{constructor(){this.mc=Promise.resolve(),this.gc=[],this.yc=!1,this.Tc=[],this.Ec=null,this.Ic=!1,this.Ac=!1,this.Rc=[],this.ur=new Xg(this,"async_queue_retry"),this.bc=()=>{const t=Wf();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ur.er()};const e=Wf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.bc)}get isShuttingDown(){return this.yc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pc(),this.vc(e)}enterRestrictedMode(e){if(!this.yc){this.yc=!0,this.Ac=e||!1;const t=Wf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}}enqueue(e){if(this.Pc(),this.yc)return new Promise(()=>{});const t=new Sr;return this.vc(()=>this.yc&&this.Ac?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.gc.push(e),this.Vc()))}Vc(){var e=this;return(0,_e.Z)(function*(){if(0!==e.gc.length){try{yield e.gc[0](),e.gc.shift(),e.ur.reset()}catch(t){if(!zu(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.gc.length>0&&e.ur.Zi(()=>e.Vc())}})()}vc(e){const t=this.mc.then(()=>(this.Ic=!0,e().catch(r=>{throw this.Ec=r,this.Ic=!1,Kn("INTERNAL UNHANDLED ERROR: ",function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),h}(r)),r}).then(r=>(this.Ic=!1,r))));return this.mc=t,t}enqueueAfterDelay(e,t,r){this.Pc(),this.Rc.indexOf(e)>-1&&(t=0);const o=rv.createAndSchedule(this,e,t,r,l=>this.Sc(l));return this.Tc.push(o),o}Pc(){this.Ec&&it()}verifyOperationInProgress(){}Dc(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.mc,yield t}while(t!==e.mc)})()}Cc(e){for(const t of this.Tc)if(t.timerId===e)return!0;return!1}Nc(e){return this.Dc().then(()=>{this.Tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Dc()})}kc(e){this.Rc.push(e)}Sc(e){const t=this.Tc.indexOf(e);this.Tc.splice(t,1)}}function Yw(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class VC{constructor(){this._progressObserver={},this._taskCompletionResolver=new Sr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class In extends ap{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new yT,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Qw(this),this._firestoreClient.terminate()}}function Hn(n){return n._firestoreClient||Qw(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Qw(n){var e;const t=n._freezeSettings(),r=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new mT(n._databaseId,l,n._persistenceKey,(y=t).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,y.useFetchStreams));var l,y;n._firestoreClient=new Dv(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Om(n,e,t){const r=new Sr;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield Tm(n,t),yield Bw(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(l=o).name?l.code===de.FAILED_PRECONDITION||l.code===de.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var l})).then(()=>r.promise)}function Nv(n){if(n._initialized||n._terminated)throw new Se(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Wa{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Se(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ws{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ws(Bn.fromBase64String(e))}catch(t){throw new Se(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ws(Bn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Jr{constructor(e){this._methodName=e}}class Pm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Se(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Se(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Nt(this._lat,e._lat)||Nt(this._long,e._long)}}const ET=/^__.*__$/;class GC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new qo(e,this.data,this.fieldMask,t,this.fieldTransforms):new jd(e,this.data,t,this.fieldTransforms)}}class Ov{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new qo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function eI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class km{constructor(e,t,r,o,l,h){this.settings=e,this.databaseId=t,this.k=r,this.ignoreUndefinedProperties=o,void 0===l&&this.xc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get $c(){return this.settings.$c}Oc(e){return new km(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Oc({path:r,Fc:!1});return o.Lc(e),o}Bc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Oc({path:r,Fc:!1});return o.xc(),o}Uc(e){return this.Oc({path:void 0,Fc:!0})}qc(e){return Lm(e,this.settings.methodName,this.settings.Kc||!1,this.path,this.settings.jc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lc(this.path.get(e))}Lc(e){if(0===e.length)throw this.qc("Document fields must not be empty");if(eI(this.$c)&&ET.test(e))throw this.qc('Document fields cannot begin and end with "__"')}}class tI{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.k=r||zf(e)}Qc(e,t,r,o=!1){return new km({$c:e,methodName:t,jc:r,path:Zr.emptyPath(),Fc:!1,Kc:o},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function mc(n){const e=n._freezeSettings(),t=zf(n._databaseId);return new tI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Pv(n,e,t,r,o,l={}){const h=n.Qc(l.merge||l.mergeFields?2:0,e,t,o);Vv("Data must be an object, but it was:",h,r);const y=Lv(r,h);let I,A;if(l.merge)I=new Pd(h.fieldMask),A=h.fieldTransforms;else if(l.mergeFields){const R=[];for(const N of l.mergeFields){const G=sI(e,N,t);if(!h.contains(G))throw new Se(de.INVALID_ARGUMENT,`Field '${G}' is specified in your field mask but missing from your input data.`);oI(R,G)||R.push(G)}I=new Pd(R),A=h.fieldTransforms.filter(N=>I.covers(N.field))}else I=null,A=h.fieldTransforms;return new GC(new Kr(y),I,A)}class _h extends Jr{_toFieldTransform(e){if(2!==e.$c)throw e.qc(1===e.$c?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _h}}function kv(n,e,t){return new km({$c:3,jc:e.settings.jc,methodName:n._methodName,Fc:t},e.databaseId,e.k,e.ignoreUndefinedProperties)}class Fv extends Jr{_toFieldTransform(e){return new Xl(e.path,new Hu)}isEqual(e){return e instanceof Fv}}class qC extends Jr{constructor(e,t){super(e),this.Wc=t}_toFieldTransform(e){const t=kv(this,e,!0),r=this.Wc.map(l=>Xu(l,t)),o=new Jl(r);return new Xl(e.path,o)}isEqual(e){return this===e}}class nI extends Jr{constructor(e,t){super(e),this.Wc=t}_toFieldTransform(e){const t=kv(this,e,!0),r=this.Wc.map(l=>Xu(l,t)),o=new _o(r);return new Xl(e.path,o)}isEqual(e){return this===e}}class up extends Jr{constructor(e,t){super(e),this.Gc=t}_toFieldTransform(e){const t=new Gu(e.k,DE(e.k,this.Gc));return new Xl(e.path,t)}isEqual(e){return this===e}}function lp(n,e,t,r){const o=n.Qc(1,e,t);Vv("Data must be an object, but it was:",o,r);const l=[],h=Kr.empty();Zl(r,(I,A)=>{const R=cp(e,I,t);A=(0,Dt.m9)(A);const N=o.Bc(R);if(A instanceof _h)l.push(R);else{const G=Xu(A,N);null!=G&&(l.push(R),h.set(R,G))}});const y=new Pd(l);return new Ov(h,y,o.fieldTransforms)}function Fm(n,e,t,r,o,l){const h=n.Qc(1,e,t),y=[sI(e,r,t)],I=[o];if(l.length%2!=0)throw new Se(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let G=0;G<l.length;G+=2)y.push(sI(e,l[G])),I.push(l[G+1]);const A=[],R=Kr.empty();for(let G=y.length-1;G>=0;--G)if(!oI(A,y[G])){const Q=y[G];let Ie=I[G];Ie=(0,Dt.m9)(Ie);const He=h.Bc(Q);if(Ie instanceof _h)A.push(Q);else{const Xe=Xu(Ie,He);null!=Xe&&(A.push(Q),R.set(Q,Xe))}}const N=new Pd(A);return new Ov(R,N,h.fieldTransforms)}function rI(n,e,t,r=!1){return Xu(t,n.Qc(r?4:3,e))}function Xu(n,e){if(iI(n=(0,Dt.m9)(n)))return Vv("Unsupported field value:",e,n),Lv(n,e);if(n instanceof Jr)return function(t,r){if(!eI(r.$c))throw r.qc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.qc(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Fc&&4!==e.$c)throw e.qc("Nested arrays are not supported");return function(t,r){const o=[];let l=0;for(const h of t){let y=Xu(h,r.Uc(l));null==y&&(y={nullValue:"NULL_VALUE"}),o.push(y),l++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Dt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return DE(r.k,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=zr.fromDate(t);return{timestampValue:Gd(r.k,o)}}if(t instanceof zr){const o=new zr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Gd(r.k,o)}}if(t instanceof Pm)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ws)return{bytesValue:LD(r.k,t._byteString)};if(t instanceof un){const o=r.databaseId,l=t.firestore._databaseId;if(!l.isEqual(o))throw r.qc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:js(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.qc(`Unsupported field value: ${yh(t)}`)}(n,e)}function Lv(n,e){const t={};return Ag(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zl(n,(r,o)=>{const l=Xu(o,e.Mc(r));null!=l&&(t[r]=l)}),{mapValue:{fields:t}}}function iI(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof zr||n instanceof Pm||n instanceof Ws||n instanceof un||n instanceof Jr)}function Vv(n,e,t){if(!iI(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=yh(t);throw e.qc("an object"===r?n+" a custom object":n+" "+r)}var r}function sI(n,e,t){if((e=(0,Dt.m9)(e))instanceof Wa)return e._internalPath;if("string"==typeof e)return cp(n,e);throw Lm("Field path arguments must be of type string or ",n,!1,void 0,t)}const wT=new RegExp("[~\\*/\\[\\]]");function cp(n,e,t){if(e.search(wT)>=0)throw Lm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Wa(...e.split("."))._internalPath}catch(r){throw Lm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Lm(n,e,t,r,o){const l=r&&!r.isEmpty(),h=void 0!==o;let y=`Function ${e}() called with invalid data`;t&&(y+=" (via `toFirestore()`)"),y+=". ";let I="";return(l||h)&&(I+=" (found",l&&(I+=` in field ${r}`),h&&(I+=` in document ${o}`),I+=")"),new Se(de.INVALID_ARGUMENT,y+n+I)}function oI(n,e){return n.some(t=>t.isEqual(e))}class dp{constructor(e,t,r,o,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new un(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new IT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Uv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class IT extends dp{data(){return super.data()}}function Uv(n,e){return"string"==typeof e?cp(n,e):e instanceof Wa?e._internalPath:e._delegate._internalPath}class vh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class el extends dp{constructor(e,t,r,o,l,h){super(e,t,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Uv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Vm extends el{data(e={}){return super.data(e)}}class tl{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new vh(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Vm(this._firestore,this._userDataWriter,r.key,r,new vh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Se(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new Vm(r._firestore,r._userDataWriter,h.doc.key,h.doc,new vh(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>o||3!==h.type).map(h=>{const y=new Vm(r._firestore,r._userDataWriter,h.doc.key,h.doc,new vh(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let I=-1,A=-1;return 0!==h.type&&(I=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),1!==h.type&&(l=l.add(h.doc),A=l.indexOf(h.doc.key)),{type:Um(h.type),doc:y,oldIndex:I,newIndex:A}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Um(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function aI(n,e){return n instanceof el&&e instanceof el?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof tl&&e instanceof tl&&n._firestore===e._firestore&&LC(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function uI(n){if(xg(n)&&0===n.explicitOrderBy.length)throw new Se(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Eh{}function Bi(n,...e){for(const t of e)n=t._apply(n);return n}class lI extends Eh{constructor(e,t,r){super(),this.zc=e,this.Hc=t,this.Jc=r,this.type="where"}_apply(e){const t=mc(e.firestore),r=function(o,l,h,y,I,A,R){let N;if(I.isKeyField()){if("array-contains"===A||"array-contains-any"===A)throw new Se(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${A}' queries on documentId().`);if("in"===A||"not-in"===A){fI(R,A);const Q=[];for(const Ie of R)Q.push(hI(y,o,Ie));N={arrayValue:{values:Q}}}else N=hI(y,o,R)}else"in"!==A&&"not-in"!==A&&"array-contains-any"!==A||fI(R,A),N=rI(h,"where",R,"in"===A||"not-in"===A);const G=vi.create(I,A,N);return function(Q,Ie){if(Ie.V()){const Xe=r_(Q);if(null!==Xe&&!Xe.isEqual(Ie.field))throw new Se(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Xe.toString()}' and '${Ie.field.toString()}'`);const Pt=$u(Q);null!==Pt&&Hv(0,Ie.field,Pt)}const He=function(Xe,Pt){for(const Jt of Xe.filters)if(Pt.indexOf(Jt.op)>=0)return Jt.op;return null}(Q,function(Xe){switch(Xe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Ie.op));if(null!==He)throw new Se(de.INVALID_ARGUMENT,He===Ie.op?`Invalid query. You cannot use more than one '${Ie.op.toString()}' filter.`:`Invalid query. You cannot use '${Ie.op.toString()}' filters with '${He.toString()}' filters.`)}(o,G),G}(e._query,0,t,e.firestore._databaseId,this.zc,this.Hc,this.Jc);return new Qr(e.firestore,e.converter,function(o,l){const h=o.filters.concat([l]);return new ju(o.path,o.collectionGroup,o.explicitOrderBy.slice(),h,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class jv extends Eh{constructor(e,t){super(),this.zc=e,this.Yc=t,this.type="orderBy"}_apply(e){const t=function(r,o,l){if(null!==r.startAt)throw new Se(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Se(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new Bu(o,l);return function(y,I){if(null===$u(y)){const A=r_(y);null!==A&&Hv(0,A,I.field)}}(r,h),h}(e._query,this.zc,this.Yc);return new Qr(e.firestore,e.converter,function(r,o){const l=r.explicitOrderBy.concat([o]);return new ju(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Bm extends Eh{constructor(e,t,r){super(),this.type=e,this.Xc=t,this.Zc=r}_apply(e){return new Qr(e.firestore,e.converter,xf(e._query,this.Xc,this.Zc))}}class zC extends Eh{constructor(e,t,r){super(),this.type=e,this.ta=t,this.ea=r}_apply(e){const t=dI(e,this.type,this.ta,this.ea);return new Qr(e.firestore,e.converter,(o=t,new ju((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class ZC extends Eh{constructor(e,t,r){super(),this.type=e,this.ta=t,this.ea=r}_apply(e){const t=dI(e,this.type,this.ta,this.ea);return new Qr(e.firestore,e.converter,(o=t,new ju((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function dI(n,e,t,r){if(t[0]=(0,Dt.m9)(t[0]),t[0]instanceof dp)return function(o,l,h,y,I){if(!y)throw new Se(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const A=[];for(const R of Bd(o))if(R.field.isKeyField())A.push(Ua(l,y.key));else{const N=y.data.field(R.field);if(Jy(N))throw new Se(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+R.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const G=R.field.canonicalString();throw new Se(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${G}' (used as the orderBy) does not exist.`)}A.push(N)}return new Mf(A,I)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=mc(n.firestore);return function(l,h,y,I,A,R){const N=l.explicitOrderBy;if(A.length>N.length)throw new Se(de.INVALID_ARGUMENT,`Too many arguments provided to ${I}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const G=[];for(let Q=0;Q<A.length;Q++){const Ie=A[Q];if(N[Q].field.isKeyField()){if("string"!=typeof Ie)throw new Se(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${I}(), but got a ${typeof Ie}`);if(!Rg(l)&&-1!==Ie.indexOf("/"))throw new Se(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${I}() must be a plain document ID, but '${Ie}' contains a slash.`);const He=l.path.child(zt.fromString(Ie));if(!Je.isDocumentKey(He))throw new Se(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${I}() must result in a valid document path, but '${He}' is not because it contains an odd number of segments.`);const Xe=new Je(He);G.push(Ua(h,Xe))}else{const He=rI(y,I,Ie);G.push(He)}}return new Mf(G,R)}(n._query,n.firestore._databaseId,o,e,t,r)}}function hI(n,e,t){if("string"==typeof(t=(0,Dt.m9)(t))){if(""===t)throw new Se(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rg(e)&&-1!==t.indexOf("/"))throw new Se(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(zt.fromString(t));if(!Je.isDocumentKey(r))throw new Se(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ua(n,new Je(r))}if(t instanceof un)return Ua(n,t._key);throw new Se(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yh(t)}.`)}function fI(n,e){if(!Array.isArray(n)||0===n.length)throw new Se(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Se(de.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Hv(n,e,t){if(!t.isEqual(e))throw new Se(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class $m{convertValue(e,t="none"){switch(Mr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){const r={};return Zl(e.fields,(o,l)=>{r[o]=this.convertValue(l,t)}),r}convertGeoPoint(e){return new Pm(wn(e.latitude),wn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Sg(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Li(e));default:return null}}convertTimestamp(e){const t=Pu(e);return new zr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=zt.fromString(e);mt(D_(r));const o=new sp(r.get(1),r.get(3)),l=new Je(r.popFirst(5));return o.isEqual(t)||Kn(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function hp(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class YC extends $m{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ws(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new un(this.firestore,null,t)}}class pI{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=mc(e)}set(e,t,r){this._verifyNotCommitted();const o=za(e,this._firestore),l=hp(o.converter,t,r),h=Pv(this._dataReader,"WriteBatch.set",o._key,l,null!==o.converter,r);return this._mutations.push(h.toMutation(o._key,pr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const l=za(e,this._firestore);let h;return h="string"==typeof(t=(0,Dt.m9)(t))||t instanceof Wa?Fm(this._dataReader,"WriteBatch.update",l._key,t,r,o):lp(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(h.toMutation(l._key,pr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=za(e,this._firestore);return this._mutations=this._mutations.concat(new $d(t._key,pr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function za(n,e){if((n=(0,Dt.m9)(n)).firestore!==e)throw new Se(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class wh extends $m{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ws(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new un(this.firestore,null,t)}}function mI(n,e,t){n=St(n,un);const r=St(n.firestore,In),o=hp(n.converter,e,t);return Ih(r,[Pv(mc(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,pr.none())])}function eb(n,e,t,...r){n=St(n,un);const o=St(n.firestore,In),l=mc(o);let h;return h="string"==typeof(e=(0,Dt.m9)(e))||e instanceof Wa?Fm(l,"updateDoc",n._key,e,t,r):lp(l,"updateDoc",n._key,e),Ih(o,[h.toMutation(n._key,pr.exists(!0))])}function yI(n,...e){var t,r,o;n=(0,Dt.m9)(n);let l={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||Yw(e[h])||(l=e[h],h++);const y={includeMetadataChanges:l.includeMetadataChanges};if(Yw(e[h])){const N=e[h];e[h]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[h+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[h+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let I,A,R;if(n instanceof un)A=St(n.firestore,In),R=Ql(n._key.path),I={next:N=>{e[h]&&e[h](Gv(A,n,N))},error:e[h+1],complete:e[h+2]};else{const N=St(n,Qr);A=St(N.firestore,In),R=N._query;const G=new wh(A);I={next:Q=>{e[h]&&e[h](new tl(A,G,N,Q))},error:e[h+1],complete:e[h+2]},uI(n._query)}return function(N,G,Q,Ie){const He=new ip(Ie),Xe=new iv(G,He,Q);return N.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return lm(yield mh(N),Xe)})),()=>{He.nc(),N.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return dm(yield mh(N),Xe)}))}}(Hn(A),R,y,I)}function Ih(n,e){return function(t,r){const o=new Sr;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function CC(n,e,t){return mm.apply(this,arguments)}(yield Rm(t),r,o)})),o.promise}(Hn(n),e)}function Gv(n,e,t){const r=t.docs.get(e._key),o=new wh(n);return new el(n,o,e._key,r,new vh(t.hasPendingWrites,t.fromCache),e.converter)}class ib extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=mc(e)}get(e){const t=za(e,this._firestore),r=new YC(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return it();const l=o[0];if(l.isFoundDocument())return new dp(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new dp(this._firestore,r,t._key,null,t.converter);throw it()})}set(e,t,r){const o=za(e,this._firestore),l=hp(o.converter,t,r),h=Pv(this._dataReader,"Transaction.set",o._key,l,null!==o.converter,r);return this._transaction.set(o._key,h),this}update(e,t,r,...o){const l=za(e,this._firestore);let h;return h="string"==typeof(t=(0,Dt.m9)(t))||t instanceof Wa?Fm(this._dataReader,"Transaction.update",l._key,t,r,o):lp(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,h),this}delete(e){const t=za(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=za(e,this._firestore),r=new wh(this._firestore);return super.get(e).then(o=>new el(this._firestore,r,t._key,o._document,new vh(!1,!1),t.converter))}}function s(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Se("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function a(){if("undefined"==typeof Uint8Array)throw new Se("unimplemented","Uint8Arrays are not available in this environment.")}function u(){if(!function wD(){return"undefined"!=typeof atob}())throw new Se("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Nd=Vo.SDK_VERSION,(0,Vo._registerComponent)(new An.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),l=new In(o,new Ky(t.getProvider("auth-internal")),new rT(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC")),(0,Vo.registerVersion)(cE,"3.4.4",n),(0,Vo.registerVersion)(cE,"3.4.4","esm2017")}();class c{constructor(e){this._delegate=e}static fromBase64String(e){return u(),new c(Ws.fromBase64String(e))}static fromUint8Array(e){return a(),new c(Ws.fromUint8Array(e))}toBase64(){return u(),this._delegate.toBase64()}toUint8Array(){return a(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function p(n){return function _(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class E{enableIndexedDbPersistence(e,t){return function ms(n,e){Nv(n=St(n,In));const t=Hn(n),r=n._freezeSettings(),o=new Cm;return Om(t,o,new Dm(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function UC(n){Nv(n=St(n,In));const e=Hn(n),t=n._freezeSettings(),r=new Cm;return Om(e,r,new hT(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function BC(n){if(n._initialized&&!n._terminated)throw new Se(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Sr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!Gs.Pt())return Promise.resolve();const o=r+"main";yield Gs.delete(o)}),function(r){return t.apply(this,arguments)})(Hg(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class w{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof sp||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Od("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Sv(n,e,t,r={}){var o;const l=(n=St(n,ap))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&Od("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,y;if("string"==typeof r.mockUserToken)h=r.mockUserToken,y=Wr.MOCK_USER;else{h=(0,Dt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const I=r.mockUserToken.sub||r.mockUserToken.user_id;if(!I)throw new Se(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Wr(I)}n._authCredentials=new nT(new hE(h,y))}}(this._delegate,e,t,r)}enableNetwork(){return function Rv(n){return function $w(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield bv(n),t=yield jw(n);return e.setNetworkEnabled(!0),function(r){const o=$e(r);return o.Gr.delete(0),Zo(o)}(t)}))}(Hn(n=St(n,In)))}(this._delegate)}disableNetwork(){return function Jw(n){return function Hw(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield bv(n),t=yield jw(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(o){const l=$e(o);l.Gr.add(0),yield oh(l),l.Jr.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Hn(n=St(n,In)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,PC("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function jC(n){return function(e){const t=new Sr;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function fv(n,e){return tp.apply(this,arguments)}(yield Rm(e),t)})),t.promise}(Hn(n=St(n,In)))}(this._delegate)}onSnapshotsInSync(e){return function rb(n,e){return function Ww(n,e){const t=new ip(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield mh(n),o=t,$e(r).io.add(o),void o.next();var r,o})),()=>{t.nc(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield mh(n),o=t,void $e(r).io.delete(o);var r,o}))}}(Hn(n=St(n,In)),Yw(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Se("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new zs(this,FC(this._delegate,e))}catch(t){throw Me(t,"collection()","Firestore.collection()")}}doc(e){try{return new he(this,gc(this._delegate,e))}catch(t){throw Me(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ht(this,function Kw(n,e){if(n=St(n,ap),zw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Se(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Qr(n,null,(t=e,new ju(zt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Me(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function sb(n,e){return function fT(n,e){const t=new Sr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const r=yield(o=n,Mm(o).then(l=>l.datastore));var o;new xC(n.asyncQueue,r,e,t).run()})),t.promise}(Hn(n=St(n,In)),t=>e(new ib(n,t)))}(this._delegate,t=>e(new k(this,t)))}batch(){return Hn(this._delegate),new U(new pI(this._delegate,e=>Ih(this._delegate,e)))}loadBundle(e){return function HC(n,e){const t=Hn(n=St(n,In)),r=new VC;return function pT(n,e,t,r){const o=function(l,h){let y;return y="string"==typeof l?(new TextEncoder).encode(l):l,I=function(I,A){if(I instanceof Uint8Array)return Lw(I,A);if(I instanceof ArrayBuffer)return Lw(new Uint8Array(I),A);if(I instanceof ReadableStream)return I.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(y),new bm(I,h);var I}(t,zf(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function Fw(n,e,t){const r=$e(n);var o;(o=(0,_e.Z)(function*(l,h,y){try{const I=yield h.getMetadata();if(yield function(G,Q){const Ie=$e(G),He=nr(Q.createTime);return Ie.persistence.runTransaction("hasNewerBundle","readonly",Xe=>Ie.Ye.getBundleMetadata(Xe,Q.id)).then(Xe=>!!Xe&&Xe.createTime.compareTo(He)>=0)}(l.localStore,I))return yield h.close(),void y._completeWith((G=I,{taskState:"Success",documentsLoaded:G.totalDocuments,bytesLoaded:G.totalBytes,totalDocuments:G.totalDocuments,totalBytes:G.totalBytes}));y._updateProgress(fh(I));const A=new wC(I,l.localStore,h.k);let R=yield h.Ho();for(;R;){const G=yield A.yo(R);G&&y._updateProgress(G),R=yield h.Ho()}const N=yield A.complete();yield qa(l,N.In,void 0),yield function(G,Q){const Ie=$e(G);return Ie.persistence.runTransaction("Save bundle","readwrite",He=>Ie.Ye.saveBundleMetadata(He,Q))}(l.localStore,I),y._completeWith(N.progress)}catch(I){Od("SyncEngine",`Loading bundle failed with ${I}`),y._failWith(I)}var G}),function(l,h,y){return o.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield Rm(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Xw(n,e){return function gT(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const o=$e(t);return o.persistence.runTransaction("Get named query","readonly",l=>o.Ye.getNamedQuery(l,r))}(yield Tv(n),e)}))}(Hn(n=St(n,In)),e).then(t=>t?new Qr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ht(this,t):null)}}class T extends $m{constructor(e){super(),this.firestore=e}convertBytes(e){return new c(new Ws(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return he.forKey(t,this.firestore,null)}}class k{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new T(e)}get(e){const t=Za(e);return this._delegate.get(t).then(r=>new Ee(this._firestore,new el(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Za(e);return r?(s("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=Za(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=Za(e);return this._delegate.delete(t),this}}class U{constructor(e){this._delegate=e}set(e,t,r){const o=Za(e);return r?(s("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=Za(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=Za(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class z{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Vm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new rt(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=z.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let l=o.get(t);return l||(l=new z(e,new T(e),t),o.set(t,l)),l}}z.INSTANCES=new WeakMap;class he{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new T(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Se("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new he(t,new un(t._delegate,r,new Je(e)))}static forKey(e,t,r){return new he(t,new un(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new zs(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new zs(this.firestore,FC(this._delegate,e))}catch(t){throw Me(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Dt.m9)(e))instanceof un&&Mv(this._delegate,e)}set(e,t){t=s("DocumentReference.set",t);try{return t?mI(this._delegate,e,t):mI(this._delegate,e)}catch(r){throw Me(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?eb(this._delegate,e):eb(this._delegate,e,t,...r)}catch(o){throw Me(o,"updateDoc()","DocumentReference.update()")}}delete(){return function tb(n){return Ih(St(n.firestore,In),[new $d(n._key,pr.none())])}(this._delegate)}onSnapshot(...e){const t=Be(e),r=ze(e,o=>new Ee(this.firestore,new el(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return yI(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function gI(n){n=St(n,un);const e=St(n.firestore,In),t=Hn(e),r=new wh(e);return function Gw(n,e){const t=new Sr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(o,l,h){try{const y=yield function(I,A){const R=$e(I);return R.persistence.runTransaction("read document","readonly",N=>R.Wn.Rn(N,A))}(o,l);y.isFoundDocument()?h.resolve(y):y.isNoDocument()?h.resolve(null):h.reject(new Se(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(y){const I=ch(y,`Failed to get document '${l} from cache`);h.reject(I)}}),function(o,l,h){return r.apply(this,arguments)})(yield Tv(n),e,t);var r})),t.promise}(t,n._key).then(o=>new el(e,r,n._key,o,new vh(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Gm(n){n=St(n,un);const e=St(n.firestore,In);return qw(Hn(e),n._key,{source:"server"}).then(t=>Gv(e,n,t))}(this._delegate):function Hm(n){n=St(n,un);const e=St(n.firestore,In);return qw(Hn(e),n._key).then(t=>Gv(e,n,t))}(this._delegate),t.then(r=>new Ee(this.firestore,new el(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new he(this.firestore,this._delegate.withConverter(e?z.getInstance(this.firestore,e):null))}}function Me(n,e,t){return n.message=n.message.replace(e,t),n}function Be(n){for(const e of n)if("object"==typeof e&&!p(e))return e;return{}}function ze(n,e){var t,r;let o;return o=p(n[0])?n[0]:p(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{o.next&&o.next(e(l))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class Ee{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new he(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return aI(this._delegate,e._delegate)}}class rt extends Ee{data(e){const t=this._delegate.data(e);return function _D(n,e){n||it()}(void 0!==t),t}}class ht{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new T(e)}where(e,t,r){try{return new ht(this.firestore,Bi(this._delegate,function Bv(n,e,t){const r=e,o=Uv("where",n);return new lI(o,r,t)}(e,t,r)))}catch(o){throw Me(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ht(this.firestore,Bi(this._delegate,function WC(n,e="asc"){const t=e,r=Uv("orderBy",n);return new jv(r,t)}(e,t)))}catch(r){throw Me(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ht(this.firestore,Bi(this._delegate,function $v(n){return Av("limit",n),new Bm("limit",n,"F")}(e)))}catch(t){throw Me(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ht(this.firestore,Bi(this._delegate,function jm(n){return Av("limitToLast",n),new Bm("limitToLast",n,"L")}(e)))}catch(t){throw Me(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ht(this.firestore,Bi(this._delegate,function DT(...n){return new zC("startAt",n,!0)}(...e)))}catch(t){throw Me(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ht(this.firestore,Bi(this._delegate,function CT(...n){return new zC("startAfter",n,!1)}(...e)))}catch(t){throw Me(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ht(this.firestore,Bi(this._delegate,function cI(...n){return new ZC("endBefore",n,!0)}(...e)))}catch(t){throw Me(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ht(this.firestore,Bi(this._delegate,function KC(...n){return new ZC("endAt",n,!1)}(...e)))}catch(t){throw Me(t,"endAt()","Query.endAt()")}}isEqual(e){return LC(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function JC(n){n=St(n,Qr);const e=St(n.firestore,In),t=Hn(e),r=new wh(e);return function RC(n,e){const t=new Sr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(o,l,h){try{const y=yield qg(o,l,!0),I=new vo(l,y.zn),A=I.Po(y.documents),R=I.applyChanges(A,!1);h.resolve(R.snapshot)}catch(y){const I=ch(y,`Failed to execute query '${l} against cache`);h.reject(I)}}),function(o,l,h){return r.apply(this,arguments)})(yield Tv(n),e,t);var r})),t.promise}(t,n._query).then(o=>new tl(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function XC(n){n=St(n,Qr);const e=St(n.firestore,In),t=Hn(e),r=new wh(e);return NC(t,n._query,{source:"server"}).then(o=>new tl(e,r,n,o))}(this._delegate):function QC(n){n=St(n,Qr);const e=St(n.firestore,In),t=Hn(e),r=new wh(e);return uI(n._query),NC(t,n._query).then(o=>new tl(e,r,n,o))}(this._delegate),t.then(r=>new Ii(this.firestore,new tl(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Be(e),r=ze(e,o=>new Ii(this.firestore,new tl(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return yI(this._delegate,t,r)}withConverter(e){return new ht(this.firestore,this._delegate.withConverter(e?z.getInstance(this.firestore,e):null))}}class Qt{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new rt(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ii{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ht(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new rt(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Qt(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new rt(this._firestore,r))})}isEqual(e){return aI(this._delegate,e._delegate)}}class zs extends ht{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new he(this.firestore,e):null}doc(e){try{return new he(this.firestore,void 0===e?gc(this._delegate):gc(this._delegate,e))}catch(t){throw Me(t,"doc()","CollectionReference.doc()")}}add(e){return function nb(n,e){const t=St(n.firestore,In),r=gc(n),o=hp(n.converter,e);return Ih(t,[Pv(mc(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,pr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new he(this.firestore,t))}isEqual(e){return Mv(this._delegate,e._delegate)}withConverter(e){return new zs(this.firestore,this._delegate.withConverter(e?z.getInstance(this.firestore,e):null))}}function Za(n){return St(n,un)}class fp{constructor(...e){this._delegate=new Wa(...e)}static documentId(){return new fp(Zr.keyField().canonicalString())}isEqual(e){return(e=(0,Dt.m9)(e))instanceof Wa&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ka{constructor(e){this._delegate=e}static serverTimestamp(){const e=function TT(){return new Fv("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ka(e)}static delete(){const e=function bT(){return new _h("deleteField")}();return e._methodName="FieldValue.delete",new Ka(e)}static arrayUnion(...e){const t=function AT(...n){return new qC("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ka(t)}static arrayRemove(...e){const t=function ST(...n){return new nI("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ka(t)}static increment(e){const t=function MT(n){return new up("increment",n)}(e);return t._methodName="FieldValue.increment",new Ka(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const qv={Firestore:w,GeoPoint:Pm,Timestamp:zr,Blob:c,Transaction:k,WriteBatch:U,DocumentReference:he,DocumentSnapshot:Ee,Query:ht,QueryDocumentSnapshot:rt,QuerySnapshot:Ii,CollectionReference:zs,FieldPath:fp,FieldValue:Ka,setLogLevel:function S(n){!function dE(n){hr.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function zv(n){(function Wv(n,e){n.INTERNAL.registerComponent(new An.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},qv)))})(n,(e,t)=>new w(e,t,new E)),n.registerVersion("@firebase/firestore-compat","0.1.13")}(uf.Z);var Ko=P(7579),Zv=P(6451),Dh=P(5363);function ys(n,e){return(0,Hr.e)((t,r)=>{let o=null,l=0,h=!1;const y=()=>h&&!o&&r.complete();t.subscribe((0,fn.x)(r,I=>{null==o||o.unsubscribe();let A=0;const R=l++;(0,Wt.Xf)(n(I,R)).subscribe(o=(0,fn.x)(r,N=>r.next(e?e(I,N,R,A++):N),()=>{o=null,y()}))},()=>{h=!0,y()}))})}var RS=P(6063);class NS extends Ko.x{constructor(e=1/0,t=1/0,r=RS.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:l,_windowTime:h}=this;t||(r.push(e),!o&&r.push(l.now()+h)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,l=o.slice();for(let h=0;h<l.length&&!e.closed;h+=r?1:2)e.next(l[h]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,l=(o?1:2)*e;if(e<1/0&&l<r.length&&r.splice(0,r.length-l),!o){const h=t.now();let y=0;for(let I=1;I<r.length&&r[I]<=h;I+=2)y=I;y&&r.splice(0,y+1)}}}var OS=P(3099);function NT(n,e,t){var r,o;let l,h=!1;return n&&"object"==typeof n?(l=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(o=n.windowTime)&&void 0!==o?o:1/0,h=!!n.refCount,t=n.scheduler):l=null!=n?n:1/0,(0,OS.B)({connector:()=>new NS(l,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:h})}const vI=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ab=P(5698);function OT(n){return(0,Hr.e)((e,t)=>{let r=!1;e.subscribe((0,fn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function PT(n=kS){return(0,Hr.e)((e,t)=>{let r=!1;e.subscribe((0,fn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function kS(){return new vI}function pp(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Fs((o,l)=>n(o,l,r)):Tu.y,(0,ab.q)(1),t?OT(e):PT(()=>new vI))}var kT=P(576);function FT(n,e){return(0,kT.m)(e)?ys(()=>n,e):ys(()=>n)}var ub=P(9468);P(5867);const VT=new Map,BS={activated:!1,tokenObservers:[]},jS={initialized:!1,enabled:!1};function di(n){return VT.get(n)||BS}function Ya(n,e){VT.set(n,e)}function wI(){return jS}class WS{constructor(e,t,r,o,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=o,o>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new Dt.BH,yield function zS(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Dt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const _s=new Dt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function BT(n){if(!di(n).activated)throw _s.create("use-before-activation",{appName:n.name})}function hb(n,e){return fb.apply(this,arguments)}function fb(){return fb=(0,_e.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});o&&(r["X-Firebase-Client"]=o.getPlatformInfoString());const l={method:"POST",body:JSON.stringify(e),headers:r};let h,y;try{h=yield fetch(n,l)}catch(N){throw _s.create("fetch-network-error",{originalErrorMessage:N.message})}if(200!==h.status)throw _s.create("fetch-status-error",{httpStatus:h.status});try{y=yield h.json()}catch(N){throw _s.create("fetch-parse-error",{originalErrorMessage:N.message})}const I=y.ttl.match(/^([\d.]+)(s)$/);if(!I||!I[2]||isNaN(Number(I[1])))throw _s.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const A=1e3*Number(I[1]),R=Date.now();return{token:y.attestationToken,expireTimeMillis:R+A,issuedAtTimeMillis:R}}),fb.apply(this,arguments)}function JS(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Kv="firebase-app-check-store";let CI=null;function $T(){return CI||(CI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(_s.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Kv,{keyPath:"compositeKey"})}}catch(t){e(_s.create("storage-open",{originalErrorMessage:t.message}))}}),CI)}function pb(){return pb=(0,_e.Z)(function*(n,e){const r=(yield $T()).transaction(Kv,"readwrite"),l=r.objectStore(Kv).put({compositeKey:n,value:e});return new Promise((h,y)=>{l.onsuccess=I=>{h()},r.onerror=I=>{var A;y(_s.create("storage-set",{originalErrorMessage:null===(A=I.target.error)||void 0===A?void 0:A.message}))}})}),pb.apply(this,arguments)}const Yv=new Ls.Yd("@firebase/app-check");function WT(n,e){return(0,Dt.hl)()?function nM(n,e){return function HT(n,e){return pb.apply(this,arguments)}(function qT(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Yv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function zT(){return wI().enabled}function ZT(){return _b.apply(this,arguments)}function _b(){return _b=(0,_e.Z)(function*(){const n=wI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),_b.apply(this,arguments)}const uM={error:"UNKNOWN_ERROR"};function lM(n){return Dt.US.encodeString(JSON.stringify(n),!1)}function bI(n){return vb.apply(this,arguments)}function vb(){return vb=(0,_e.Z)(function*(n,e=!1){const t=n.app;BT(t);const r=di(t);let l,o=r.token;if(!o){const I=yield r.cachedTokenPromise;I&&TI(I)&&(o=I)}if(!e&&o&&TI(o))return{token:o.token};let y,h=!1;if(zT()){r.exchangeTokenPromise||(r.exchangeTokenPromise=hb(JS(t,yield ZT()),n.platformLoggerProvider).then(A=>(r.exchangeTokenPromise=void 0,A)),h=!0);const I=yield r.exchangeTokenPromise;return yield WT(t,I),Ya(t,Object.assign(Object.assign({},r),{token:I})),{token:I.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(I=>(r.exchangeTokenPromise=void 0,I)),h=!0),o=yield r.exchangeTokenPromise}catch(I){"appCheck/throttled"===I.code?Yv.warn(I.message):Yv.error(I),l=I}return o?(y={token:o.token},Ya(t,Object.assign(Object.assign({},r),{token:o})),yield WT(t,o)):y=dM(l),h&&YT(t,y),y}),vb.apply(this,arguments)}function wb(n,e){const t=di(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ya(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function KT(n){const{app:e}=n,t=di(e);let r=t.tokenRefresher;r||(r=function cM(n){const{app:e}=n;return new WS((0,_e.Z)(function*(){let r;if(r=di(e).token?yield bI(n,!0):yield bI(n),r.error)throw r.error}),()=>!0,()=>{const t=di(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ya(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function YT(n,e){const t=di(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function TI(n){return n.expireTimeMillis-Date.now()>0}function dM(n){return{token:lM(uM),error:n}}class hM{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=di(this.app);for(const t of e)wb(this.app,t.next);return Promise.resolve()}}const iA="app-check-internal";!function TM(){(0,Vo._registerComponent)(new An.wA("app-check",n=>function fM(n,e){return new hM(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(iA).initialize()})),(0,Vo._registerComponent)(new An.wA(iA,n=>function pM(n){return{getToken:e=>bI(n,e),addTokenListener:e=>function Eb(n,e,t,r){const{app:o}=n,l=di(o),h={next:t,error:r,type:e};if(Ya(o,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,h]})),l.token&&TI(l.token)){const y=l.token;Promise.resolve().then(()=>{t({token:y.token}),KT(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>KT(n))}(n,"INTERNAL",e),removeTokenListener:e=>wb(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Vo.registerVersion)("@firebase/app-check","0.5.3")}();class bb{constructor(){return(0,pn.vb)("app-check")}}"undefined"!=typeof window&&window;var RM=P(127);const oA=new g.OlP("angularfire2.auth.use-emulator"),aA=new g.OlP("angularfire2.auth.settings"),uA=new g.OlP("angularfire2.auth.tenant-id"),lA=new g.OlP("angularfire2.auth.langugage-code"),cA=new g.OlP("angularfire2.auth.use-device-language"),dA=new g.OlP("angularfire.auth.persistence"),hA=(n,e,t,r,o,l,h,y)=>(0,ui.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const I=e.runOutsideAngular(()=>n.auth());if(t&&I.useEmulator(...t),r&&(I.tenantId=r),I.languageCode=o,l&&I.useDeviceLanguage(),h)for(const[A,R]of Object.entries(h))I.settings[A]=R;return y&&I.setPersistence(y),I},[t,r,o,l,h,y]);let fA=(()=>{class n{constructor(t,r,o,l,h,y,I,A,R,N,G,Q){const Ie=new Ko.x,He=Qe(void 0).pipe((0,Dh.Q)(h.outsideAngular),ys(()=>l.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,389)))),(0,yt.U)(()=>(0,ui.on)(t,l,r)),(0,yt.U)(Xe=>hA(Xe,l,y,A,R,N,I,G)),NT({bufferSize:1,refCount:!1}));if(or(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Qe(null);else{He.pipe(pp()).subscribe();const Pt=He.pipe(ys(xt=>xt.getRedirectResult().then(xn=>xn,()=>null)),pn.iC,NT({bufferSize:1,refCount:!1})),Jt=He.pipe(ys(xt=>new wr.y(xn=>({unsubscribe:l.runOutsideAngular(()=>xt.onAuthStateChanged(Ja=>xn.next(Ja),Ja=>xn.error(Ja),()=>xn.complete()))})))),Dn=He.pipe(ys(xt=>new wr.y(xn=>({unsubscribe:l.runOutsideAngular(()=>xt.onIdTokenChanged(Ja=>xn.next(Ja),Ja=>xn.error(Ja),()=>xn.complete()))}))));this.authState=Pt.pipe(FT(Jt),(0,ub.R)(h.outsideAngular),(0,Dh.Q)(h.insideAngular)),this.user=Pt.pipe(FT(Dn),(0,ub.R)(h.outsideAngular),(0,Dh.Q)(h.insideAngular)),this.idToken=this.user.pipe(ys(xt=>xt?(0,vn.D)(xt.getIdToken()):Qe(null))),this.idTokenResult=this.user.pipe(ys(xt=>xt?(0,vn.D)(xt.getIdTokenResult()):Qe(null))),this.credential=(0,Zv.T)(Pt,Ie,this.authState.pipe(Fs(xt=>!xt))).pipe((0,yt.U)(xt=>(null==xt?void 0:xt.user)?xt:null),(0,ub.R)(h.outsideAngular),(0,Dh.Q)(h.insideAngular))}return(0,ui.pX)(this,He,l,{spy:{apply:(Xe,Pt,Jt)=>{(Xe.startsWith("signIn")||Xe.startsWith("createUser"))&&Jt.then(Dn=>Ie.next(Dn))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ui.Dh),g.LFG(ui.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(pn.HU),g.LFG(oA,8),g.LFG(aA,8),g.LFG(uA,8),g.LFG(lA,8),g.LFG(cA,8),g.LFG(dA,8),g.LFG(bb,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function pA(n,e){return function OM(n,e=of.z){return new wr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function Ab(n,e){return pA(n,e).pipe((0,yt.U)(t=>({payload:t,type:"query"})))}function SI(n,e){return Ab(n,e).pipe(ld(void 0),Cu(),(0,yt.U)(([t,r])=>{const o=r.payload.docChanges(),l=o.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,y)=>{const I=o.find(R=>R.doc.ref.isEqual(h.ref)),A=null==t?void 0:t.payload.docs.find(R=>R.ref.isEqual(h.ref));I&&JSON.stringify(I.doc.metadata)===JSON.stringify(h.metadata)||!I&&A&&JSON.stringify(A.metadata)===JSON.stringify(h.metadata)||l.push({type:"modified",payload:{oldIndex:y,newIndex:y,type:"modified",doc:h}})}),l}))}function gA(n,e,t){return SI(n,t).pipe(bu((r,o)=>function kM(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function FM(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Sb(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Sb(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Sb(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(l=>l.payload),e),[]),function hy(n,e=Tu.y){return n=null!=n?n:ks,(0,Hr.e)((t,r)=>{let o,l=!0;t.subscribe((0,fn.x)(r,h=>{const y=e(h);(l||!n(o,y))&&(l=!1,o=y,r.next(h))}))})}(),(0,yt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function Sb(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function mA(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class yA{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=SI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,yt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(ld(void 0),Cu(),Fs(([r,o])=>o.length>0||!r),(0,yt.U)(([r,o])=>o),pn.iC)}auditTrail(e){return this.stateChanges(e).pipe(bu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=mA(e);return gA(this.query,t,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(e={}){return Ab(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),pn.iC)}get(e){return(0,vn.D)(this.query.get(e)).pipe(pn.iC)}add(e){return this.ref.add(e)}doc(e){return new _A(this.ref.doc(e),this.afs)}}class _A{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:l}=wA(r,t);return new yA(o,l,this.afs)}snapshotChanges(){return function PM(n,e){return pA(n,e).pipe(ld(void 0),Cu(),(0,yt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,yt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,vn.D)(this.ref.get(e)).pipe(pn.iC)}}class LM{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?SI(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Fs(t=>t.length>0),pn.iC):SI(this.query,this.afs.schedulers.outsideAngular).pipe(pn.iC)}auditTrail(e){return this.stateChanges(e).pipe(bu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=mA(e);return gA(this.query,t,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(e={}){return Ab(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),pn.iC)}get(e){return(0,vn.D)(this.query.get(e)).pipe(pn.iC)}}const vA=new g.OlP("angularfire2.enableFirestorePersistence"),EA=new g.OlP("angularfire2.firestore.persistenceSettings"),VM=new g.OlP("angularfire2.firestore.settings"),UM=new g.OlP("angularfire2.firestore.use-emulator");function wA(n,e=(t=>t)){return{query:e(n),ref:n}}let IA=(()=>{class n{constructor(t,r,o,l,h,y,I,A,R,N,G,Q,Ie,He,Xe,Pt,Jt){this.schedulers=I;const Dn=(0,ui.on)(t,y,r),xt=R;N&&hA(Dn,y,G,Ie,He,Xe,Q,Pt),[this.firestore,this.persistenceEnabled$]=(0,ui.cc)(`${Dn.name}.firestore`,"AngularFirestore",Dn.name,()=>{const xn=y.runOutsideAngular(()=>Dn.firestore());if(l&&xn.settings(l),xt&&xn.useEmulator(...xt),o&&!or(h)){const Ja=()=>{try{return(0,vn.D)(xn.enablePersistence(A||void 0).then(()=>!0,()=>!1))}catch(GI){return"undefined"!=typeof console&&console.warn(GI),Qe(!1)}};return[xn,y.runOutsideAngular(Ja)]}return[xn,Qe(!1)]},[l,xt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:h}=wA(o,r),y=this.schedulers.ngZone.run(()=>l);return new yA(y,h,this)}collectionGroup(t,r){const o=r||(h=>h),l=this.firestore.collectionGroup(t);return new LM(o(l),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new _A(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ui.Dh),g.LFG(ui.xv,8),g.LFG(vA,8),g.LFG(VM,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(pn.HU),g.LFG(EA,8),g.LFG(UM,8),g.LFG(fA,8),g.LFG(oA,8),g.LFG(aA,8),g.LFG(uA,8),g.LFG(lA,8),g.LFG(cA,8),g.LFG(dA,8),g.LFG(bb,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),BM=(()=>{class n{constructor(){RM.Z.registerVersion("angularfire",pn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:vA,useValue:!0},{provide:EA,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[IA]}),n})();class Qa extends Ko.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var jM=P(9672);function DA(n,e,t){n?(0,jM.f)(t,n,e):e()}function CA(n){return new wr.y(e=>{(0,Wt.Xf)(n()).subscribe(e)})}var qm=P(515),bA=P(727);function TA(){return(0,Hr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,fn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,l=t;t=null,o&&(!l||o===l)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class GM extends wr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Hr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new bA.w0;const t=this.getSubject();e.add(this.source.subscribe((0,fn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=bA.w0.EMPTY)}return e}refCount(){return TA()(this)}}function Ch(n){return(0,Hr.e)((e,t)=>{let l,r=null,o=!1;r=e.subscribe((0,fn.x)(t,void 0,void 0,h=>{l=(0,Wt.Xf)(n(h,Ch(n)(e))),r?(r.unsubscribe(),r=null,l.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,l.subscribe(t))})}var ji=P(5577);function Qv(n,e){return(0,kT.m)(e)?(0,ji.z)(n,e,1):(0,ji.z)(n,1)}function Mb(n){return n<=0?()=>qm.E:(0,Hr.e)((e,t)=>{let r=[];e.subscribe((0,fn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}var wo=P(8505);class yc{constructor(e,t){this.id=e,this.url=t}}class xb extends yc{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Jv extends yc{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class AA extends yc{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class zM extends yc{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ZM extends yc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class KM extends yc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class YM extends yc{constructor(e,t,r,o,l){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class QM extends yc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JM extends yc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class SA{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class MA{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class XM{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ex{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tx{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nx{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xA{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ot="primary";class rx{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Wm(n){return new rx(n)}const RA="ngNavigationCancelingError";function Rb(n){const e=Error("NavigationCancelingError: "+n);return e[RA]=!0,e}function sx(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let l=0;l<r.length;l++){const h=r[l],y=n[l];if(h.startsWith(":"))o[h.substring(1)]=y;else if(h!==y.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function nl(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let l=0;l<t.length;l++)if(o=t[l],!NA(n[o],e[o]))return!1;return!0}function NA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,l)=>r[l]===o)}return n===e}function OA(n){return Array.prototype.concat.apply([],n)}function PA(n){return n.length>0?n[n.length-1]:null}function Di(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function rl(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,vn.D)(Promise.resolve(n)):Qe(n)}const ux={exact:function LA(n,e,t){if(!mp(n.segments,e.segments)||!MI(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!LA(n.children[r],e.children[r],t))return!1;return!0},subset:VA},kA={exact:function lx(n,e){return nl(n,e)},subset:function cx(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>NA(n[t],e[t]))},ignored:()=>!0};function FA(n,e,t){return ux[t.paths](n.root,e.root,t.matrixParams)&&kA[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function VA(n,e,t){return UA(n,e,e.segments,t)}function UA(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!mp(o,t)||e.hasChildren()||!MI(o,t,r))}if(n.segments.length===t.length){if(!mp(n.segments,t)||!MI(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!VA(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),l=t.slice(n.segments.length);return!!(mp(n.segments,o)&&MI(n.segments,o,r)&&n.children[Ot])&&UA(n.children[Ot],e,l,r)}}function MI(n,e,t){return e.every((r,o)=>kA[t](n[o].parameters,r.parameters))}class gp{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wm(this.queryParams)),this._queryParamMap}toString(){return fx.serialize(this)}}class Ut{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Di(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xI(this)}}class Xv{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Wm(this.parameters)),this._parameterMap}toString(){return GA(this)}}function mp(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class BA{}class jA{parse(e){const t=new Ix(e);return new gp(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${e0(e.root,!0)}`,r=function mx(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${RI(t)}=${RI(o)}`).join("&"):`${RI(t)}=${RI(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),o="string"==typeof e.fragment?`#${function px(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${o}`}}const fx=new jA;function xI(n){return n.segments.map(e=>GA(e)).join("/")}function e0(n,e){if(!n.hasChildren())return xI(n);if(e){const t=n.children[Ot]?e0(n.children[Ot],!1):"",r=[];return Di(n.children,(o,l)=>{l!==Ot&&r.push(`${l}:${e0(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function hx(n,e){let t=[];return Di(n.children,(r,o)=>{o===Ot&&(t=t.concat(e(r,o)))}),Di(n.children,(r,o)=>{o!==Ot&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Ot?[e0(n.children[Ot],!1)]:[`${o}:${e0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ot]?`${xI(n)}/${t[0]}`:`${xI(n)}/(${t.join("//")})`}}function $A(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function RI(n){return $A(n).replace(/%3B/gi,";")}function Nb(n){return $A(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function NI(n){return decodeURIComponent(n)}function HA(n){return NI(n.replace(/\+/g,"%20"))}function GA(n){return`${Nb(n.path)}${function gx(n){return Object.keys(n).map(e=>`;${Nb(e)}=${Nb(n[e])}`).join("")}(n.parameters)}`}const yx=/^[^\/()?;=#]+/;function OI(n){const e=n.match(yx);return e?e[0]:""}const _x=/^[^=?&#]+/,Ex=/^[^&#]+/;class Ix{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ut([],{}):new Ut([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ot]=new Ut(e,t)),r}parseSegment(){const e=OI(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Xv(NI(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=OI(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=OI(this.remaining);o&&(r=o,this.capture(r))}e[NI(t)]=NI(r)}parseQueryParam(e){const t=function vx(n){const e=n.match(_x);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function wx(n){const e=n.match(Ex);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const o=HA(t),l=HA(r);if(e.hasOwnProperty(o)){let h=e[o];Array.isArray(h)||(h=[h],e[o]=h),h.push(l)}else e[o]=l}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=OI(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let l;r.indexOf(":")>-1?(l=r.substr(0,r.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=Ot);const h=this.parseChildren();t[l]=1===Object.keys(h).length?h[Ot]:new Ut([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class qA{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Ob(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Ob(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Pb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Pb(e,this._root).map(t=>t.value)}}function Ob(n,e){if(n===e.value)return e;for(const t of e.children){const r=Ob(n,t);if(r)return r}return null}function Pb(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Pb(n,t);if(r.length)return r.unshift(e),r}return[]}class _c{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function zm(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class WA extends qA{constructor(e,t){super(e),this.snapshot=t,kb(this,e)}toString(){return this.snapshot.toString()}}function zA(n,e){const t=function Dx(n,e){const h=new PI([],{},{},"",{},Ot,e,null,n.root,-1,{});return new KA("",new _c(h,[]))}(n,e),r=new Qa([new Xv("",{})]),o=new Qa({}),l=new Qa({}),h=new Qa({}),y=new Qa(""),I=new Zm(r,o,h,y,l,Ot,e,t.root);return I.snapshot=t.root,new WA(new _c(I,[]),t)}class Zm{constructor(e,t,r,o,l,h,y,I){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=l,this.outlet=h,this.component=y,this._futureSnapshot=I}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,yt.U)(e=>Wm(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,yt.U)(e=>Wm(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ZA(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],l=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(l.component)break;r--}}return function Cx(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class PI{constructor(e,t,r,o,l,h,y,I,A,R,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=l,this.outlet=h,this.component=y,this.routeConfig=I,this._urlSegment=A,this._lastPathIndex=R,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Wm(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wm(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class KA extends qA{constructor(e,t){super(t),this.url=e,kb(this,t)}toString(){return YA(this._root)}}function kb(n,e){e.value._routerState=n,e.children.forEach(t=>kb(n,t))}function YA(n){const e=n.children.length>0?` { ${n.children.map(YA).join(", ")} } `:"";return`${n.value}${e}`}function Fb(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,nl(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),nl(e.params,t.params)||n.params.next(t.params),function ox(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!nl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),nl(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Lb(n,e){const t=nl(n.params,e.params)&&function dx(n,e){return mp(n,e)&&n.every((t,r)=>nl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Lb(n.parent,e.parent))}function t0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function Tx(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return t0(n,r,o);return t0(n,r)})}(n,e,t);return new _c(r,o)}{if(n.shouldAttach(e.value)){const l=n.retrieve(e.value);if(null!==l){const h=l.route;return h.value._futureSnapshot=e.value,h.children=e.children.map(y=>t0(n,y)),h}}const r=function Ax(n){return new Zm(new Qa(n.url),new Qa(n.params),new Qa(n.queryParams),new Qa(n.fragment),new Qa(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(l=>t0(n,l));return new _c(r,o)}}function kI(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function n0(n){return"object"==typeof n&&null!=n&&n.outlets}function Vb(n,e,t,r,o){let l={};return r&&Di(r,(h,y)=>{l[y]=Array.isArray(h)?h.map(I=>`${I}`):`${h}`}),new gp(t.root===n?e:QA(t.root,n,e),l,o)}function QA(n,e,t){const r={};return Di(n.children,(o,l)=>{r[l]=o===e?t:QA(o,e,t)}),new Ut(n.segments,r)}class JA{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&kI(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(n0);if(o&&o!==PA(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ub{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function XA(n,e,t){if(n||(n=new Ut([],{})),0===n.segments.length&&n.hasChildren())return FI(n,e,t);const r=function Ox(n,e,t){let r=0,o=e;const l={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return l;const h=n.segments[o],y=t[r];if(n0(y))break;const I=`${y}`,A=r<t.length-1?t[r+1]:null;if(o>0&&void 0===I)break;if(I&&A&&"object"==typeof A&&void 0===A.outlets){if(!tS(I,A,h))return l;r+=2}else{if(!tS(I,{},h))return l;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const l=new Ut(n.segments.slice(0,r.pathIndex),{});return l.children[Ot]=new Ut(n.segments.slice(r.pathIndex),n.children),FI(l,0,o)}return r.match&&0===o.length?new Ut(n.segments,{}):r.match&&!n.hasChildren()?Bb(n,e,t):r.match?FI(n,0,o):Bb(n,e,t)}function FI(n,e,t){if(0===t.length)return new Ut(n.segments,{});{const r=function Nx(n){return n0(n[0])?n[0].outlets:{[Ot]:n}}(t),o={};return Di(r,(l,h)=>{"string"==typeof l&&(l=[l]),null!==l&&(o[h]=XA(n.children[h],e,l))}),Di(n.children,(l,h)=>{void 0===r[h]&&(o[h]=l)}),new Ut(n.segments,o)}}function Bb(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const l=t[o];if(n0(l)){const I=Px(l.outlets);return new Ut(r,I)}if(0===o&&kI(t[0])){r.push(new Xv(n.segments[e].path,eS(t[0]))),o++;continue}const h=n0(l)?l.outlets[Ot]:`${l}`,y=o<t.length-1?t[o+1]:null;h&&y&&kI(y)?(r.push(new Xv(h,eS(y))),o+=2):(r.push(new Xv(h,{})),o++)}return new Ut(r,{})}function Px(n){const e={};return Di(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Bb(new Ut([],{}),0,t))}),e}function eS(n){const e={};return Di(n,(t,r)=>e[r]=`${t}`),e}function tS(n,e,t){return n==t.path&&nl(e,t.parameters)}class Fx{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Fb(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=zm(t);e.children.forEach(l=>{const h=l.value.outlet;this.deactivateRoutes(l,o[h],r),delete o[h]}),Di(o,(l,h)=>{this.deactivateRouteAndItsChildren(l,r)})}deactivateRoutes(e,t,r){const o=e.value,l=t?t.value:null;if(o===l)if(o.component){const h=r.getContext(o.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else l&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,l=zm(e);for(const h of Object.keys(l))this.deactivateRouteAndItsChildren(l[h],o);if(r&&r.outlet){const h=r.outlet.detach(),y=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:h,route:e,contexts:y})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,l=zm(e);for(const h of Object.keys(l))this.deactivateRouteAndItsChildren(l[h],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=zm(t);e.children.forEach(l=>{this.activateRoutes(l,o[l.value.outlet],r),this.forwardEvent(new nx(l.value.snapshot))}),e.children.length&&this.forwardEvent(new ex(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,l=t?t.value:null;if(Fb(o),o===l)if(o.component){const h=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const h=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const y=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),h.children.onOutletReAttached(y.contexts),h.attachRef=y.componentRef,h.route=y.route.value,h.outlet&&h.outlet.attach(y.componentRef,y.route.value),Fb(y.route.value),this.activateChildRoutes(e,null,h.children)}else{const y=function Lx(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),I=y?y.module.componentFactoryResolver:null;h.attachRef=null,h.route=o,h.resolver=I,h.outlet&&h.outlet.activateWith(o,I),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}class jb{constructor(e,t){this.routes=e,this.module=t}}function bh(n){return"function"==typeof n}function yp(n){return n instanceof gp}const r0=Symbol("INITIAL_VALUE");function s0(){return ys(n=>function $M(...n){const e=(0,xs.yG)(n),t=(0,xs.jO)(n),{args:r,keys:o}=Ms(n);if(0===r.length)return(0,vn.D)([],e);const l=new wr.y(function HM(n,e,t=Tu.y){return r=>{DA(e,()=>{const{length:o}=n,l=new Array(o);let h=o,y=o;for(let I=0;I<o;I++)DA(e,()=>{const A=(0,vn.D)(n[I],e);let R=!1;A.subscribe((0,fn.x)(r,N=>{l[I]=N,R||(R=!0,y--),y||r.next(t(l.slice()))},()=>{--h||r.complete()}))},r)},r)}}(r,e,o?h=>hu(o,h):Tu.y));return t?l.pipe(_l(t)):l}(n.map(e=>e.pipe((0,ab.q)(1),ld(r0)))).pipe(bu((e,t)=>{let r=!1;return t.reduce((o,l,h)=>o!==r0?o:(l===r0&&(r=!0),r||!1!==l&&h!==t.length-1&&!yp(l)?o:l),e)},r0),Fs(e=>e!==r0),(0,yt.U)(e=>yp(e)?e:!0===e),(0,ab.q)(1)))}class Hx{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new o0,this.attachRef=null}}class o0{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Hx,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let nS=(()=>{class n{constructor(t,r,o,l,h){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=l||Ot,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const h=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),y=this.parentContexts.getOrCreateContext(this.name).children,I=new Gx(t,y,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,I),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(o0),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Gx{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Zm?this.route:e===o0?this.childContexts:this.parent.get(e,t)}}let rS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},directives:[nS],encapsulation:2}),n})();function iS(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];qx(r,Wx(e,r))}}function qx(n,e){n.children&&iS(n.children,e)}function Wx(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function $b(n){const e=n.children&&n.children.map($b),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ot&&(t.component=rS),t}function Yo(n){return n.outlet||Ot}function sS(n,e){const t=n.filter(r=>Yo(r)===e);return t.push(...n.filter(r=>Yo(r)!==e)),t}const oS={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function LI(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},oS):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const l=(e.matcher||sx)(t,n,e);if(!l)return Object.assign({},oS);const h={};Di(l.posParams,(I,A)=>{h[A]=I.path});const y=l.consumed.length>0?Object.assign(Object.assign({},h),l.consumed[l.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:l.consumed,lastChild:l.consumed.length,parameters:y,positionalParamSegments:null!==(r=l.posParams)&&void 0!==r?r:{}}}function VI(n,e,t,r,o="corrected"){if(t.length>0&&function Kx(n,e,t){return t.some(r=>UI(n,e,r)&&Yo(r)!==Ot)}(n,t,r)){const h=new Ut(e,function Zx(n,e,t,r){const o={};o[Ot]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const l of t)if(""===l.path&&Yo(l)!==Ot){const h=new Ut([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,o[Yo(l)]=h}return o}(n,e,r,new Ut(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function Yx(n,e,t){return t.some(r=>UI(n,e,r))}(n,t,r)){const h=new Ut(n.segments,function zx(n,e,t,r,o,l){const h={};for(const y of r)if(UI(n,t,y)&&!o[Yo(y)]){const I=new Ut([],{});I._sourceSegment=n,I._segmentIndexShift="legacy"===l?n.segments.length:e.length,h[Yo(y)]=I}return Object.assign(Object.assign({},o),h)}(n,e,t,r,n.children,o));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const l=new Ut(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}function UI(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function aS(n,e,t,r){return!!(Yo(n)===r||r!==Ot&&UI(e,t,n))&&("**"===n.path||LI(e,n,t).matched)}function uS(n,e,t){return 0===e.length&&!n.children[t]}class a0{constructor(e){this.segmentGroup=e||null}}class lS{constructor(e){this.urlTree=e}}function BI(n){return new wr.y(e=>e.error(new a0(n)))}function cS(n){return new wr.y(e=>e.error(new lS(n)))}function Qx(n){return new wr.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class eR{constructor(e,t,r,o,l){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=l,this.allowRedirects=!0,this.ngModule=e.get(g.h0i)}apply(){const e=VI(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ut(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ot).pipe((0,yt.U)(l=>this.createUrlTree(Hb(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ch(l=>{if(l instanceof lS)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof a0?this.noMatchError(l):l}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ot).pipe((0,yt.U)(o=>this.createUrlTree(Hb(o),e.queryParams,e.fragment))).pipe(Ch(o=>{throw o instanceof a0?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Ut([],{[Ot]:e}):e;return new gp(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,yt.U)(l=>new Ut([],l))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const l of Object.keys(r.children))"primary"===l?o.unshift(l):o.push(l);return(0,vn.D)(o).pipe(Qv(l=>{const h=r.children[l],y=sS(t,l);return this.expandSegmentGroup(e,y,h,l).pipe((0,yt.U)(I=>({segment:I,outlet:l})))}),bu((l,h)=>(l[h.outlet]=h.segment,l),{}),function qM(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Fs((o,l)=>n(o,l,r)):Tu.y,Mb(1),t?OT(e):PT(()=>new vI))}())}expandSegment(e,t,r,o,l,h){return(0,vn.D)(r).pipe(Qv(y=>this.expandSegmentAgainstRoute(e,t,r,y,o,l,h).pipe(Ch(A=>{if(A instanceof a0)return Qe(null);throw A}))),pp(y=>!!y),Ch((y,I)=>{if(y instanceof vI||"EmptyError"===y.name){if(uS(t,o,l))return Qe(new Ut([],{}));throw new a0(t)}throw y}))}expandSegmentAgainstRoute(e,t,r,o,l,h,y){return aS(o,t,l,h)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,l,h):y&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,l,h):BI(t):BI(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,l,h){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,l,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const l=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?cS(l):this.lineralizeSegments(r,l).pipe((0,ji.z)(h=>{const y=new Ut(h,{});return this.expandSegment(e,y,t,h,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,l,h){const{matched:y,consumedSegments:I,lastChild:A,positionalParamSegments:R}=LI(t,o,l);if(!y)return BI(t);const N=this.applyRedirectCommands(I,o.redirectTo,R);return o.redirectTo.startsWith("/")?cS(N):this.lineralizeSegments(o,N).pipe((0,ji.z)(G=>this.expandSegment(e,t,r,G.concat(l.slice(A)),h,!1)))}matchSegmentAgainstRoute(e,t,r,o,l){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Qe(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,yt.U)(G=>(r._loadedConfig=G,new Ut(o,{})))):Qe(new Ut(o,{}));const{matched:h,consumedSegments:y,lastChild:I}=LI(t,r,o);if(!h)return BI(t);const A=o.slice(I);return this.getChildConfig(e,r,o).pipe((0,ji.z)(N=>{const G=N.module,Q=N.routes,{segmentGroup:Ie,slicedSegments:He}=VI(t,y,A,Q),Xe=new Ut(Ie.segments,Ie.children);if(0===He.length&&Xe.hasChildren())return this.expandChildren(G,Q,Xe).pipe((0,yt.U)(xt=>new Ut(y,xt)));if(0===Q.length&&0===He.length)return Qe(new Ut(y,{}));const Pt=Yo(r)===l;return this.expandSegment(G,Xe,Q,He,Pt?Ot:l,!0).pipe((0,yt.U)(Dn=>new Ut(y.concat(Dn.segments),Dn.children)))}))}getChildConfig(e,t,r){return t.children?Qe(new jb(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Qe(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,ji.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,yt.U)(l=>(t._loadedConfig=l,l))):function Jx(n){return new wr.y(e=>e.error(Rb(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):Qe(new jb([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;if(!o||0===o.length)return Qe(!0);const l=o.map(h=>{const y=e.get(h);let I;if(function Ux(n){return n&&bh(n.canLoad)}(y))I=y.canLoad(t,r);else{if(!bh(y))throw new Error("Invalid CanLoad guard");I=y(t,r)}return rl(I)});return Qe(l).pipe(s0(),(0,wo.b)(h=>{if(!yp(h))return;const y=Rb(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw y.url=h,y}),(0,yt.U)(h=>!0===h))}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return Qe(r);if(o.numberOfChildren>1||!o.children[Ot])return Qx(e.redirectTo);o=o.children[Ot]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const l=this.createSegmentGroup(e,t.root,r,o);return new gp(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Di(e,(o,l)=>{if("string"==typeof o&&o.startsWith(":")){const y=o.substring(1);r[l]=t[y]}else r[l]=o}),r}createSegmentGroup(e,t,r,o){const l=this.createSegments(e,t.segments,r,o);let h={};return Di(t.children,(y,I)=>{h[I]=this.createSegmentGroup(e,y,r,o)}),new Ut(l,h)}createSegments(e,t,r,o){return t.map(l=>l.path.startsWith(":")?this.findPosParam(e,l,o):this.findOrReturn(l,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function Hb(n){const e={};for(const r of Object.keys(n.children)){const l=Hb(n.children[r]);(l.segments.length>0||l.hasChildren())&&(e[r]=l)}return function tR(n){if(1===n.numberOfChildren&&n.children[Ot]){const e=n.children[Ot];return new Ut(n.segments.concat(e.segments),e.children)}return n}(new Ut(n.segments,e))}class dS{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class jI{constructor(e,t){this.component=e,this.route=t}}function rR(n,e,t){const r=n._root;return u0(r,e?e._root:null,t,[r.value])}function $I(n,e,t){const r=function sR(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function u0(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const l=zm(e);return n.children.forEach(h=>{(function oR(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,h=e?e.value:null,y=t?t.getContext(n.value.outlet):null;if(h&&l.routeConfig===h.routeConfig){const I=function aR(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!mp(n.url,e.url);case"pathParamsOrQueryParamsChange":return!mp(n.url,e.url)||!nl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Lb(n,e)||!nl(n.queryParams,e.queryParams);default:return!Lb(n,e)}}(h,l,l.routeConfig.runGuardsAndResolvers);I?o.canActivateChecks.push(new dS(r)):(l.data=h.data,l._resolvedData=h._resolvedData),u0(n,e,l.component?y?y.children:null:t,r,o),I&&y&&y.outlet&&y.outlet.isActivated&&o.canDeactivateChecks.push(new jI(y.outlet.component,h))}else h&&l0(e,y,o),o.canActivateChecks.push(new dS(r)),u0(n,null,l.component?y?y.children:null:t,r,o)})(h,l[h.value.outlet],t,r.concat([h.value]),o),delete l[h.value.outlet]}),Di(l,(h,y)=>l0(h,t.getContext(y),o)),o}function l0(n,e,t){const r=zm(n),o=n.value;Di(r,(l,h)=>{l0(l,o.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new jI(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class mR{}function hS(n){return new wr.y(e=>e.error(n))}class _R{constructor(e,t,r,o,l,h){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=h}recognize(){const e=VI(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ot);if(null===t)return null;const r=new PI([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ot,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new _c(r,t),l=new KA(this.url,o);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(e){const t=e.value,r=ZA(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const l of Object.keys(t.children)){const h=t.children[l],y=sS(e,l),I=this.processSegmentGroup(y,h,l);if(null===I)return null;r.push(...I)}const o=fS(r);return function vR(n){n.sort((e,t)=>e.value.outlet===Ot?-1:t.value.outlet===Ot?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const l of e){const h=this.processSegmentAgainstRoute(l,t,r,o);if(null!==h)return h}return uS(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!aS(e,t,r,o))return null;let l,h=[],y=[];if("**"===e.path){const Q=r.length>0?PA(r).parameters:{};l=new PI(r,Q,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,mS(e),Yo(e),e.component,e,pS(t),gS(t)+r.length,yS(e))}else{const Q=LI(t,e,r);if(!Q.matched)return null;h=Q.consumedSegments,y=r.slice(Q.lastChild),l=new PI(h,Q.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,mS(e),Yo(e),e.component,e,pS(t),gS(t)+h.length,yS(e))}const I=function ER(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:A,slicedSegments:R}=VI(t,h,y,I.filter(Q=>void 0===Q.redirectTo),this.relativeLinkResolution);if(0===R.length&&A.hasChildren()){const Q=this.processChildren(I,A);return null===Q?null:[new _c(l,Q)]}if(0===I.length&&0===R.length)return[new _c(l,[])];const N=Yo(e)===o,G=this.processSegment(I,A,R,N?Ot:o);return null===G?null:[new _c(l,G)]}}function wR(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function fS(n){const e=[],t=new Set;for(const r of n){if(!wR(r)){e.push(r);continue}const o=e.find(l=>r.value.routeConfig===l.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=fS(r.children);e.push(new _c(r.value,o))}return e.filter(r=>!t.has(r))}function pS(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function gS(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function mS(n){return n.data||{}}function yS(n){return n.resolve||{}}function _S(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Gb(n){return ys(e=>{const t=n(e);return t?(0,vn.D)(t).pipe((0,yt.U)(()=>e)):Qe(e)})}class MR extends class SR{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const qb=new g.OlP("ROUTES");class vS{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,yt.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(t);const h=l.create(e);return new jb(OA(h.injector.get(qb,void 0,g.XFs.Self|g.XFs.Optional)).map($b),h)}),Ch(l=>{throw t._loader$=void 0,l}));return t._loader$=new GM(o,()=>new Ko.x).pipe(TA()),t._loader$}loadModuleFactory(e){return rl(e()).pipe((0,ji.z)(t=>t instanceof g.YKP?Qe(t):(0,vn.D)(this.compiler.compileModuleAsync(t))))}}class RR{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function NR(n){throw n}function OR(n,e,t){return e.parse("/")}function ES(n,e){return Qe(null)}const PR={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kR={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Io=(()=>{class n{constructor(t,r,o,l,h,y,I){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=l,this.config=I,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ko.x,this.errorHandler=NR,this.malformedUriErrorHandler=OR,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ES,afterPreactivation:ES},this.urlHandlingStrategy=new RR,this.routeReuseStrategy=new MR,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(g.h0i),this.console=h.get(g.c2e);const N=h.get(g.R0b);this.isNgZoneEnabled=N instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(I),this.currentUrlTree=function ax(){return new gp(new Ut([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new vS(h,y,G=>this.triggerEvent(new SA(G)),G=>this.triggerEvent(new MA(G))),this.routerState=zA(this.currentUrlTree,this.rootComponentType),this.transitions=new Qa({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Fs(o=>0!==o.id),(0,yt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ys(o=>{let l=!1,h=!1;return Qe(o).pipe((0,wo.b)(y=>{this.currentNavigation={id:y.id,initialUrl:y.currentRawUrl,extractedUrl:y.extractedUrl,trigger:y.source,extras:y.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ys(y=>{const I=this.browserUrlTree.toString(),A=!this.navigated||y.extractedUrl.toString()!==I||I!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||A)&&this.urlHandlingStrategy.shouldProcessUrl(y.rawUrl))return HI(y.source)&&(this.browserUrlTree=y.extractedUrl),Qe(y).pipe(ys(N=>{const G=this.transitions.getValue();return r.next(new xb(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),G!==this.transitions.getValue()?qm.E:Promise.resolve(N)}),function nR(n,e,t,r){return ys(o=>function Xx(n,e,t,r,o){return new eR(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,yt.U)(l=>Object.assign(Object.assign({},o),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,wo.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function IR(n,e,t,r,o){return(0,ji.z)(l=>function yR(n,e,t,r,o="emptyOnly",l="legacy"){try{const h=new _R(n,e,t,r,o,l).recognize();return null===h?hS(new mR):Qe(h)}catch(h){return hS(h)}}(n,e,l.urlAfterRedirects,t(l.urlAfterRedirects),r,o).pipe((0,yt.U)(h=>Object.assign(Object.assign({},l),{targetSnapshot:h}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,wo.b)(N=>{if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const Q=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(Q,N)}this.browserUrlTree=N.urlAfterRedirects}const G=new ZM(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(G)}));if(A&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:G,extractedUrl:Q,source:Ie,restoredState:He,extras:Xe}=y,Pt=new xb(G,this.serializeUrl(Q),Ie,He);r.next(Pt);const Jt=zA(Q,this.rootComponentType).snapshot;return Qe(Object.assign(Object.assign({},y),{targetSnapshot:Jt,urlAfterRedirects:Q,extras:Object.assign(Object.assign({},Xe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=y.rawUrl,y.resolve(null),qm.E}),Gb(y=>{const{targetSnapshot:I,id:A,extractedUrl:R,rawUrl:N,extras:{skipLocationChange:G,replaceUrl:Q}}=y;return this.hooks.beforePreactivation(I,{navigationId:A,appliedUrlTree:R,rawUrlTree:N,skipLocationChange:!!G,replaceUrl:!!Q})}),(0,wo.b)(y=>{const I=new KM(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(I)}),(0,yt.U)(y=>Object.assign(Object.assign({},y),{guards:rR(y.targetSnapshot,y.currentSnapshot,this.rootContexts)})),function uR(n,e){return(0,ji.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:l,canDeactivateChecks:h}}=t;return 0===h.length&&0===l.length?Qe(Object.assign(Object.assign({},t),{guardsResult:!0})):function lR(n,e,t,r){return(0,vn.D)(n).pipe((0,ji.z)(o=>function gR(n,e,t,r,o){const l=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return l&&0!==l.length?Qe(l.map(y=>{const I=$I(y,e,o);let A;if(function $x(n){return n&&bh(n.canDeactivate)}(I))A=rl(I.canDeactivate(n,e,t,r));else{if(!bh(I))throw new Error("Invalid CanDeactivate guard");A=rl(I(n,e,t,r))}return A.pipe(pp())})).pipe(s0()):Qe(!0)}(o.component,o.route,t,e,r)),pp(o=>!0!==o,!0))}(h,r,o,n).pipe((0,ji.z)(y=>y&&function Vx(n){return"boolean"==typeof n}(y)?function cR(n,e,t,r){return(0,vn.D)(e).pipe(Qv(o=>Ra(function hR(n,e){return null!==n&&e&&e(new XM(n)),Qe(!0)}(o.route.parent,r),function dR(n,e){return null!==n&&e&&e(new tx(n)),Qe(!0)}(o.route,r),function pR(n,e,t){const r=e[e.length-1],l=e.slice(0,e.length-1).reverse().map(h=>function iR(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>CA(()=>Qe(h.guards.map(I=>{const A=$I(I,h.node,t);let R;if(function jx(n){return n&&bh(n.canActivateChild)}(A))R=rl(A.canActivateChild(r,n));else{if(!bh(A))throw new Error("Invalid CanActivateChild guard");R=rl(A(r,n))}return R.pipe(pp())})).pipe(s0())));return Qe(l).pipe(s0())}(n,o.path,t),function fR(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Qe(!0);const o=r.map(l=>CA(()=>{const h=$I(l,e,t);let y;if(function Bx(n){return n&&bh(n.canActivate)}(h))y=rl(h.canActivate(e,n));else{if(!bh(h))throw new Error("Invalid CanActivate guard");y=rl(h(e,n))}return y.pipe(pp())}));return Qe(o).pipe(s0())}(n,o.route,t))),pp(o=>!0!==o,!0))}(r,l,n,e):Qe(y)),(0,yt.U)(y=>Object.assign(Object.assign({},t),{guardsResult:y})))})}(this.ngModule.injector,y=>this.triggerEvent(y)),(0,wo.b)(y=>{if(yp(y.guardsResult)){const A=Rb(`Redirecting to "${this.serializeUrl(y.guardsResult)}"`);throw A.url=y.guardsResult,A}const I=new YM(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot,!!y.guardsResult);this.triggerEvent(I)}),Fs(y=>!!y.guardsResult||(this.restoreHistory(y),this.cancelNavigationTransition(y,""),!1)),Gb(y=>{if(y.guards.canActivateChecks.length)return Qe(y).pipe((0,wo.b)(I=>{const A=new QM(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);this.triggerEvent(A)}),ys(I=>{let A=!1;return Qe(I).pipe(function DR(n,e){return(0,ji.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return Qe(t);let l=0;return(0,vn.D)(o).pipe(Qv(h=>function CR(n,e,t,r){return function bR(n,e,t,r){const o=_S(n);if(0===o.length)return Qe({});const l={};return(0,vn.D)(o).pipe((0,ji.z)(h=>function TR(n,e,t,r){const o=$I(n,e,r);return rl(o.resolve?o.resolve(e,t):o(e,t))}(n[h],e,t,r).pipe((0,wo.b)(y=>{l[h]=y}))),Mb(1),(0,ji.z)(()=>_S(l).length===o.length?Qe(l):qm.E))}(n._resolve,n,e,r).pipe((0,yt.U)(l=>(n._resolvedData=l,n.data=Object.assign(Object.assign({},n.data),ZA(n,t).resolve),null)))}(h.route,r,n,e)),(0,wo.b)(()=>l++),Mb(1),(0,ji.z)(h=>l===o.length?Qe(t):qm.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,wo.b)({next:()=>A=!0,complete:()=>{A||(this.restoreHistory(I),this.cancelNavigationTransition(I,"At least one route resolver didn't emit any value."))}}))}),(0,wo.b)(I=>{const A=new JM(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);this.triggerEvent(A)}))}),Gb(y=>{const{targetSnapshot:I,id:A,extractedUrl:R,rawUrl:N,extras:{skipLocationChange:G,replaceUrl:Q}}=y;return this.hooks.afterPreactivation(I,{navigationId:A,appliedUrlTree:R,rawUrlTree:N,skipLocationChange:!!G,replaceUrl:!!Q})}),(0,yt.U)(y=>{const I=function bx(n,e,t){const r=t0(n,e._root,t?t._root:void 0);return new WA(r,e)}(this.routeReuseStrategy,y.targetSnapshot,y.currentRouterState);return Object.assign(Object.assign({},y),{targetRouterState:I})}),(0,wo.b)(y=>{this.currentUrlTree=y.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(y.urlAfterRedirects,y.rawUrl),this.routerState=y.targetRouterState,"deferred"===this.urlUpdateStrategy&&(y.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,y),this.browserUrlTree=y.urlAfterRedirects)}),((n,e,t)=>(0,yt.U)(r=>(new Fx(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,y=>this.triggerEvent(y)),(0,wo.b)({next(){l=!0},complete(){l=!0}}),function WM(n){return(0,Hr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var y;l||h||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(y=this.currentNavigation)||void 0===y?void 0:y.id)===o.id&&(this.currentNavigation=null)}),Ch(y=>{if(h=!0,function ix(n){return n&&n[RA]}(y)){const I=yp(y.url);I||(this.navigated=!0,this.restoreHistory(o,!0));const A=new AA(o.id,this.serializeUrl(o.extractedUrl),y.message);r.next(A),I?setTimeout(()=>{const R=this.urlHandlingStrategy.merge(y.url,this.rawUrlTree),N={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||HI(o.source)};this.scheduleNavigation(R,"imperative",null,N,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const I=new zM(o.id,this.serializeUrl(o.extractedUrl),y);r.next(I);try{o.resolve(this.errorHandler(y))}catch(A){o.reject(A)}}return qm.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const l={replaceUrl:!0},h=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(h){const I=Object.assign({},h);delete I.navigationId,delete I.\u0275routerPageId,0!==Object.keys(I).length&&(l.state=I)}const y=this.parseUrl(t.url);this.scheduleNavigation(y,r,h,l)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){iS(t),this.config=t.map($b),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:l,fragment:h,queryParamsHandling:y,preserveFragment:I}=r,A=o||this.routerState.root,R=I?this.currentUrlTree.fragment:h;let N=null;switch(y){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=l||null}return null!==N&&(N=this.removeEmptyProps(N)),function Sx(n,e,t,r,o){if(0===t.length)return Vb(e.root,e.root,e,r,o);const l=function Mx(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new JA(!0,0,n);let e=0,t=!1;const r=n.reduce((o,l,h)=>{if("object"==typeof l&&null!=l){if(l.outlets){const y={};return Di(l.outlets,(I,A)=>{y[A]="string"==typeof I?I.split("/"):I}),[...o,{outlets:y}]}if(l.segmentPath)return[...o,l.segmentPath]}return"string"!=typeof l?[...o,l]:0===h?(l.split("/").forEach((y,I)=>{0==I&&"."===y||(0==I&&""===y?t=!0:".."===y?e++:""!=y&&o.push(y))}),o):[...o,l]},[]);return new JA(t,e,r)}(t);if(l.toRoot())return Vb(e.root,new Ut([],{}),e,r,o);const h=function xx(n,e,t){if(n.isAbsolute)return new Ub(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const l=t.snapshot._urlSegment;return new Ub(l,l===e.root,0)}const r=kI(n.commands[0])?0:1;return function Rx(n,e,t){let r=n,o=e,l=t;for(;l>o;){if(l-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new Ub(r,!1,o-l)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(l,e,n),y=h.processChildren?FI(h.segmentGroup,h.index,l.commands):XA(h.segmentGroup,h.index,l.commands);return Vb(h.segmentGroup,y,e,r,o)}(A,this.currentUrlTree,t,N,null!=R?R:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=yp(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function FR(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},PR):!1===r?Object.assign({},kR):r,yp(t))return FA(this.currentUrlTree,t,o);const l=this.parseUrl(t);return FA(this.currentUrlTree,l,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const l=t[o];return null!=l&&(r[o]=l),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Jv(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,l,h){var y,I,A;if(this.disposed)return Promise.resolve(!1);const R=this.transitions.value,N=HI(r)&&R&&!HI(R.source),G=R.rawUrl.toString()===t.toString(),Q=R.id===(null===(y=this.currentNavigation)||void 0===y?void 0:y.id);if(N&&G&&Q)return Promise.resolve(!0);let He,Xe,Pt;h?(He=h.resolve,Xe=h.reject,Pt=h.promise):Pt=new Promise((xt,xn)=>{He=xt,Xe=xn});const Jt=++this.navigationId;let Dn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),Dn=o&&o.\u0275routerPageId?o.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(I=this.browserPageId)&&void 0!==I?I:0:(null!==(A=this.browserPageId)&&void 0!==A?A:0)+1):Dn=0,this.setTransition({id:Jt,targetPageId:Dn,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:l,resolve:He,reject:Xe,promise:Pt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Pt.catch(xt=>Promise.reject(xt))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),l=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",l):this.location.go(o,"",l)}restoreHistory(t,r=!1){var o,l;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===h?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new AA(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function HI(n){return"imperative"!==n}class wS{}class IS{preload(e,t){return Qe(null)}}let DS=(()=>{class n{constructor(t,r,o,l){this.router=t,this.injector=o,this.preloadingStrategy=l,this.loader=new vS(o,r,I=>t.triggerEvent(new SA(I)),I=>t.triggerEvent(new MA(I)))}setUpPreloading(){this.subscription=this.router.events.pipe(Fs(t=>t instanceof Jv),Qv(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(g.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const l of r)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const h=l._loadedConfig;o.push(this.processRoutes(h.module,h.routes))}else l.loadChildren&&!l.canLoad?o.push(this.preloadConfig(t,l)):l.children&&o.push(this.processRoutes(t,l.children));return(0,vn.D)(o).pipe((0,Du.J)(),(0,yt.U)(l=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Qe(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,ji.z)(l=>(r._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Io),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(wS))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Zb=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof xb?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Jv&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof xA&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new xA(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const _p=new g.OlP("ROUTER_CONFIGURATION"),CS=new g.OlP("ROUTER_FORROOT_GUARD"),BR=[ge,{provide:BA,useClass:jA},{provide:Io,useFactory:function qR(n,e,t,r,o,l,h={},y,I){const A=new Io(null,n,e,t,r,o,OA(l));return y&&(A.urlHandlingStrategy=y),I&&(A.routeReuseStrategy=I),function WR(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(h,A),h.enableTracing&&A.events.subscribe(R=>{var N,G;null===(N=console.group)||void 0===N||N.call(console,`Router Event: ${R.constructor.name}`),console.log(R.toString()),console.log(R),null===(G=console.groupEnd)||void 0===G||G.call(console)}),A},deps:[BA,o0,ge,g.zs3,g.Sil,qb,_p,[class xR{},new g.FiY],[class AR{},new g.FiY]]},o0,{provide:Zm,useFactory:function zR(n){return n.routerState.root},deps:[Io]},DS,IS,class UR{preload(e,t){return t().pipe(Ch(()=>Qe(null)))}},{provide:_p,useValue:{enableTracing:!1}}];function jR(){return new g.PXZ("Router",Io)}let bS=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[BR,TS(t),{provide:CS,useFactory:GR,deps:[[Io,new g.FiY,new g.tp0]]},{provide:_p,useValue:r||{}},{provide:q,useFactory:HR,deps:[ue,[new g.tBr(Te),new g.FiY],_p]},{provide:Zb,useFactory:$R,deps:[Io,iu,_p]},{provide:wS,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:IS},{provide:g.PXZ,multi:!0,useFactory:jR},[Kb,{provide:g.ip1,multi:!0,useFactory:ZR,deps:[Kb]},{provide:AS,useFactory:KR,deps:[Kb]},{provide:g.tb,multi:!0,useExisting:AS}]]}}static forChild(t){return{ngModule:n,providers:[TS(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(CS,8),g.LFG(Io,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function $R(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Zb(n,e,t)}function HR(n,e,t={}){return t.useHash?new ie(n,e):new Re(n,e)}function GR(n){return"guarded"}function TS(n){return[{provide:g.deG,multi:!0,useValue:n},{provide:qb,multi:!0,useValue:n}]}let Kb=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ko.x}appInitializer(){return this.injector.get(B,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(y=>r=y),l=this.injector.get(Io),h=this.injector.get(_p);return"disabled"===h.initialNavigation?(l.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?Qe(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),l.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(_p),o=this.injector.get(DS),l=this.injector.get(Zb),h=this.injector.get(Io),y=this.injector.get(g.z2F);t===y.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),o.setUpPreloading(),l.init(),h.resetRootComponentType(y.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function ZR(n){return n.appInitializer.bind(n)}function KR(n){return n.bootstrapListener.bind(n)}const AS=new g.OlP("Router Initializer"),QR=[];let JR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[bS.forRoot(QR)],bS]}),n})();class XR{constructor(){this.id="",this.name="",this.price=0,this.description="",this.active=!0}}function eN(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"tr"),g.TgZ(1,"td"),g._uU(2),g.qZA(),g.TgZ(3,"td"),g._uU(4),g.qZA(),g.TgZ(5,"td"),g._uU(6),g.qZA(),g.TgZ(7,"td"),g._uU(8),g.qZA(),g.TgZ(9,"td"),g.TgZ(10,"div",22),g.TgZ(11,"button",25),g.NdJ("click",function(){const l=g.CHM(t).$implicit;return g.oxw().onDelete(l)}),g._uU(12," del "),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&n){const t=e.$implicit;g.xp6(2),g.Oqu(t.name),g.xp6(2),g.Oqu(t.price),g.xp6(2),g.Oqu(t.description),g.xp6(2),g.Oqu(t.active)}}let tN=(()=>{class n{constructor(t){this.firestore=t,this.title="firebase-example",this.newProduct=new XR,this.productCollection=this.firestore.collection("product"),this.productList$=this.productCollection.valueChanges({idField:"id"})}ngOnInit(){}onDelete(t){this.productCollection.doc(t.id).delete().then(()=>alert("Document has been deleted."))}onUpdate(t){const r=this.productCollection.doc(t.id),o=Object.assign({},t);r.update(o)}onCreate(){const t=Object.assign({},this.newProduct);delete t.id,this.productCollection.add(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(IA))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:58,vars:7,consts:[[1,"navbar","navbar-expand-sm","navbar-light","bg-light"],["href","#",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#collapsibleNavId","aria-controls","collapsibleNavId","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler","d-lg-none"],[1,"navbar-toggler-icon"],["id","collapsibleNavId",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto","mt-2","mt-lg-0"],[1,"nav-item","active"],["href","#",1,"nav-link"],[1,"sr-only"],[1,"nav-item"],[1,"nav-item","dropdown"],["href","#","id","dropdownId","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","dropdownId",1,"dropdown-menu"],["href","#",1,"dropdown-item"],[1,"form-inline","my-2","my-lg-0"],["type","text","placeholder","Search",1,"form-control","mr-sm-2"],["type","submit",1,"btn","btn-outline-success","my-2","my-sm-0"],[1,"container"],[1,"row"],[1,"col-10","offset-1"],[1,"table","table-striped"],[1,"form-control",3,"ngModel","ngModelChange"],[1,"btn-group"],[1,"btn","btn-success",3,"click"],[4,"ngFor","ngForOf"],[1,"btn","btn-danger",3,"click"]],template:function(t,r){1&t&&(g.TgZ(0,"nav",0),g.TgZ(1,"a",1),g._uU(2,"Navbar"),g.qZA(),g.TgZ(3,"button",2),g._UZ(4,"span",3),g.qZA(),g.TgZ(5,"div",4),g.TgZ(6,"ul",5),g.TgZ(7,"li",6),g.TgZ(8,"a",7),g._uU(9,"Home "),g.TgZ(10,"span",8),g._uU(11,"(current)"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(12,"li",9),g.TgZ(13,"a",7),g._uU(14,"Link"),g.qZA(),g.qZA(),g.TgZ(15,"li",10),g.TgZ(16,"a",11),g._uU(17,"Dropdown"),g.qZA(),g.TgZ(18,"div",12),g.TgZ(19,"a",13),g._uU(20,"Action 1"),g.qZA(),g.TgZ(21,"a",13),g._uU(22,"Action 2"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(23,"form",14),g._UZ(24,"input",15),g.TgZ(25,"button",16),g._uU(26,"Search"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(27,"div",17),g.TgZ(28,"div",18),g.TgZ(29,"div",19),g.TgZ(30,"table",20),g.TgZ(31,"thead"),g.TgZ(32,"tr"),g.TgZ(33,"th"),g._uU(34,"Name"),g.qZA(),g.TgZ(35,"th"),g._uU(36,"Price"),g.qZA(),g.TgZ(37,"th"),g._uU(38,"Desc."),g.qZA(),g.TgZ(39,"th"),g._uU(40,"Active"),g.qZA(),g._UZ(41,"th"),g.qZA(),g.qZA(),g.TgZ(42,"tbody"),g.TgZ(43,"tr"),g.TgZ(44,"td"),g.TgZ(45,"input",21),g.NdJ("ngModelChange",function(l){return r.newProduct.name=l}),g.qZA(),g.qZA(),g.TgZ(46,"td"),g.TgZ(47,"input",21),g.NdJ("ngModelChange",function(l){return r.newProduct.price=l}),g.qZA(),g.qZA(),g.TgZ(48,"td"),g.TgZ(49,"input",21),g.NdJ("ngModelChange",function(l){return r.newProduct.description=l}),g.qZA(),g.qZA(),g.TgZ(50,"td"),g.TgZ(51,"input",21),g.NdJ("ngModelChange",function(l){return r.newProduct.active=l}),g.qZA(),g.qZA(),g.TgZ(52,"td"),g.TgZ(53,"div",22),g.TgZ(54,"button",23),g.NdJ("click",function(){return r.onCreate()}),g._uU(55," add "),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.YNc(56,eN,13,4,"tr",24),g.ALo(57,"async"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&t&&(g.xp6(45),g.Q6J("ngModel",r.newProduct.name),g.xp6(2),g.Q6J("ngModel",r.newProduct.price),g.xp6(2),g.Q6J("ngModel",r.newProduct.description),g.xp6(2),g.Q6J("ngModel",r.newProduct.active),g.xp6(5),g.Q6J("ngForOf",g.lcZ(57,5,r.productList$)))},directives:[ed,lo,Jc,Ns,Il,Xc,bn],pipes:[il],styles:[""]}),n})();const SS_firebaseConfig={apiKey:"AIzaSyAMxiPX045KAu0cFQz2kGHYvtQicByppi8",authDomain:"vbapp-c3148.firebaseapp.com",databaseURL:"https://vbapp-c3148.firebaseio.com",projectId:"vbapp-c3148",storageBucket:"vbapp-c3148.appspot.com",messagingSenderId:"178661753734",appId:"1:178661753734:web:8aefdddddaa19a32fe2207",measurementId:"G-BPHV48SFQ2"};let nN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[tN]}),n.\u0275inj=g.cJS({providers:[],imports:[[hl,JR,ui.hO.initializeApp(SS_firebaseConfig),BM,v0]]}),n})();(0,g.G48)(),kc().bootstrapModule(nN).catch(n=>console.error(n))},5867:(et,Ce,P)=>{"use strict";P.d(Ce,{Mq:()=>g.getApp,C6:()=>g.getApps});var g=P(9681);(0,g.registerVersion)("firebase","9.6.6","app")},127:(et,Ce,P)=>{"use strict";P.d(Ce,{Z:()=>g.Z});var g=P(3942);g.Z.registerVersion("firebase","9.6.6","app-compat")},389:(et,Ce,P)=>{"use strict";P.r(Ce);var g=P(5861),Y=P(3942),O=P(2090),pe=P(9681),X=P(655),fe=P(1877),re=P(4859);const xe=function Ve(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Fe=function De(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},q=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Te=new fe.Yd("@firebase/auth");function Re(m,...d){Te.logLevel<=fe.in.ERROR&&Te.error(`Auth (${pe.SDK_VERSION}): ${m}`,...d)}function ie(m,...d){throw Ue(m,...d)}function ge(m,...d){return Ue(m,...d)}function ye(m,d,f){const v=Object.assign(Object.assign({},Fe()),{[d]:f});return new O.LL("auth","Firebase",v).create(d,{appName:m.name})}function je(m,d,f){if(!(d instanceof f))throw f.name!==d.constructor.name&&ie(m,"argument-error"),ye(m,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ue(m,...d){if("string"!=typeof m){const f=d[0],v=[...d.slice(1)];return v[0]&&(v[0].appName=m.name),m._errorFactory.create(f,...v)}return q.create(m,...d)}function ee(m,d,...f){if(!m)throw Ue(d,...f)}function Z(m){const d="INTERNAL ASSERTION FAILED: "+m;throw Re(d),new Error(d)}function ne(m,d){m||Z(d)}const me=new Map;function se(m){ne(m instanceof Function,"Expected a class definition");let d=me.get(m);return d?(ne(d instanceof m,"Instance stored in cache mismatched with class"),d):(d=new m,me.set(m,d),d)}function pt(){var m;return"undefined"!=typeof self&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function kt(){return"http:"===Cn()||"https:"===Cn()}function Cn(){var m;return"undefined"!=typeof self&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class Rn{constructor(d,f){this.shortDelay=d,this.longDelay=f,ne(f>d,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function tt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(kt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Gt(m,d){ne(m.emulator,"Emulator should always be set here");const{url:f}=m.emulator;return d?`${f}${d.startsWith("/")?d.slice(1):d}`:f}class rr{static initialize(d,f,v){this.fetchImpl=d,f&&(this.headersImpl=f),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Z("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Z("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Z("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Bt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ci=new Rn(3e4,6e4);function jt(m,d){return m.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:m.tenantId}):d}function At(m,d,f,v){return $i.apply(this,arguments)}function $i(){return($i=(0,g.Z)(function*(m,d,f,v,b={}){return Qn(m,b,(0,g.Z)(function*(){let x={},H={};v&&("GET"===d?H=v:x={body:JSON.stringify(v)});const ae=(0,O.xO)(Object.assign({key:m.config.apiKey},H)).slice(1),Le=yield m._getAdditionalHeaders();return Le["Content-Type"]="application/json",m.languageCode&&(Le["X-Firebase-Locale"]=m.languageCode),rr.fetch()(Es(m,m.config.apiHost,f,ae),Object.assign({method:d,headers:Le,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function Qn(m,d,f){return vs.apply(this,arguments)}function vs(){return(vs=(0,g.Z)(function*(m,d,f){m._canInitEmulator=!1;const v=Object.assign(Object.assign({},Bt),d);try{const b=new Xr(m),x=yield Promise.race([f(),b.promise]);b.clearNetworkTimeout();const H=yield x.json();if("needConfirmation"in H)throw Ti(m,"account-exists-with-different-credential",H);if(x.ok&&!("errorMessage"in H))return H;{const ae=x.ok?H.errorMessage:H.error.message,[Le,Ze]=ae.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw Ti(m,"credential-already-in-use",H);if("EMAIL_EXISTS"===Le)throw Ti(m,"email-already-in-use",H);const ft=v[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(Ze)throw ye(m,ft,Ze);ie(m,ft)}}catch(b){if(b instanceof O.ZR)throw b;ie(m,"network-request-failed")}})).apply(this,arguments)}function mr(m,d,f,v){return bi.apply(this,arguments)}function bi(){return(bi=(0,g.Z)(function*(m,d,f,v,b={}){const x=yield At(m,d,f,v,b);return"mfaPendingCredential"in x&&ie(m,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function Es(m,d,f,v){const b=`${d}${f}?${v}`;return m.config.emulator?Gt(m.config,b):`${m.config.apiScheme}://${b}`}class Xr{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((f,v)=>{this.timer=setTimeout(()=>v(ge(this.auth,"network-request-failed")),Ci.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ti(m,d,f){const v={appName:m.name};f.email&&(v.email=f.email),f.phoneNumber&&(v.phoneNumber=f.phoneNumber);const b=ge(m,d,v);return b.customData._tokenResponse=f,b}function Nr(){return(Nr=(0,g.Z)(function*(m,d){return At(m,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Nn(m,d){return yn.apply(this,arguments)}function yn(){return(yn=(0,g.Z)(function*(m,d){return At(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Zs(m,d){return ct.apply(this,arguments)}function ct(){return(ct=(0,g.Z)(function*(m,d){return At(m,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Ke(m){if(m)try{const d=new Date(Number(m));if(!isNaN(d.getTime()))return d.toUTCString()}catch(d){}}function ir(){return(ir=(0,g.Z)(function*(m,d=!1){const f=(0,O.m9)(m),v=yield f.getIdToken(d),b=Ye(v);ee(b&&b.exp&&b.auth_time&&b.iat,f.auth,"internal-error");const x="object"==typeof b.firebase?b.firebase:void 0,H=null==x?void 0:x.sign_in_provider;return{claims:b,token:v,authTime:Ke(bt(b.auth_time)),issuedAtTime:Ke(bt(b.iat)),expirationTime:Ke(bt(b.exp)),signInProvider:H||null,signInSecondFactor:(null==x?void 0:x.sign_in_second_factor)||null}})).apply(this,arguments)}function bt(m){return 1e3*Number(m)}function Ye(m){const[d,f,v]=m.split(".");if(void 0===d||void 0===f||void 0===v)return Re("JWT malformed, contained fewer than 3 sections"),null;try{const b=(0,O.tV)(f);return b?JSON.parse(b):(Re("Failed to decode base64 JWT payload"),null)}catch(b){return Re("Caught error parsing JWT payload as JSON",b),null}}function hi(m,d){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,g.Z)(function*(m,d,f=!1){if(f)return d;try{return yield d}catch(v){throw v instanceof O.ZR&&Rt(v)&&m.auth.currentUser===m&&(yield m.auth.signOut()),v}})).apply(this,arguments)}function Rt({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}class Qo{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var f;if(d){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const b=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,b)}}schedule(d=!1){var f=this;if(!this.isRunning)return;const v=this.getInterval(d);this.timerId=setTimeout((0,g.Z)(function*(){yield f.iteration()}),v)}iteration(){var d=this;return(0,g.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f.code&&d.schedule(!0))}d.schedule()})()}}class Or{constructor(d,f){this.createdAt=d,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ke(this.lastLoginAt),this.creationTime=Ke(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ei(m){return L.apply(this,arguments)}function L(){return(L=(0,g.Z)(function*(m){var d;const f=m.auth,v=yield m.getIdToken(),b=yield hi(m,Zs(f,{idToken:v}));ee(null==b?void 0:b.users.length,f,"internal-error");const x=b.users[0];m._notifyReloadListener(x);const H=(null===(d=x.providerUserInfo)||void 0===d?void 0:d.length)?J(x.providerUserInfo):[],ae=ve(m.providerData,H),ft=!!m.isAnonymous&&!(m.email&&x.passwordHash||(null==ae?void 0:ae.length)),nt={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:ae,metadata:new Or(x.createdAt,x.lastLoginAt),isAnonymous:ft};Object.assign(m,nt)})).apply(this,arguments)}function $(){return($=(0,g.Z)(function*(m){const d=(0,O.m9)(m);yield ei(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function ve(m,d){return[...m.filter(v=>!d.some(b=>b.providerId===v.providerId)),...d]}function J(m){return m.map(d=>{var{providerId:f}=d,v=(0,X._T)(d,["providerId"]);return{providerId:f,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function lt(){return(lt=(0,g.Z)(function*(m,d){const f=yield Qn(m,{},(0,g.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:b,apiKey:x}=m.config,H=Es(m,b,"/v1/token",`key=${x}`),ae=yield m._getAdditionalHeaders();return ae["Content-Type"]="application/x-www-form-urlencoded",rr.fetch()(H,{method:"POST",headers:ae,body:v})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class qt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){ee(d.idToken,"internal-error"),ee(void 0!==d.idToken,"internal-error"),ee(void 0!==d.refreshToken,"internal-error");const f="expiresIn"in d&&void 0!==d.expiresIn?Number(d.expiresIn):function ot(m){const d=Ye(m);return ee(d,"internal-error"),ee(void 0!==d.exp,"internal-error"),ee(void 0!==d.iat,"internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,f)}getToken(d,f=!1){var v=this;return(0,g.Z)(function*(){return ee(!v.accessToken||v.refreshToken,d,"user-token-expired"),f||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(d,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,f){var v=this;return(0,g.Z)(function*(){const{accessToken:b,refreshToken:x,expiresIn:H}=yield function Ge(m,d){return lt.apply(this,arguments)}(d,f);v.updateTokensAndExpiration(b,x,Number(H))})()}updateTokensAndExpiration(d,f,v){this.refreshToken=f||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(d,f){const{refreshToken:v,accessToken:b,expirationTime:x}=f,H=new qt;return v&&(ee("string"==typeof v,"internal-error",{appName:d}),H.refreshToken=v),b&&(ee("string"==typeof b,"internal-error",{appName:d}),H.accessToken=b),x&&(ee("number"==typeof x,"internal-error",{appName:d}),H.expirationTime=x),H}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new qt,this.toJSON())}_performRefresh(){return Z("not implemented")}}function Xt(m,d){ee("string"==typeof m||void 0===m,"internal-error",{appName:d})}class tn{constructor(d){var{uid:f,auth:v,stsTokenManager:b}=d,x=(0,X._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=v,this.stsTokenManager=b,this.accessToken=b.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new Or(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(d){var f=this;return(0,g.Z)(function*(){const v=yield hi(f,f.stsTokenManager.getToken(f.auth,d));return ee(v,f.auth,"internal-error"),f.accessToken!==v&&(f.accessToken=v,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),v})()}getIdTokenResult(d){return function en(m){return ir.apply(this,arguments)}(this,d)}reload(){return function j(m){return $.apply(this,arguments)}(this)}_assign(d){this!==d&&(ee(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(f=>Object.assign({},f)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){return new tn(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(d){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,f=!1){var v=this;return(0,g.Z)(function*(){let b=!1;d.idToken&&d.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(d),b=!0),f&&(yield ei(v)),yield v.auth._persistUserIfCurrent(v),b&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var d=this;return(0,g.Z)(function*(){const f=yield d.getIdToken();return yield hi(d,function ut(m,d){return Nr.apply(this,arguments)}(d.auth,{idToken:f})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,f){var v,b,x,H,ae,Le,Ze,ft;const nt=null!==(v=f.displayName)&&void 0!==v?v:void 0,sn=null!==(b=f.email)&&void 0!==b?b:void 0,Gr=null!==(x=f.phoneNumber)&&void 0!==x?x:void 0,Au=null!==(H=f.photoURL)&&void 0!==H?H:void 0,er=null!==(ae=f.tenantId)&&void 0!==ae?ae:void 0,Na=null!==(Le=f._redirectEventId)&&void 0!==Le?Le:void 0,cr=null!==(Ze=f.createdAt)&&void 0!==Ze?Ze:void 0,zp=null!==(ft=f.lastLoginAt)&&void 0!==ft?ft:void 0,{uid:fo,emailVerified:Su,isAnonymous:dd,providerData:hd,stsTokenManager:kl}=f;ee(fo&&kl,d,"internal-error");const cf=qt.fromJSON(this.name,kl);ee("string"==typeof fo,d,"internal-error"),Xt(nt,d.name),Xt(sn,d.name),ee("boolean"==typeof Su,d,"internal-error"),ee("boolean"==typeof dd,d,"internal-error"),Xt(Gr,d.name),Xt(Au,d.name),Xt(er,d.name),Xt(Na,d.name),Xt(cr,d.name),Xt(zp,d.name);const df=new tn({uid:fo,auth:d,email:sn,emailVerified:Su,displayName:nt,isAnonymous:dd,photoURL:Au,phoneNumber:Gr,tenantId:er,stsTokenManager:cf,createdAt:cr,lastLoginAt:zp});return hd&&Array.isArray(hd)&&(df.providerData=hd.map(gy=>Object.assign({},gy))),Na&&(df._redirectEventId=Na),df}static _fromIdTokenResponse(d,f,v=!1){return(0,g.Z)(function*(){const b=new qt;b.updateFromServerResponse(f);const x=new tn({uid:f.localId,auth:d,stsTokenManager:b,isAnonymous:v});return yield ei(x),x})()}}const It=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(f,v){var b=this;return(0,g.Z)(function*(){b.storage[f]=v})()}_get(f){var v=this;return(0,g.Z)(function*(){const b=v.storage[f];return void 0===b?null:b})()}_remove(f){var v=this;return(0,g.Z)(function*(){delete v.storage[f]})()}_addListener(f,v){}_removeListener(f,v){}}return m.type="NONE",m})();function On(m,d,f){return`firebase:${m}:${d}:${f}`}class yr{constructor(d,f,v){this.persistence=d,this.auth=f,this.userKey=v;const{config:b,name:x}=this.auth;this.fullUserKey=On(this.userKey,b.apiKey,x),this.fullPersistenceKey=On("persistence",b.apiKey,x),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,g.Z)(function*(){const f=yield d.persistence._get(d.fullUserKey);return f?tn._fromJSON(d.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var f=this;return(0,g.Z)(function*(){if(f.persistence===d)return;const v=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=d,v?f.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,f,v="authUser"){return(0,g.Z)(function*(){if(!f.length)return new yr(se(It),d,v);const b=(yield Promise.all(f.map(function(){var Ze=(0,g.Z)(function*(ft){if(yield ft._isAvailable())return ft});return function(ft){return Ze.apply(this,arguments)}}()))).filter(Ze=>Ze);let x=b[0]||se(It);const H=On(v,d.config.apiKey,d.name);let ae=null;for(const Ze of f)try{const ft=yield Ze._get(H);if(ft){const nt=tn._fromJSON(d,ft);Ze!==x&&(ae=nt),x=Ze;break}}catch(ft){}const Le=b.filter(Ze=>Ze._shouldAllowMigration);return x._shouldAllowMigration&&Le.length?(x=Le[0],ae&&(yield x._set(H,ae.toJSON())),yield Promise.all(f.map(function(){var Ze=(0,g.Z)(function*(ft){if(ft!==x)try{yield ft._remove(H)}catch(nt){}});return function(ft){return Ze.apply(this,arguments)}}())),new yr(x,d,v)):new yr(x,d,v)})()}}function Xa(m){const d=m.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(Pn(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(Jo(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(Gi(d))return"Blackberry";if(kn(d))return"Webos";if(eu(d))return"Safari";if((d.includes("chrome/")||Xo(d))&&!d.includes("edge/"))return"Chrome";if(_r(d))return"Android";{const v=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function Jo(m=(0,O.z$)()){return/firefox\//i.test(m)}function eu(m=(0,O.z$)()){const d=m.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function Xo(m=(0,O.z$)()){return/crios\//i.test(m)}function Pn(m=(0,O.z$)()){return/iemobile/i.test(m)}function _r(m=(0,O.z$)()){return/android/i.test(m)}function Gi(m=(0,O.z$)()){return/blackberry/i.test(m)}function kn(m=(0,O.z$)()){return/webos/i.test(m)}function kr(m=(0,O.z$)()){return/iphone|ipad|ipod/i.test(m)}function ws(m=(0,O.z$)()){return kr(m)||_r(m)||kn(m)||Gi(m)||/windows phone/i.test(m)||Pn(m)}function Do(m,d=[]){let f;switch(m){case"Browser":f=Xa((0,O.z$)());break;case"Worker":f=`${Xa((0,O.z$)())}-${m}`;break;default:f=m}const v=d.length?d.join(","):"FirebaseCore-web";return`${f}/JsCore/${pe.SDK_VERSION}/${v}`}class Fr{constructor(d,f){this.app=d,this.config=f,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wt(this),this.idTokenSubscription=new wt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=q,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=f.sdkClientVersion}_initializeWithPersistence(d,f){var v=this;return f&&(this._popupRedirectResolver=se(f)),this._initializationPromise=this.queue((0,g.Z)(function*(){var b,x;if(!v._deleted&&(v.persistenceManager=yield yr.create(v,d),!v._deleted)){if(null===(b=v._popupRedirectResolver)||void 0===b?void 0:b._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(H){}yield v.initializeCurrentUser(f),v.lastNotifiedUid=(null===(x=v.currentUser)||void 0===x?void 0:x.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,g.Z)(function*(){if(d._deleted)return;const f=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||f){if(d.currentUser&&f&&d.currentUser.uid===f.uid)return d._currentUser._assign(f),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(f)}})()}initializeCurrentUser(d){var f=this;return(0,g.Z)(function*(){var v;let b=yield f.assertedPersistence.getCurrentUser();if(d&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const x=null===(v=f.redirectUser)||void 0===v?void 0:v._redirectEventId,H=null==b?void 0:b._redirectEventId,ae=yield f.tryRedirectSignIn(d);(!x||x===H)&&(null==ae?void 0:ae.user)&&(b=ae.user)}return b?b._redirectEventId?(ee(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===b._redirectEventId?f.directlySetCurrentUser(b):f.reloadAndSetCurrentUserOrClear(b)):f.reloadAndSetCurrentUserOrClear(b):f.directlySetCurrentUser(null)})()}tryRedirectSignIn(d){var f=this;return(0,g.Z)(function*(){let v=null;try{v=yield f._popupRedirectResolver._completeRedirectFn(f,d,!0)}catch(b){yield f._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(d){var f=this;return(0,g.Z)(function*(){try{yield ei(d)}catch(v){if("auth/network-request-failed"!==v.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function st(){if("undefined"==typeof navigator)return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var d=this;return(0,g.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var f=this;return(0,g.Z)(function*(){const v=d?(0,O.m9)(d):null;return v&&ee(v.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(v&&v._clone(f))})()}_updateCurrentUser(d){var f=this;return(0,g.Z)(function*(){if(!f._deleted)return d&&ee(f.tenantId===d.tenantId,f,"tenant-id-mismatch"),f.queue((0,g.Z)(function*(){yield f.directlySetCurrentUser(d),f.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,g.Z)(function*(){return(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null)})()}setPersistence(d){var f=this;return this.queue((0,g.Z)(function*(){yield f.assertedPersistence.setPersistence(se(d))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new O.LL("auth","Firebase",d())}onAuthStateChanged(d,f,v){return this.registerStateListener(this.authStateSubscription,d,f,v)}onIdTokenChanged(d,f,v){return this.registerStateListener(this.idTokenSubscription,d,f,v)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,f){var v=this;return(0,g.Z)(function*(){const b=yield v.getOrInitRedirectPersistenceManager(f);return null===d?b.removeCurrentUser():b.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var f=this;return(0,g.Z)(function*(){if(!f.redirectPersistenceManager){const v=d&&se(d)||f._popupRedirectResolver;ee(v,f,"argument-error"),f.redirectPersistenceManager=yield yr.create(f,[se(v._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(d){var f=this;return(0,g.Z)(function*(){var v,b;return f._isInitialized&&(yield f.queue((0,g.Z)(function*(){}))),(null===(v=f._currentUser)||void 0===v?void 0:v._redirectEventId)===d?f._currentUser:(null===(b=f.redirectUser)||void 0===b?void 0:b._redirectEventId)===d?f.redirectUser:null})()}_persistUserIfCurrent(d){var f=this;return(0,g.Z)(function*(){if(d===f.currentUser)return f.queue((0,g.Z)(function*(){return f.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(f=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,f,v,b){if(this._deleted)return()=>{};const x="function"==typeof f?f:f.next.bind(f),H=this._isInitialized?Promise.resolve():this._initializationPromise;return ee(H,this,"internal-error"),H.then(()=>x(this.currentUser)),"function"==typeof f?d.addObserver(f,v,b):d.addObserver(f)}directlySetCurrentUser(d){var f=this;return(0,g.Z)(function*(){f.currentUser&&f.currentUser!==d&&(f._currentUser._stopProactiveRefresh(),d&&f.isProactiveRefreshEnabled&&d._startProactiveRefresh()),f.currentUser=d,d?yield f.assertedPersistence.setCurrentUser(d):yield f.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=Do(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,g.Z)(function*(){const f={"X-Client-Version":d.clientVersion};return d.app.options.appId&&(f["X-Firebase-gmpid"]=d.app.options.appId),f})()}}function Oe(m){return(0,O.m9)(m)}class wt{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,O.ne)(f=>this.observer=f)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function vr(m){const d=m.indexOf(":");return d<0?"":m.substr(0,d+1)}function _n(m){if(!m)return null;const d=Number(m);return isNaN(d)?null:d}class Ft{constructor(d,f){this.providerId=d,this.signInMethod=f}toJSON(){return Z("not implemented")}_getIdTokenResponse(d){return Z("not implemented")}_linkToIdToken(d,f){return Z("not implemented")}_getReauthenticationResolver(d){return Z("not implemented")}}function Ys(m,d){return ln.apply(this,arguments)}function ln(){return(ln=(0,g.Z)(function*(m,d){return At(m,"POST","/v1/accounts:resetPassword",jt(m,d))})).apply(this,arguments)}function _t(m,d){return Co.apply(this,arguments)}function Co(){return(Co=(0,g.Z)(function*(m,d){return At(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function bo(m,d){return To.apply(this,arguments)}function To(){return(To=(0,g.Z)(function*(m,d){return At(m,"POST","/v1/accounts:update",jt(m,d))})).apply(this,arguments)}function bn(){return(bn=(0,g.Z)(function*(m,d){return mr(m,"POST","/v1/accounts:signInWithPassword",jt(m,d))})).apply(this,arguments)}function Is(m,d){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,g.Z)(function*(m,d){return At(m,"POST","/v1/accounts:sendOobCode",jt(m,d))})).apply(this,arguments)}function Lr(m,d){return $t.apply(this,arguments)}function $t(){return($t=(0,g.Z)(function*(m,d){return Is(m,d)})).apply(this,arguments)}function Ec(m,d){return Js.apply(this,arguments)}function Js(){return(Js=(0,g.Z)(function*(m,d){return Is(m,d)})).apply(this,arguments)}function fi(m,d){return ti.apply(this,arguments)}function ti(){return(ti=(0,g.Z)(function*(m,d){return Is(m,d)})).apply(this,arguments)}function wc(m,d){return tu.apply(this,arguments)}function tu(){return(tu=(0,g.Z)(function*(m,d){return Is(m,d)})).apply(this,arguments)}function ni(){return(ni=(0,g.Z)(function*(m,d){return mr(m,"POST","/v1/accounts:signInWithEmailLink",jt(m,d))})).apply(this,arguments)}function Ic(){return(Ic=(0,g.Z)(function*(m,d){return mr(m,"POST","/v1/accounts:signInWithEmailLink",jt(m,d))})).apply(this,arguments)}class nu extends Ft{constructor(d,f,v,b=null){super("password",v),this._email=d,this._password=f,this._tenantId=b}static _fromEmailAndPassword(d,f){return new nu(d,f,"password")}static _fromEmailAndCode(d,f,v=null){return new nu(d,f,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d;if((null==f?void 0:f.email)&&(null==f?void 0:f.password)){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(d){var f=this;return(0,g.Z)(function*(){switch(f.signInMethod){case"password":return function Ao(m,d){return bn.apply(this,arguments)}(d,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function Ds(m,d){return ni.apply(this,arguments)}(d,{email:f._email,oobCode:f._password});default:ie(d,"internal-error")}})()}_linkToIdToken(d,f){var v=this;return(0,g.Z)(function*(){switch(v.signInMethod){case"password":return _t(d,{idToken:f,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Th(m,d){return Ic.apply(this,arguments)}(d,{idToken:f,email:v._email,oobCode:v._password});default:ie(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Tn(m,d){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,g.Z)(function*(m,d){return mr(m,"POST","/v1/accounts:signInWithIdp",jt(m,d))})).apply(this,arguments)}class zi extends Ft{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const f=new zi(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(f.idToken=d.idToken),d.accessToken&&(f.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(f.nonce=d.nonce),d.pendingToken&&(f.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(f.accessToken=d.oauthToken,f.secret=d.oauthTokenSecret):ie("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:v,signInMethod:b}=f,x=(0,X._T)(f,["providerId","signInMethod"]);if(!v||!b)return null;const H=new zi(v,b);return H.idToken=x.idToken||void 0,H.accessToken=x.accessToken||void 0,H.secret=x.secret,H.nonce=x.nonce,H.pendingToken=x.pendingToken||null,H}_getIdTokenResponse(d){return Tn(d,this.buildRequest())}_linkToIdToken(d,f){const v=this.buildRequest();return v.idToken=f,Tn(d,v)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Tn(d,f)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),d.postBody=(0,O.xO)(f)}return d}}function Ep(m,d){return il.apply(this,arguments)}function il(){return(il=(0,g.Z)(function*(m,d){return At(m,"POST","/v1/accounts:sendVerificationCode",jt(m,d))})).apply(this,arguments)}function ta(){return(ta=(0,g.Z)(function*(m,d){return mr(m,"POST","/v1/accounts:signInWithPhoneNumber",jt(m,d))})).apply(this,arguments)}function Cc(){return(Cc=(0,g.Z)(function*(m,d){const f=yield mr(m,"POST","/v1/accounts:signInWithPhoneNumber",jt(m,d));if(f.temporaryProof)throw Ti(m,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Ip={USER_NOT_FOUND:"user-not-found"};function bc(){return(bc=(0,g.Z)(function*(m,d){return mr(m,"POST","/v1/accounts:signInWithPhoneNumber",jt(m,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Ip)})).apply(this,arguments)}class Mo extends Ft{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,f){return new Mo({verificationId:d,verificationCode:f})}static _fromTokenResponse(d,f){return new Mo({phoneNumber:d,temporaryProof:f})}_getIdTokenResponse(d){return function wp(m,d){return ta.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,f){return function So(m,d){return Cc.apply(this,arguments)}(d,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function Dp(m,d){return bc.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:f,verificationId:v,verificationCode:b}=this.params;return d&&f?{temporaryProof:d,phoneNumber:f}:{sessionInfo:v,code:b}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:f,verificationCode:v,phoneNumber:b,temporaryProof:x}=d;return v||f||b||x?new Mo({verificationId:f,verificationCode:v,phoneNumber:b,temporaryProof:x}):null}}class Zi{constructor(d){var f,v,b,x,H,ae;const Le=(0,O.zd)((0,O.pd)(d)),Ze=null!==(f=Le.apiKey)&&void 0!==f?f:null,ft=null!==(v=Le.oobCode)&&void 0!==v?v:null,nt=function Cp(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(b=Le.mode)&&void 0!==b?b:null);ee(Ze&&ft&&nt,"argument-error"),this.apiKey=Ze,this.operation=nt,this.code=ft,this.continueUrl=null!==(x=Le.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(H=Le.languageCode)&&void 0!==H?H:null,this.tenantId=null!==(ae=Le.tenantId)&&void 0!==ae?ae:null}static parseLink(d){const f=function Ah(m){const d=(0,O.zd)((0,O.pd)(m)).link,f=d?(0,O.zd)((0,O.pd)(d)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(m)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||f||d||m}(d);try{return new Zi(f)}catch(v){return null}}}let na=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(f,v){return nu._fromEmailAndPassword(f,v)}static credentialWithLink(f,v){const b=Zi.parseLink(v);return ee(b,"argument-error"),nu._fromEmailAndCode(f,b.code,b.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class Cs{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class ri extends Cs{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Xs extends ri{static credentialFromJSON(d){const f="string"==typeof d?JSON.parse(d):d;return ee("providerId"in f&&"signInMethod"in f,"argument-error"),zi._fromParams(f)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return ee(d.idToken||d.accessToken,"argument-error"),zi._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Xs.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Xs.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:f,oauthAccessToken:v,oauthTokenSecret:b,pendingToken:x,nonce:H,providerId:ae}=d;if(!v&&!b&&!f&&!x||!ae)return null;try{return new Xs(ae)._credential({idToken:f,accessToken:v,nonce:H,pendingToken:x})}catch(Le){return null}}}let xo=(()=>{class m extends ri{constructor(){super("facebook.com")}static credential(f){return zi._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch(v){return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),Ro=(()=>{class m extends ri{constructor(){super("google.com"),this.addScope("profile")}static credential(f,v){return zi._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:v})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:v,oauthAccessToken:b}=f;if(!v&&!b)return null;try{return m.credential(v,b)}catch(x){return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),Tc=(()=>{class m extends ri{constructor(){super("github.com")}static credential(f){return zi._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch(v){return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class eo extends Ft{constructor(d,f){super(d,d),this.pendingToken=f}_getIdTokenResponse(d){return Tn(d,this.buildRequest())}_linkToIdToken(d,f){const v=this.buildRequest();return v.idToken=f,Tn(d,v)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Tn(d,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:v,signInMethod:b,pendingToken:x}=f;return v&&b&&x&&v===b?new eo(v,x):null}static _create(d,f){return new eo(d,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ki extends Cs{constructor(d){ee(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return Ki.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return Ki.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const f=eo.fromJSON(d);return ee(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:f,providerId:v}=d;if(!f||!v)return null;try{return eo._create(v,f)}catch(b){return null}}}let ii=(()=>{class m extends ri{constructor(){super("twitter.com")}static credential(f,v){return zi._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:v})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:v,oauthTokenSecret:b}=f;if(!v||!b)return null;try{return m.credential(v,b)}catch(x){return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function Sc(m,d){return sr.apply(this,arguments)}function sr(){return(sr=(0,g.Z)(function*(m,d){return mr(m,"POST","/v1/accounts:signUp",jt(m,d))})).apply(this,arguments)}class or{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,f,v,b=!1){return(0,g.Z)(function*(){const x=yield tn._fromIdTokenResponse(d,v,b),H=Mc(v);return new or({user:x,providerId:H,_tokenResponse:v,operationType:f})})()}static _forOperation(d,f,v){return(0,g.Z)(function*(){yield d._updateTokensIfNecessary(v,!0);const b=Mc(v);return new or({user:d,providerId:b,_tokenResponse:v,operationType:f})})()}}function Mc(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function ru(){return(ru=(0,g.Z)(function*(m){var d;const f=Oe(m);if(yield f._initializationPromise,null===(d=f.currentUser)||void 0===d?void 0:d.isAnonymous)return new or({user:f.currentUser,providerId:null,operationType:"signIn"});const v=yield Sc(f,{returnSecureToken:!0}),b=yield or._fromIdTokenResponse(f,"signIn",v,!0);return yield f._updateCurrentUser(b.user),b})).apply(this,arguments)}class iu extends O.ZR{constructor(d,f,v,b){var x;super(f.code,f.message),this.operationType=v,this.user=b,Object.setPrototypeOf(this,iu.prototype),this.customData={appName:d.name,tenantId:null!==(x=d.tenantId)&&void 0!==x?x:void 0,_serverResponse:f.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(d,f,v,b){return new iu(d,f,v,b)}}function su(m,d,f,v){return("reauthenticate"===d?f._getReauthenticationResolver(m):f._getIdTokenResponse(m)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?iu._fromErrorAndOperation(m,x,d,v):x})}function sl(m){return new Set(m.map(({providerId:d})=>d).filter(d=>!!d))}function ol(){return(ol=(0,g.Z)(function*(m,d){const f=(0,O.m9)(m);yield bs(!0,f,d);const{providerUserInfo:v}=yield Nn(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[d]}),b=sl(v||[]);return f.providerData=f.providerData.filter(x=>b.has(x.providerId)),b.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function Kt(m,d){return ra.apply(this,arguments)}function ra(){return(ra=(0,g.Z)(function*(m,d,f=!1){const v=yield hi(m,d._linkToIdToken(m.auth,yield m.getIdToken()),f);return or._forOperation(m,"link",v)})).apply(this,arguments)}function bs(m,d,f){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,g.Z)(function*(m,d,f){yield ei(d);const b=!1===m?"provider-already-linked":"no-such-provider";ee(sl(d.providerData).has(f)===m,d.auth,b)})).apply(this,arguments)}function ou(m,d){return ia.apply(this,arguments)}function ia(){return(ia=(0,g.Z)(function*(m,d,f=!1){const{auth:v}=m,b="reauthenticate";try{const x=yield hi(m,su(v,b,d,m),f);ee(x.idToken,v,"internal-error");const H=Ye(x.idToken);ee(H,v,"internal-error");const{sub:ae}=H;return ee(m.uid===ae,v,"user-mismatch"),or._forOperation(m,b,x)}catch(x){throw"auth/user-not-found"===(null==x?void 0:x.code)&&ie(v,"user-mismatch"),x}})).apply(this,arguments)}function to(m,d){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,g.Z)(function*(m,d,f=!1){const v="signIn",b=yield su(m,v,d),x=yield or._fromIdTokenResponse(m,v,b);return f||(yield m._updateCurrentUser(x.user)),x})).apply(this,arguments)}function au(m,d){return cn.apply(this,arguments)}function cn(){return(cn=(0,g.Z)(function*(m,d){return to(Oe(m),d)})).apply(this,arguments)}function Qi(m,d){return qn.apply(this,arguments)}function qn(){return(qn=(0,g.Z)(function*(m,d){const f=(0,O.m9)(m);return yield bs(!1,f,d.providerId),Kt(f,d)})).apply(this,arguments)}function No(m,d){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,g.Z)(function*(m,d){return ou((0,O.m9)(m),d)})).apply(this,arguments)}function al(m,d){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,g.Z)(function*(m,d){return mr(m,"POST","/v1/accounts:signInWithCustomToken",jt(m,d))})).apply(this,arguments)}function As(){return(As=(0,g.Z)(function*(m,d){const f=Oe(m),v=yield al(f,{token:d,returnSecureToken:!0}),b=yield or._fromIdTokenResponse(f,"signIn",v);return yield f._updateCurrentUser(b.user),b})).apply(this,arguments)}class at{constructor(d,f){this.factorId=d,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(d,f){return"phoneInfo"in f?sa._fromServerResponse(d,f):ie(d,"internal-error")}}class sa extends at{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,f){return new sa(f)}}function oa(m,d,f){var v;ee((null===(v=f.url)||void 0===v?void 0:v.length)>0,m,"invalid-continue-uri"),ee(void 0===f.dynamicLinkDomain||f.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),d.continueUrl=f.url,d.dynamicLinkDomain=f.dynamicLinkDomain,d.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(ee(f.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),d.iOSBundleId=f.iOS.bundleId),f.android&&(ee(f.android.packageName.length>0,m,"missing-android-pkg-name"),d.androidInstallApp=f.android.installApp,d.androidMinimumVersionCode=f.android.minimumVersion,d.androidPackageName=f.android.packageName)}function aa(){return(aa=(0,g.Z)(function*(m,d,f){const v=(0,O.m9)(m),b={requestType:"PASSWORD_RESET",email:d};f&&oa(v,b,f),yield Ec(v,b)})).apply(this,arguments)}function ua(){return(ua=(0,g.Z)(function*(m,d,f){yield Ys((0,O.m9)(m),{oobCode:d,newPassword:f})})).apply(this,arguments)}function we(){return(we=(0,g.Z)(function*(m,d){yield bo((0,O.m9)(m),{oobCode:d})})).apply(this,arguments)}function Tt(m,d){return la.apply(this,arguments)}function la(){return(la=(0,g.Z)(function*(m,d){const f=(0,O.m9)(m),v=yield Ys(f,{oobCode:d}),b=v.requestType;switch(ee(b,f,"internal-error"),b){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(v.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(v.mfaInfo,f,"internal-error");default:ee(v.email,f,"internal-error")}let x=null;return v.mfaInfo&&(x=at._fromServerResponse(Oe(f),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:x},operation:b}})).apply(this,arguments)}function Ss(){return(Ss=(0,g.Z)(function*(m,d){const{data:f}=yield Tt((0,O.m9)(m),d);return f.email})).apply(this,arguments)}function Er(){return(Er=(0,g.Z)(function*(m,d,f){const v=Oe(m),b=yield Sc(v,{returnSecureToken:!0,email:d,password:f}),x=yield or._fromIdTokenResponse(v,"signIn",b);return yield v._updateCurrentUser(x.user),x})).apply(this,arguments)}function Nc(){return(Nc=(0,g.Z)(function*(m,d,f){const v=(0,O.m9)(m),b={requestType:"EMAIL_SIGNIN",email:d};ee(f.handleCodeInApp,v,"argument-error"),f&&oa(v,b,f),yield fi(v,b)})).apply(this,arguments)}function Oo(){return(Oo=(0,g.Z)(function*(m,d,f){const v=(0,O.m9)(m),b=na.credentialWithLink(d,f||pt());return ee(b._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),au(v,b)})).apply(this,arguments)}function Fn(m,d){return pi.apply(this,arguments)}function pi(){return(pi=(0,g.Z)(function*(m,d){return At(m,"POST","/v1/accounts:createAuthUri",jt(m,d))})).apply(this,arguments)}function Si(){return(Si=(0,g.Z)(function*(m,d){const v={identifier:d,continueUri:kt()?pt():"http://localhost"},{signinMethods:b}=yield Fn((0,O.m9)(m),v);return b||[]})).apply(this,arguments)}function ha(){return(ha=(0,g.Z)(function*(m,d){const f=(0,O.m9)(m),b={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};d&&oa(f.auth,b,d);const{email:x}=yield Lr(f.auth,b);x!==m.email&&(yield m.reload())})).apply(this,arguments)}function fa(){return(fa=(0,g.Z)(function*(m,d,f){const v=(0,O.m9)(m),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:d};f&&oa(v.auth,x,f);const{email:H}=yield wc(v.auth,x);H!==m.email&&(yield m.reload())})).apply(this,arguments)}function kc(m,d){return no.apply(this,arguments)}function no(){return(no=(0,g.Z)(function*(m,d){return At(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function pa(){return(pa=(0,g.Z)(function*(m,{displayName:d,photoURL:f}){if(void 0===d&&void 0===f)return;const v=(0,O.m9)(m),x={idToken:yield v.getIdToken(),displayName:d,photoUrl:f,returnSecureToken:!0},H=yield hi(v,kc(v.auth,x));v.displayName=H.displayName||null,v.photoURL=H.photoUrl||null;const ae=v.providerData.find(({providerId:Le})=>"password"===Le);ae&&(ae.displayName=v.displayName,ae.photoURL=v.photoURL),yield v._updateTokensIfNecessary(H)})).apply(this,arguments)}function uu(m,d,f){return ro.apply(this,arguments)}function ro(){return(ro=(0,g.Z)(function*(m,d,f){const{auth:v}=m,x={idToken:yield m.getIdToken(),returnSecureToken:!0};d&&(x.email=d),f&&(x.password=f);const H=yield hi(m,_t(v,x));yield m._updateTokensIfNecessary(H,!0)})).apply(this,arguments)}class io{constructor(d,f,v={}){this.isNewUser=d,this.providerId=f,this.profile=v}}class Fc extends io{constructor(d,f,v,b){super(d,f,v),this.username=b}}class Mh extends io{constructor(d,f){super(d,"facebook.com",f)}}class Po extends Fc{constructor(d,f){super(d,"github.com",f,"string"==typeof(null==f?void 0:f.login)?null==f?void 0:f.login:null)}}class Mi extends io{constructor(d,f){super(d,"google.com",f)}}class xh extends Fc{constructor(d,f,v){super(d,"twitter.com",f,v)}}function Wn(m){const{user:d,_tokenResponse:f}=m;return d.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function pl(m){var d,f;if(!m)return null;const{providerId:v}=m,b=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},x=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!v&&(null==m?void 0:m.idToken)){const H=null===(f=null===(d=Ye(m.idToken))||void 0===d?void 0:d.firebase)||void 0===f?void 0:f.sign_in_provider;if(H)return new io(x,"anonymous"!==H&&"custom"!==H?H:null)}if(!v)return null;switch(v){case"facebook.com":return new Mh(x,b);case"github.com":return new Po(x,b);case"google.com":return new Mi(x,b);case"twitter.com":return new xh(x,b,m.screenName||null);case"custom":case"anonymous":return new io(x,null);default:return new io(x,v,b)}}(f)}class es{constructor(d,f){this.type=d,this.credential=f}static _fromIdtoken(d){return new es("enroll",d)}static _fromMfaPendingCredential(d){return new es("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var f,v;if(null==d?void 0:d.multiFactorSession){if(null===(f=d.multiFactorSession)||void 0===f?void 0:f.pendingCredential)return es._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null===(v=d.multiFactorSession)||void 0===v?void 0:v.idToken)return es._fromIdtoken(d.multiFactorSession.idToken)}return null}}class ga{constructor(d,f,v){this.session=d,this.hints=f,this.signInResolver=v}static _fromError(d,f){const v=Oe(d),b=f.customData._serverResponse,x=(b.mfaInfo||[]).map(ae=>at._fromServerResponse(v,ae));ee(b.mfaPendingCredential,v,"internal-error");const H=es._fromMfaPendingCredential(b.mfaPendingCredential);return new ga(H,x,function(){var ae=(0,g.Z)(function*(Le){const Ze=yield Le._process(v,H);delete b.mfaInfo,delete b.mfaPendingCredential;const ft=Object.assign(Object.assign({},b),{idToken:Ze.idToken,refreshToken:Ze.refreshToken});switch(f.operationType){case"signIn":const nt=yield or._fromIdTokenResponse(v,f.operationType,ft);return yield v._updateCurrentUser(nt.user),nt;case"reauthenticate":return ee(f.user,v,"internal-error"),or._forOperation(f.user,f.operationType,ft);default:ie(v,"internal-error")}});return function(Le){return ae.apply(this,arguments)}}())}resolveSignIn(d){var f=this;return(0,g.Z)(function*(){return f.signInResolver(d)})()}}function lu(m,d){return At(m,"POST","/v2/accounts/mfaEnrollment:start",jt(m,d))}class ts{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(v=>at._fromServerResponse(d.auth,v)))})}static _fromUser(d){return new ts(d)}getSession(){var d=this;return(0,g.Z)(function*(){return es._fromIdtoken(yield d.user.getIdToken())})()}enroll(d,f){var v=this;return(0,g.Z)(function*(){const b=d,x=yield v.getSession(),H=yield hi(v.user,b._process(v.user.auth,x,f));return yield v.user._updateTokensIfNecessary(H),v.user.reload()})()}unenroll(d){var f=this;return(0,g.Z)(function*(){const v="string"==typeof d?d:d.uid,b=yield f.user.getIdToken(),x=yield hi(f.user,function Nh(m,d){return At(m,"POST","/v2/accounts/mfaEnrollment:withdraw",jt(m,d))}(f.user.auth,{idToken:b,mfaEnrollmentId:v}));f.enrolledFactors=f.enrolledFactors.filter(({uid:H})=>H!==v),yield f.user._updateTokensIfNecessary(x);try{yield f.user.reload()}catch(H){if("auth/user-token-expired"!==H.code)throw H}})()}}const ko=new WeakMap,ma="__sak";class ya{constructor(d,f){this.storageRetriever=d,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(ma,"1"),this.storage.removeItem(ma),Promise.resolve(!0)):Promise.resolve(!1)}catch(d){return Promise.resolve(!1)}}_set(d,f){return this.storage.setItem(d,JSON.stringify(f)),Promise.resolve()}_get(d){const f=this.storage.getItem(d);return Promise.resolve(f?JSON.parse(f):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const wr=(()=>{class m extends ya{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,v)=>this.onStorageEvent(f,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function cu(){const m=(0,O.z$)();return eu(m)||kr(m)}()&&function Jn(){try{return!(!window||window===window.top)}catch(m){return!1}}(),this.fallbackToPolling=ws(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const v of Object.keys(this.listeners)){const b=this.storage.getItem(v),x=this.localCache[v];b!==x&&f(v,x,b)}}onStorageEvent(f,v=!1){if(!f.key)return void this.forAllChangedKeys((ae,Le,Ze)=>{this.notifyListeners(ae,Ze)});const b=f.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ae=this.storage.getItem(b);if(f.newValue!==ae)null!==f.newValue?this.storage.setItem(b,f.newValue):this.storage.removeItem(b);else if(this.localCache[b]===f.newValue&&!v)return}const x=()=>{const ae=this.storage.getItem(b);!v&&this.localCache[b]===ae||this.notifyListeners(b,ae)},H=this.storage.getItem(b);!function ea(){return(0,O.w1)()&&10===document.documentMode}()||H===f.newValue||f.newValue===f.oldValue?x():setTimeout(x,10)}notifyListeners(f,v){this.localCache[f]=v;const b=this.listeners[f];if(b)for(const x of Array.from(b))x(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,v,b)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:v,newValue:b}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(v)}_removeListener(f,v){this.listeners[f]&&(this.listeners[f].delete(v),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,v){var b=()=>super._set,x=this;return(0,g.Z)(function*(){yield b().call(x,f,v),x.localCache[f]=JSON.stringify(v)})()}_get(f){var v=()=>super._get,b=this;return(0,g.Z)(function*(){const x=yield v().call(b,f);return b.localCache[f]=JSON.stringify(x),x})()}_remove(f){var v=()=>super._remove,b=this;return(0,g.Z)(function*(){yield v().call(b,f),delete b.localCache[f]})()}}return m.type="LOCAL",m})(),ns=(()=>{class m extends ya{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,v){}_removeListener(f,v){}}return m.type="SESSION",m})();let du=(()=>{class m{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const v=this.receivers.find(x=>x.isListeningto(f));if(v)return v;const b=new m(f);return this.receivers.push(b),b}isListeningto(f){return this.eventTarget===f}handleEvent(f){var v=this;return(0,g.Z)(function*(){const b=f,{eventId:x,eventType:H,data:ae}=b.data,Le=v.handlersMap[H];if(!(null==Le?void 0:Le.size))return;b.ports[0].postMessage({status:"ack",eventId:x,eventType:H});const Ze=Array.from(Le).map(function(){var nt=(0,g.Z)(function*(sn){return sn(b.origin,ae)});return function(sn){return nt.apply(this,arguments)}}()),ft=yield function yl(m){return Promise.all(m.map(function(){var d=(0,g.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(v){return{fulfilled:!1,reason:v}}});return function(f){return d.apply(this,arguments)}}()))}(Ze);b.ports[0].postMessage({status:"done",eventId:x,eventType:H,response:ft})})()}_subscribe(f,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(v)}_unsubscribe(f,v){this.handlersMap[f]&&v&&this.handlersMap[f].delete(v),(!v||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function Ms(m="",d=10){let f="";for(let v=0;v<d;v++)f+=Math.floor(10*Math.random());return m+f}class Vc{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,f,v=50){var b=this;return(0,g.Z)(function*(){const x="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let H,ae;return new Promise((Le,Ze)=>{const ft=Ms("",20);x.port1.start();const nt=setTimeout(()=>{Ze(new Error("unsupported_event"))},v);ae={messageChannel:x,onMessage(sn){const Gr=sn;if(Gr.data.eventId===ft)switch(Gr.data.status){case"ack":clearTimeout(nt),H=setTimeout(()=>{Ze(new Error("timeout"))},3e3);break;case"done":clearTimeout(H),Le(Gr.data.response);break;default:clearTimeout(nt),clearTimeout(H),Ze(new Error("invalid_response"))}}},b.handlers.add(ae),x.port1.addEventListener("message",ae.onMessage),b.target.postMessage({eventType:d,eventId:ft,data:f},[x.port2])}).finally(()=>{ae&&b.removeMessageHandler(ae)})})()}}function Wt(){return window}function fn(){return void 0!==Wt().WorkerGlobalScope&&"function"==typeof Wt().importScripts}function so(){return(so=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(m){return null}})).apply(this,arguments)}const hu="firebaseLocalStorageDb",_a="firebaseLocalStorage",Ir="fbase_key";class Xn{constructor(d){this.request=d}toPromise(){return new Promise((d,f)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function Rs(m,d){return m.transaction([_a],d?"readwrite":"readonly").objectStore(_a)}function Dr(){const m=indexedDB.open(hu,1);return new Promise((d,f)=>{m.addEventListener("error",()=>{f(m.error)}),m.addEventListener("upgradeneeded",()=>{const v=m.result;try{v.createObjectStore(_a,{keyPath:Ir})}catch(b){f(b)}}),m.addEventListener("success",(0,g.Z)(function*(){const v=m.result;v.objectStoreNames.contains(_a)?d(v):(v.close(),yield function va(){const m=indexedDB.deleteDatabase(hu);return new Xn(m).toPromise()}(),d(yield Dr()))}))})}function vl(m,d,f){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,g.Z)(function*(m,d,f){const v=Rs(m,!0).put({[Ir]:d,value:f});return new Xn(v).toPromise()})).apply(this,arguments)}function si(){return(si=(0,g.Z)(function*(m,d){const f=Rs(m,!1).get(d),v=yield new Xn(f).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function wa(m,d){const f=Rs(m,!0).delete(d);return new Xn(f).toPromise()}const rs=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,g.Z)(function*(){return f.db||(f.db=yield Dr()),f.db})()}_withRetries(f){var v=this;return(0,g.Z)(function*(){let b=0;for(;;)try{const x=yield v._openDb();return yield f(x)}catch(x){if(b++>3)throw x;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,g.Z)(function*(){return fn()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,g.Z)(function*(){f.receiver=du._getInstance(function _l(){return fn()?self:null}()),f.receiver._subscribe("keyChanged",function(){var v=(0,g.Z)(function*(b,x){return{keyProcessed:(yield f._poll()).includes(x.key)}});return function(b,x){return v.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var v=(0,g.Z)(function*(b,x){return["keyChanged"]});return function(b,x){return v.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,g.Z)(function*(){var v,b;if(f.activeServiceWorker=yield function yt(){return so.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new Vc(f.activeServiceWorker);const x=yield f.sender._send("ping",{},800);!x||(null===(v=x[0])||void 0===v?void 0:v.fulfilled)&&(null===(b=x[0])||void 0===b?void 0:b.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var v=this;return(0,g.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Uc(){var m;return(null===(m=null==navigator?void 0:navigator.serviceWorker)||void 0===m?void 0:m.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:f},v.serviceWorkerReceiverAvailable?800:50)}catch(b){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const f=yield Dr();return yield vl(f,ma,"1"),yield wa(f,ma),!0}catch(f){}return!1})()}_withPendingWrite(f){var v=this;return(0,g.Z)(function*(){v.pendingWrites++;try{yield f()}finally{v.pendingWrites--}})()}_set(f,v){var b=this;return(0,g.Z)(function*(){return b._withPendingWrite((0,g.Z)(function*(){return yield b._withRetries(x=>vl(x,f,v)),b.localCache[f]=v,b.notifyServiceWorker(f)}))})()}_get(f){var v=this;return(0,g.Z)(function*(){const b=yield v._withRetries(x=>function Ns(m,d){return si.apply(this,arguments)}(x,f));return v.localCache[f]=b,b})()}_remove(f){var v=this;return(0,g.Z)(function*(){return v._withPendingWrite((0,g.Z)(function*(){return yield v._withRetries(b=>wa(b,f)),delete v.localCache[f],v.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,g.Z)(function*(){const v=yield f._withRetries(H=>{const ae=Rs(H,!1).getAll();return new Xn(ae).toPromise()});if(!v)return[];if(0!==f.pendingWrites)return[];const b=[],x=new Set;for(const{fbase_key:H,value:ae}of v)x.add(H),JSON.stringify(f.localCache[H])!==JSON.stringify(ae)&&(f.notifyListeners(H,ae),b.push(H));for(const H of Object.keys(f.localCache))f.localCache[H]&&!x.has(H)&&(f.notifyListeners(H,null),b.push(H));return b})()}notifyListeners(f,v){this.localCache[f]=v;const b=this.listeners[f];if(b)for(const x of Array.from(b))x(v)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(v)}_removeListener(f,v){this.listeners[f]&&(this.listeners[f].delete(v),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})();function jc(m,d){return At(m,"POST","/v2/accounts/mfaSignIn:start",jt(m,d))}function is(){return(is=(0,g.Z)(function*(m){return(yield At(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ca(m){return new Promise((d,f)=>{const v=document.createElement("script");v.setAttribute("src",m),v.onload=d,v.onerror=b=>{const x=ge("internal-error");x.customData=b,f(x)},v.type="text/javascript",v.charset="UTF-8",function Da(){var m,d;return null!==(d=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==d?d:document}().appendChild(v)})}function oo(m){return`__${m}${Math.floor(1e6*Math.random())}`}const Ri=1e12;class ba{constructor(d){this.auth=d,this.counter=Ri,this._widgets=new Map}render(d,f){const v=this.counter;return this._widgets.set(v,new wl(d,this.auth.name,f||{})),this.counter++,v}reset(d){var f;const v=d||Ri;null===(f=this._widgets.get(v))||void 0===f||f.delete(),this._widgets.delete(v)}getResponse(d){var f;return(null===(f=this._widgets.get(d||Ri))||void 0===f?void 0:f.getResponse())||""}execute(d){var f=this;return(0,g.Z)(function*(){var v;return null===(v=f._widgets.get(d||Ri))||void 0===v||v.execute(),""})()}}class wl{constructor(d,f,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const b="string"==typeof d?document.getElementById(d):d;ee(b,"argument-error",{appName:f}),this.container=b,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function uo(m){const d=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<m;v++)d.push(f.charAt(Math.floor(Math.random()*f.length)));return d.join("")}(50);const{callback:d,"expired-callback":f}=this.params;if(d)try{d(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const $c=oo("rcb"),fu=new Rn(3e4,6e4);class Hc{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Wt().grecaptcha}load(d,f=""){return ee(function Mp(m){return m.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m)}(f),d,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(Wt().grecaptcha):new Promise((v,b)=>{const x=Wt().setTimeout(()=>{b(ge(d,"network-request-failed"))},fu.get());Wt()[$c]=()=>{Wt().clearTimeout(x),delete Wt()[$c];const ae=Wt().grecaptcha;if(!ae)return void b(ge(d,"internal-error"));const Le=ae.render;ae.render=(Ze,ft)=>{const nt=Le(Ze,ft);return this.counter++,nt},this.hostLanguage=f,v(ae)},Ca(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:$c,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(x),b(ge(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){return!!Wt().grecaptcha&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class kh{load(d){return(0,g.Z)(function*(){return new ba(d)})()}clearedOneInstance(){}}const Gc="recaptcha",qc={theme:"light",type:"image"};class Wc{constructor(d,f=Object.assign({},qc),v){this.parameters=f,this.type=Gc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Oe(v),this.isInvisible="invisible"===this.parameters.size,ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const b="string"==typeof d?document.getElementById(d):d;ee(b,this.auth,"argument-error"),this.container=b,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new kh:new Hc,this.validateStartingState()}verify(){var d=this;return(0,g.Z)(function*(){d.assertNotDestroyed();const f=yield d.render(),v=d.getAssertedRecaptcha();return v.getResponse(f)||new Promise(x=>{const H=ae=>{!ae||(d.tokenChangeListeners.delete(H),x(ae))};d.tokenChangeListeners.add(H),d.isInvisible&&v.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return f=>{if(this.tokenChangeListeners.forEach(v=>v(f)),"function"==typeof d)d(f);else if("string"==typeof d){const v=Wt()[d];"function"==typeof v&&v(f)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,g.Z)(function*(){if(yield d.init(),!d.widgetId){let f=d.container;if(!d.isInvisible){const v=document.createElement("div");f.appendChild(v),f=v}d.widgetId=d.getAssertedRecaptcha().render(f,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,g.Z)(function*(){ee(kt()&&!fn(),d.auth,"internal-error"),yield function zc(){let m=null;return new Promise(d=>{"complete"!==document.readyState?(m=()=>d(),window.addEventListener("load",m)):d()}).catch(d=>{throw m&&window.removeEventListener("load",m),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const f=yield function Ia(m){return is.apply(this,arguments)}(d.auth);ee(f,d.auth,"internal-error"),d.parameters.sitekey=f})()}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ni{constructor(d,f){this.verificationId=d,this.onConfirmation=f}confirm(d){const f=Mo._fromVerification(this.verificationId,d);return this.onConfirmation(f)}}function an(){return(an=(0,g.Z)(function*(m,d,f){const v=Oe(m),b=yield br(v,d,(0,O.m9)(f));return new Ni(b,x=>au(v,x))})).apply(this,arguments)}function Cr(){return(Cr=(0,g.Z)(function*(m,d,f){const v=(0,O.m9)(m);yield bs(!1,v,"phone");const b=yield br(v.auth,d,(0,O.m9)(f));return new Ni(b,x=>Qi(v,x))})).apply(this,arguments)}function gu(){return(gu=(0,g.Z)(function*(m,d,f){const v=(0,O.m9)(m),b=yield br(v.auth,d,(0,O.m9)(f));return new Ni(b,x=>No(v,x))})).apply(this,arguments)}function br(m,d,f){return mi.apply(this,arguments)}function mi(){return(mi=(0,g.Z)(function*(m,d,f){var v;const b=yield f.verify();try{let x;if(ee("string"==typeof b,m,"argument-error"),ee(f.type===Gc,m,"argument-error"),x="string"==typeof d?{phoneNumber:d}:d,"session"in x){const H=x.session;if("phoneNumber"in x)return ee("enroll"===H.type,m,"internal-error"),(yield lu(m,{idToken:H.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:b}})).phoneSessionInfo.sessionInfo;{ee("signin"===H.type,m,"internal-error");const ae=(null===(v=x.multiFactorHint)||void 0===v?void 0:v.uid)||x.multiFactorUid;return ee(ae,m,"missing-multi-factor-info"),(yield jc(m,{mfaPendingCredential:H.credential,mfaEnrollmentId:ae,phoneSignInInfo:{recaptchaToken:b}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:H}=yield Ep(m,{phoneNumber:x.phoneNumber,recaptchaToken:b});return H}}finally{f._reset()}})).apply(this,arguments)}function lo(){return(lo=(0,g.Z)(function*(m,d){yield Kt((0,O.m9)(m),d)})).apply(this,arguments)}let Br=(()=>{class m{constructor(f){this.providerId=m.PROVIDER_ID,this.auth=Oe(f)}verifyPhoneNumber(f,v){return br(this.auth,f,(0,O.m9)(v))}static credential(f,v){return Mo._fromVerification(f,v)}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:v,temporaryProof:b}=f;return v&&b?Mo._fromTokenResponse(v,b):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function jr(m,d){return d?se(d):(ee(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class Ta extends Ft{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Tn(d,this._buildIdpRequest())}_linkToIdToken(d,f){return Tn(d,this._buildIdpRequest(f))}_getReauthenticationResolver(d){return Tn(d,this._buildIdpRequest())}_buildIdpRequest(d){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(f.idToken=d),f}}function Aa(m){return to(m.auth,new Ta(m),m.bypassAuthState)}function Zc(m){const{auth:d,user:f}=m;return ee(f,d,"internal-error"),ou(f,new Ta(m),m.bypassAuthState)}function Lh(m){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,g.Z)(function*(m){const{auth:d,user:f}=m;return ee(f,d,"internal-error"),Kt(f,new Ta(m),m.bypassAuthState)})).apply(this,arguments)}class oi{constructor(d,f,v,b,x=!1){this.auth=d,this.resolver=v,this.user=b,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var d=this;return new Promise(function(){var f=(0,g.Z)(function*(v,b){d.pendingPromise={resolve:v,reject:b};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(x){d.reject(x)}});return function(v,b){return f.apply(this,arguments)}}())}onAuthEvent(d){var f=this;return(0,g.Z)(function*(){const{urlResponse:v,sessionId:b,postBody:x,tenantId:H,error:ae,type:Le}=d;if(ae)return void f.reject(ae);const Ze={auth:f.auth,requestUri:v,sessionId:b,tenantId:H||void 0,postBody:x||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Le)(Ze))}catch(ft){f.reject(ft)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return Aa;case"linkViaPopup":case"linkViaRedirect":return Lh;case"reauthViaPopup":case"reauthViaRedirect":return Zc;default:ie(this.auth,"internal-error")}}resolve(d){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Vh=new Rn(2e3,1e4);function Uh(){return(Uh=(0,g.Z)(function*(m,d,f){const v=Oe(m);je(m,d,Cs);const b=jr(v,f);return new Cl(v,"signInViaPopup",d,b).executeNotNull()})).apply(this,arguments)}function ss(){return(ss=(0,g.Z)(function*(m,d,f){const v=(0,O.m9)(m);je(v.auth,d,Cs);const b=jr(v.auth,f);return new Cl(v.auth,"reauthViaPopup",d,b,v).executeNotNull()})).apply(this,arguments)}function Dl(){return(Dl=(0,g.Z)(function*(m,d,f){const v=(0,O.m9)(m);je(v.auth,d,Cs);const b=jr(v.auth,f);return new Cl(v.auth,"linkViaPopup",d,b,v).executeNotNull()})).apply(this,arguments)}let Cl=(()=>{class m extends oi{constructor(f,v,b,x,H){super(f,v,x,H),this.provider=b,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var f=this;return(0,g.Z)(function*(){const v=yield f.execute();return ee(v,f.auth,"internal-error"),v})()}onExecution(){var f=this;return(0,g.Z)(function*(){ne(1===f.filter.length,"Popup operations only handle one event");const v=Ms();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],v),f.authWindow.associatedEvent=v,f.resolver._originValidation(f.auth).catch(b=>{f.reject(b)}),f.resolver._isIframeWebStorageSupported(f.auth,b=>{b||f.reject(ge(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(ge(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const f=()=>{var v,b;this.pollId=(null===(b=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===b?void 0:b.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ge(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,Vh.get())};f()}}return m.currentPopupAction=null,m})();const os=new Map;class ai extends oi{constructor(d,f,v=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,v),this.eventId=null}execute(){var d=()=>super.execute,f=this;return(0,g.Z)(function*(){let v=os.get(f.auth._key());if(!v){try{const x=(yield function Fo(m,d){return Bh.apply(this,arguments)}(f.resolver,f.auth))?yield d().call(f):null;v=()=>Promise.resolve(x)}catch(b){v=()=>Promise.reject(b)}os.set(f.auth._key(),v)}return f.bypassAuthState||os.set(f.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(d){var f=()=>super.onAuthEvent,v=this;return(0,g.Z)(function*(){if("signInViaRedirect"===d.type)return f().call(v,d);if("unknown"!==d.type){if(d.eventId){const b=yield v.auth._redirectUserForId(d.eventId);if(b)return v.user=b,f().call(v,d);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function Bh(){return(Bh=(0,g.Z)(function*(m,d){const f=D(d),v=jh(m);if(!(yield v._isAvailable()))return!1;const b="true"===(yield v._get(f));return yield v._remove(f),b})).apply(this,arguments)}function Pi(m,d){return Os.apply(this,arguments)}function Os(){return(Os=(0,g.Z)(function*(m,d){return jh(m)._set(D(d),"true")})).apply(this,arguments)}function jh(m){return se(m._redirectPersistence)}function D(m){return On("pendingRedirect",m.config.apiKey,m.name)}function F(){return(F=(0,g.Z)(function*(m,d,f){const v=Oe(m);je(m,d,Cs);const b=jr(v,f);return yield Pi(b,v),b._openRedirect(v,d,"signInViaRedirect")})).apply(this,arguments)}function Ae(){return(Ae=(0,g.Z)(function*(m,d,f){const v=(0,O.m9)(m);je(v.auth,d,Cs);const b=jr(v.auth,f);yield Pi(b,v.auth);const x=yield Ps(v);return b._openRedirect(v.auth,d,"reauthViaRedirect",x)})).apply(this,arguments)}function Mt(){return(Mt=(0,g.Z)(function*(m,d,f){const v=(0,O.m9)(m);je(v.auth,d,Cs);const b=jr(v.auth,f);yield bs(!1,v,d.providerId),yield Pi(b,v.auth);const x=yield Ps(v);return b._openRedirect(v.auth,d,"linkViaRedirect",x)})).apply(this,arguments)}function Ln(){return(Ln=(0,g.Z)(function*(m,d){return yield Oe(m)._initializationPromise,Zn(m,d,!1)})).apply(this,arguments)}function Zn(m,d){return rn.apply(this,arguments)}function rn(){return(rn=(0,g.Z)(function*(m,d,f=!1){const v=Oe(m),b=jr(v,d),H=yield new ai(v,b,f).execute();return H&&!f&&(delete H.user._redirectEventId,yield v._persistUserIfCurrent(H.user),yield v._setRedirectUser(null,d)),H})).apply(this,arguments)}function Ps(m){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,g.Z)(function*(m){const d=Ms(`${m.uid}:::`);return m._redirectEventId=d,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),d})).apply(this,arguments)}class as{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let f=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(d,v)&&(f=!0,this.sendToConsumer(d,v),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Qc(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _u(m);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=d,f=!0)),f}sendToConsumer(d,f){var v;if(d.error&&!_u(d)){const b=(null===(v=d.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";f.onError(ge(this.auth,b))}else f.onAuthEvent(d)}isEventForConsumer(d,f){const v=null===f.eventId||!!d.eventId&&d.eventId===f.eventId;return f.filter.includes(d.type)&&v}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ar(d))}saveEventToCache(d){this.cachedEventUids.add(Ar(d)),this.lastProcessedEventTime=Date.now()}}function Ar(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(d=>d).join("-")}function _u({type:m,error:d}){return"unknown"===m&&"auth/no-auth-event"===(null==d?void 0:d.code)}function bl(m){return co.apply(this,arguments)}function co(){return(co=(0,g.Z)(function*(m,d={}){return At(m,"GET","/v1/projects",d)})).apply(this,arguments)}const $h=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hh=/^https?/;function ho(){return(ho=(0,g.Z)(function*(m){if(m.config.emulator)return;const{authorizedDomains:d}=yield bl(m);for(const f of d)try{if(vu(f))return}catch(v){}ie(m,"unauthorized-domain")})).apply(this,arguments)}function vu(m){const d=pt(),{protocol:f,hostname:v}=new URL(d);if(m.startsWith("chrome-extension://")){const H=new URL(m);return""===H.hostname&&""===v?"chrome-extension:"===f&&m.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===f&&H.hostname===v}if(!Hh.test(f))return!1;if($h.test(m))return v===m;const b=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+b+"|"+b+")$","i").test(v)}const xp=new Rn(3e4,6e4);function Gh(){const m=Wt().___jsl;if(null==m?void 0:m.H)for(const d of Object.keys(m.H))if(m.H[d].r=m.H[d].r||[],m.H[d].L=m.H[d].L||[],m.H[d].r=[...m.H[d].L],m.CP)for(let f=0;f<m.CP.length;f++)m.CP[f]=null}let Eu=null;function h0(m){return Eu=Eu||function qh(m){return new Promise((d,f)=>{var v,b,x;function H(){Gh(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Gh(),f(ge(m,"network-request-failed"))},timeout:xp.get()})}if(null===(b=null===(v=Wt().gapi)||void 0===v?void 0:v.iframes)||void 0===b?void 0:b.Iframe)d(gapi.iframes.getContext());else{if(!(null===(x=Wt().gapi)||void 0===x?void 0:x.load)){const ae=oo("iframefcb");return Wt()[ae]=()=>{gapi.load?H():f(ge(m,"network-request-failed"))},Ca(`https://apis.google.com/js/api.js?onload=${ae}`).catch(Le=>f(Le))}H()}}).catch(d=>{throw Eu=null,d})}(m),Eu}const Xm=new Rn(5e3,15e3),Al={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Rp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Sl(m){const d=m.config;ee(d.authDomain,m,"auth-domain-config-required");const f=d.emulator?Gt(d,"emulator/auth/iframe"):`https://${m.config.authDomain}/__/auth/iframe`,v={apiKey:d.apiKey,appName:m.name,v:pe.SDK_VERSION},b=Rp.get(m.config.apiHost);b&&(v.eid=b);const x=m._getFrameworks();return x.length&&(v.fw=x.join(",")),`${f}?${(0,O.xO)(v).slice(1)}`}function Np(){return Np=(0,g.Z)(function*(m){const d=yield h0(m),f=Wt().gapi;return ee(f,m,"internal-error"),d.open({where:document.body,url:Sl(m),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Al,dontclear:!0},v=>new Promise(function(){var b=(0,g.Z)(function*(x,H){yield v.restyle({setHideOnLeave:!1});const ae=ge(m,"network-request-failed"),Le=Wt().setTimeout(()=>{H(ae)},Xm.get());function Ze(){Wt().clearTimeout(Le),x(v)}v.ping(Ze).then(Ze,()=>{H(ae)})});return function(x,H){return b.apply(this,arguments)}}()))}),Np.apply(this,arguments)}const p0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ed{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(d){}}}function td(m,d,f,v,b,x){ee(m.config.authDomain,m,"auth-domain-config-required"),ee(m.config.apiKey,m,"invalid-api-key");const H={apiKey:m.config.apiKey,appName:m.name,authType:f,redirectUrl:v,v:pe.SDK_VERSION,eventId:b};if(d instanceof Cs){d.setDefaultLanguage(m.languageCode),H.providerId=d.providerId||"",(0,O.xb)(d.getCustomParameters())||(H.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Le,Ze]of Object.entries(x||{}))H[Le]=Ze}if(d instanceof ri){const Le=d.getScopes().filter(Ze=>""!==Ze);Le.length>0&&(H.scopes=Le.join(","))}m.tenantId&&(H.tid=m.tenantId);const ae=H;for(const Le of Object.keys(ae))void 0===ae[Le]&&delete ae[Le];return`${function ty({config:m}){return m.emulator?Gt(m,"emulator/auth/handler"):`https://${m.authDomain}/__/auth/handler`}(m)}?${(0,O.xO)(ae).slice(1)}`}const us="webStorageSupport";class kp extends class ny{constructor(d){this.factorId=d}_process(d,f,v){switch(f.type){case"enroll":return this._finalizeEnroll(d,f.credential,v);case"signin":return this._finalizeSignIn(d,f.credential);default:return Z("unexpected MultiFactorSessionType")}}}{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new kp(d)}_finalizeEnroll(d,f,v){return function zn(m,d){return At(m,"POST","/v2/accounts/mfaEnrollment:finalize",jt(m,d))}(d,{idToken:f,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,f){return function El(m,d){return At(m,"POST","/v2/accounts/mfaSignIn:finalize",jt(m,d))}(d,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ry=(()=>{class m{constructor(){}static assertion(f){return kp._fromCredential(f)}}return m.FACTOR_ID="phone",m})();var iy="@firebase/auth";class Fp{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var f=this;return(0,g.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const f=this.auth.onIdTokenChanged(v=>{var b;d((null===(b=v)||void 0===b?void 0:b.stsTokenManager.accessToken)||null)});this.internalListeners.set(d,f),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const f=this.internalListeners.get(d);!f||(this.internalListeners.delete(d),f(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Lo(){return window}function wu(){return(wu=(0,g.Z)(function*(m,d,f){var v;const{BuildInfo:b}=Lo();ne(d.sessionId,"AuthEvent did not contain a session ID");const x=yield y0(d.sessionId),H={};return kr()?H.ibi=b.packageName:_r()?H.apn=b.packageName:ie(m,"operation-not-supported-in-this-environment"),b.displayName&&(H.appDisplayName=b.displayName),H.sessionId=x,td(m,f,d.type,void 0,null!==(v=d.eventId)&&void 0!==v?v:void 0,H)})).apply(this,arguments)}function ki(){return(ki=(0,g.Z)(function*(m){const{BuildInfo:d}=Lo(),f={};kr()?f.iosBundleId=d.packageName:_r()?f.androidPackageName=d.packageName:ie(m,"operation-not-supported-in-this-environment"),yield bl(m,f)})).apply(this,arguments)}function nd(){return(nd=(0,g.Z)(function*(m,d,f){const{cordova:v}=Lo();let b=()=>{};try{yield new Promise((x,H)=>{let ae=null;function Le(){var nt;x();const sn=null===(nt=v.plugins.browsertab)||void 0===nt?void 0:nt.close;"function"==typeof sn&&sn(),"function"==typeof(null==f?void 0:f.close)&&f.close()}function Ze(){ae||(ae=window.setTimeout(()=>{H(ge(m,"redirect-cancelled-by-user"))},2e3))}function ft(){"visible"===(null==document?void 0:document.visibilityState)&&Ze()}d.addPassiveListener(Le),document.addEventListener("resume",Ze,!1),_r()&&document.addEventListener("visibilitychange",ft,!1),b=()=>{d.removePassiveListener(Le),document.removeEventListener("resume",Ze,!1),document.removeEventListener("visibilitychange",ft,!1),ae&&window.clearTimeout(ae)}})}finally{b()}})).apply(this,arguments)}function y0(m){return oy.apply(this,arguments)}function oy(){return(oy=(0,g.Z)(function*(m){const d=Bp(m),f=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(f)).map(b=>b.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Bp(m){if(ne(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(m);const d=new ArrayBuffer(m.length),f=new Uint8Array(d);for(let v=0;v<m.length;v++)f[v]=m.charCodeAt(v);return f}!function sy(m){(0,pe._registerComponent)(new re.wA("auth",(d,{options:f})=>{const v=d.getProvider("app").getImmediate(),{apiKey:b,authDomain:x}=v.options;return(H=>{ee(b&&!b.includes(":"),"invalid-api-key",{appName:H.name}),ee(!(null==x?void 0:x.includes(":")),"argument-error",{appName:H.name});const ae={apiKey:b,authDomain:x,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Do(m)},Le=new Fr(H,ae);return function ce(m,d){const f=(null==d?void 0:d.persistence)||[],v=(Array.isArray(f)?f:[f]).map(se);(null==d?void 0:d.errorMap)&&m._updateErrorMap(d.errorMap),m._initializeWithPersistence(v,null==d?void 0:d.popupRedirectResolver)}(Le,f),Le})(v)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,f,v)=>{d.getProvider("auth-internal").initialize()})),(0,pe._registerComponent)(new re.wA("auth-internal",d=>{const f=Oe(d.getProvider("auth").getImmediate());return new Fp(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,pe.registerVersion)(iy,"0.19.8",function Yh(m){switch(m){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(m)),(0,pe.registerVersion)(iy,"0.19.8","esm2017")}("Browser");class rd extends as{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(d)),super.onEvent(d)}initialized(){var d=this;return(0,g.Z)(function*(){yield d.initPromise})()}}function xa(m){return id.apply(this,arguments)}function id(){return(id=(0,g.Z)(function*(m){const d=yield sd()._get(tf(m));return d&&(yield sd()._remove(tf(m))),d})).apply(this,arguments)}function uy(){const m=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const v=Math.floor(Math.random()*d.length);m.push(d.charAt(v))}return m.join("")}function sd(){return se(wr)}function tf(m){return On("authEvent",m.config.apiKey,m.name)}function Rl(m){if(!(null==m?void 0:m.includes("?")))return{};const[d,...f]=m.split("?");return(0,O.zd)(f.join("?"))}function rf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ge("no-auth-event")}}function sf(){var m;return(null===(m=null==self?void 0:self.location)||void 0===m?void 0:m.protocol)||null}function cy(m=(0,O.z$)()){return!("file:"!==sf()&&"ionic:"!==sf()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function $r(){try{const m=self.localStorage,d=Ms();if(m)return m.setItem(d,"1"),m.removeItem(d),!function ad(m=(0,O.z$)()){return function v0(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function qI(m=(0,O.z$)()){return/Edge\/\d+/.test(m)}(m)}()||(0,O.hl)()}catch(m){return ud()&&(0,O.hl)()}return!1}function ud(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ui(){return(function _0(){return"http:"===sf()||"https:"===sf()}()||(0,O.ru)()||cy())&&!function dy(){return(0,O.b$)()||(0,O.UG)()}()&&$r()&&!ud()}function of(){return cy()&&"undefined"!=typeof document}function pn(){return(pn=(0,g.Z)(function*(){return!!of()&&new Promise(m=>{const d=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),m(!0)})})})).apply(this,arguments)}const yi={LOCAL:"local",NONE:"none",SESSION:"session"},Ra=ee,Hr="persistence";function Cu(m){return af.apply(this,arguments)}function af(){return(af=(0,g.Z)(function*(m){yield m._initializationPromise;const d=Tu(),f=On(Hr,m.config.apiKey,m.name);d&&d.setItem(f,m._getPersistence())})).apply(this,arguments)}function Tu(){var m;try{return(null===(m=function Du(){return"undefined"!=typeof window?window:null}())||void 0===m?void 0:m.sessionStorage)||null}catch(d){return null}}const hy=ee;class ks{constructor(){this.browserResolver=se(class xl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ns,this._completeRedirectFn=Zn}_openPopup(d,f,v,b){var x=this;return(0,g.Z)(function*(){var H;ne(null===(H=x.eventManagers[d._key()])||void 0===H?void 0:H.manager,"_initialize() not called before _openPopup()");const ae=td(d,f,v,pt(),b);return function Op(m,d,f,v=500,b=600){const x=Math.max((window.screen.availHeight-b)/2,0).toString(),H=Math.max((window.screen.availWidth-v)/2,0).toString();let ae="";const Le=Object.assign(Object.assign({},p0),{width:v.toString(),height:b.toString(),top:x,left:H}),Ze=(0,O.z$)().toLowerCase();f&&(ae=Xo(Ze)?"_blank":f),Jo(Ze)&&(d=d||"http://localhost",Le.scrollbars="yes");const ft=Object.entries(Le).reduce((sn,[Gr,Au])=>`${sn}${Gr}=${Au},`,"");if(function Ks(m=(0,O.z$)()){var d;return kr(m)&&!!(null===(d=window.navigator)||void 0===d?void 0:d.standalone)}(Ze)&&"_self"!==ae)return function Pp(m,d){const f=document.createElement("a");f.href=m,f.target=d;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(v)}(d||"",ae),new ed(null);const nt=window.open(d||"",ae,ft);ee(nt,m,"popup-blocked");try{nt.focus()}catch(sn){}return new ed(nt)}(d,ae,Ms())})()}_openRedirect(d,f,v,b){var x=this;return(0,g.Z)(function*(){return yield x._originValidation(d),function xs(m){Wt().location.href=m}(td(d,f,v,pt(),b)),new Promise(()=>{})})()}_initialize(d){const f=d._key();if(this.eventManagers[f]){const{manager:b,promise:x}=this.eventManagers[f];return b?Promise.resolve(b):(ne(x,"If manager is not set, promise should be"),x)}const v=this.initAndGetManager(d);return this.eventManagers[f]={promise:v},v.catch(()=>{delete this.eventManagers[f]}),v}initAndGetManager(d){var f=this;return(0,g.Z)(function*(){const v=yield function f0(m){return Np.apply(this,arguments)}(d),b=new as(d);return v.register("authEvent",x=>(ee(null==x?void 0:x.authEvent,d,"invalid-auth-event"),{status:b.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[d._key()]={manager:b},f.iframes[d._key()]=v,b})()}_isIframeWebStorageSupported(d,f){this.iframes[d._key()].send(us,{type:us},b=>{var x;const H=null===(x=null==b?void 0:b[0])||void 0===x?void 0:x[us];void 0!==H&&f(!!H),ie(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Jm(m){return ho.apply(this,arguments)}(d)),this.originValidationPromises[f]}get _shouldInitProactively(){return ws()||eu()||kr()}}),this.cordovaResolver=se(class Hp{constructor(){this._redirectPersistence=ns,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Zn}_initialize(d){var f=this;return(0,g.Z)(function*(){const v=d._key();let b=f.eventManagers.get(v);return b||(b=new rd(d),f.eventManagers.set(v,b),f.attachCallbackListeners(d,b)),b})()}_openPopup(d){ie(d,"operation-not-supported-in-this-environment")}_openRedirect(d,f,v,b){var x=this;return(0,g.Z)(function*(){!function Jh(m){var d,f,v,b,x,H,ae,Le,Ze,ft;const nt=Lo();ee("function"==typeof(null===(d=null==nt?void 0:nt.universalLinks)||void 0===d?void 0:d.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ee(void 0!==(null===(f=null==nt?void 0:nt.BuildInfo)||void 0===f?void 0:f.packageName),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ee("function"==typeof(null===(x=null===(b=null===(v=null==nt?void 0:nt.cordova)||void 0===v?void 0:v.plugins)||void 0===b?void 0:b.browsertab)||void 0===x?void 0:x.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(Le=null===(ae=null===(H=null==nt?void 0:nt.cordova)||void 0===H?void 0:H.plugins)||void 0===ae?void 0:ae.browsertab)||void 0===Le?void 0:Le.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(ft=null===(Ze=null==nt?void 0:nt.cordova)||void 0===Ze?void 0:Ze.InAppBrowser)||void 0===ft?void 0:ft.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const H=yield x._initialize(d);yield H.initialized(),H.resetRedirect(),function yu(){os.clear()}(),yield x._originValidation(d);const ae=function ef(m,d,f=null){return{type:d,eventId:f,urlResponse:null,sessionId:uy(),postBody:null,tenantId:m.tenantId,error:ge(m,"no-auth-event")}}(d,v,b);yield function ay(m,d){return sd()._set(tf(m),d)}(d,ae);const Le=yield function Vp(m,d,f){return wu.apply(this,arguments)}(d,ae,f),Ze=yield function Ma(m){const{cordova:d}=Lo();return new Promise(f=>{d.plugins.browsertab.isAvailable(v=>{let b=null;v?d.plugins.browsertab.openUrl(m):b=d.InAppBrowser.open(m,function vc(m=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),f(b)})})}(Le);return function Up(m,d,f){return nd.apply(this,arguments)}(d,H,Ze)})()}_isIframeWebStorageSupported(d,f){throw new Error("Method not implemented.")}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Qh(m){return ki.apply(this,arguments)}(d)),this.originValidationPromises[f]}attachCallbackListeners(d,f){const{universalLinks:v,handleOpenURL:b,BuildInfo:x}=Lo(),H=setTimeout((0,g.Z)(function*(){yield xa(d),f.onEvent(rf())}),500),ae=function(){var ft=(0,g.Z)(function*(nt){clearTimeout(H);const sn=yield xa(d);let Gr=null;sn&&(null==nt?void 0:nt.url)&&(Gr=function jp(m,d){var f,v;const b=function Iu(m){const d=Rl(m),f=d.link?decodeURIComponent(d.link):void 0,v=Rl(f).link,b=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return Rl(b).link||b||v||f||m}(d);if(b.includes("/__/auth/callback")){const x=Rl(b),H=x.firebaseError?function $p(m){try{return JSON.parse(m)}catch(d){return null}}(decodeURIComponent(x.firebaseError)):null,ae=null===(v=null===(f=null==H?void 0:H.code)||void 0===f?void 0:f.split("auth/"))||void 0===v?void 0:v[1],Le=ae?ge(ae):null;return Le?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:b,postBody:null}}return null}(sn,nt.url)),f.onEvent(Gr||rf())});return function(sn){return ft.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,ae);const Le=b,Ze=`${x.packageName.toLowerCase()}://`;Lo().handleOpenURL=function(){var ft=(0,g.Z)(function*(nt){if(nt.toLowerCase().startsWith(Ze)&&ae({url:nt}),"function"==typeof Le)try{Le(nt)}catch(sn){console.error(sn)}});return function(nt){return ft.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ns,this._completeRedirectFn=Zn}_initialize(d){var f=this;return(0,g.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,f,v,b){var x=this;return(0,g.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(d,f,v,b)})()}_openRedirect(d,f,v,b){var x=this;return(0,g.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(d,f,v,b)})()}_isIframeWebStorageSupported(d,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,f)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return of()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return hy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,g.Z)(function*(){if(d.underlyingResolver)return;const f=yield function Qe(){return pn.apply(this,arguments)}();d.underlyingResolver=f?d.cordovaResolver:d.browserResolver})()}}function Fs(m){return m.unwrap()}function uf(m){return Vo(m)}function Vo(m){const{_tokenResponse:d}=m instanceof O.ZR?m.customData:m;if(!d)return null;if(!(m instanceof O.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return Br.credentialFromResult(m);const f=d.providerId;if(!f||"password"===f)return null;let v;switch(f){case"google.com":v=Ro;break;case"facebook.com":v=xo;break;case"github.com":v=Tc;break;case"twitter.com":v=ii;break;default:const{oauthIdToken:b,oauthAccessToken:x,oauthTokenSecret:H,pendingToken:ae,nonce:Le}=d;return x||H||b||ae?ae?f.startsWith("saml.")?eo._create(f,ae):zi._fromParams({providerId:f,signInMethod:f,pendingToken:ae,idToken:b,accessToken:x}):new Xs(f).credential({idToken:b,accessToken:x,rawNonce:Le}):null}return m instanceof O.ZR?v.credentialFromError(m):v.credentialFromResult(m)}function An(m,d){return d.catch(f=>{throw f instanceof O.ZR&&function _e(m,d){var f;const v=null===(f=d.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===d.code)d.resolver=new fy(m,function ml(m,d){var f;const v=(0,O.m9)(m),b=d;return ee(d.customData.operationType,v,"argument-error"),ee(null===(f=b.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,v,"argument-error"),ga._fromError(v,b)}(m,d));else if(v){const b=Vo(d),x=d;b&&(x.credential=b,x.tenantId=v.tenantId||void 0,x.email=v.email||void 0,x.phoneNumber=v.phoneNumber||void 0)}}(m,f),f}).then(f=>{const b=f.user;return{operationType:f.operationType,credential:uf(f),additionalUserInfo:Wn(f),user:lr.getOrCreate(b)}})}function Ls(m,d){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,g.Z)(function*(m,d){const f=yield d;return{verificationId:f.verificationId,confirm:v=>An(m,f.confirm(v))}})).apply(this,arguments)}class fy{constructor(d,f){this.resolver=f,this.auth=function E0(m){return m.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return An(Fs(this.auth),this.resolver.resolveSignIn(d))}}class lr{constructor(d){this._delegate=d,this.multiFactor=function Ap(m){const d=(0,O.m9)(m);return ko.has(d)||ko.set(d,ts._fromUser(d)),ko.get(d)}(d)}static getOrCreate(d){return lr.USER_MAP.has(d)||lr.USER_MAP.set(d,new lr(d)),lr.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var f=this;return(0,g.Z)(function*(){return An(f.auth,Qi(f._delegate,d))})()}linkWithPhoneNumber(d,f){var v=this;return(0,g.Z)(function*(){return Ls(v.auth,function pu(m,d,f){return Cr.apply(this,arguments)}(v._delegate,d,f))})()}linkWithPopup(d){var f=this;return(0,g.Z)(function*(){return An(f.auth,function Yc(m,d,f){return Dl.apply(this,arguments)}(f._delegate,d,ks))})()}linkWithRedirect(d){var f=this;return(0,g.Z)(function*(){return yield Cu(Oe(f.auth)),function ke(m,d,f){return function qe(m,d,f){return Mt.apply(this,arguments)}(m,d,f)}(f._delegate,d,ks)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var f=this;return(0,g.Z)(function*(){return An(f.auth,No(f._delegate,d))})()}reauthenticateWithPhoneNumber(d,f){return Ls(this.auth,function Ur(m,d,f){return gu.apply(this,arguments)}(this._delegate,d,f))}reauthenticateWithPopup(d){return An(this.auth,function Kc(m,d,f){return ss.apply(this,arguments)}(this._delegate,d,ks))}reauthenticateWithRedirect(d){var f=this;return(0,g.Z)(function*(){return yield Cu(Oe(f.auth)),function W(m,d,f){return function te(m,d,f){return Ae.apply(this,arguments)}(m,d,f)}(f._delegate,d,ks)})()}sendEmailVerification(d){return function Ji(m,d){return ha.apply(this,arguments)}(this._delegate,d)}unlink(d){var f=this;return(0,g.Z)(function*(){return yield function Yi(m,d){return ol.apply(this,arguments)}(f._delegate,d),f})()}updateEmail(d){return function fl(m,d){return uu((0,O.m9)(m),d,null)}(this._delegate,d)}updatePassword(d){return function Tp(m,d){return uu((0,O.m9)(m),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function Il(m,d){return lo.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function hl(m,d){return pa.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,f){return function Pc(m,d,f){return fa.apply(this,arguments)}(this._delegate,d,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}lr.USER_MAP=new WeakMap;const We=ee;let Nl=(()=>{class m{constructor(f,v){if(this.app=f,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:b}=f.options;We(b,"invalid-api-key",{appName:f.name}),We(b,"invalid-api-key",{appName:f.name});const x="undefined"!=typeof window?ks:void 0;this._delegate=v.initialize({options:{persistence:cd(b,f.name),popupRedirectResolver:x}}),this._delegate._updateErrorMap(xe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?lr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,v){!function Zt(m,d,f){const v=Oe(m);ee(v._canInitEmulator,v,"emulator-config-failed"),ee(/^https?:\/\//.test(d),v,"invalid-emulator-scheme");const b=!!(null==f?void 0:f.disableWarnings),x=vr(d),{host:H,port:ae}=function qi(m){const d=vr(m),f=/(\/\/)?([^?#/]+)/.exec(m.substr(d.length));if(!f)return{host:"",port:null};const v=f[2].split("@").pop()||"",b=/^(\[[^\]]+\])(:|$)/.exec(v);if(b){const x=b[1];return{host:x,port:_n(v.substr(x.length+1))}}{const[x,H]=v.split(":");return{host:x,port:_n(H)}}}(d);v.config.emulator={url:`${x}//${H}${null===ae?"":`:${ae}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:H,port:ae,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:b})}),b||function Wi(){function m(){const d=document.createElement("p"),f=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,f,v)}applyActionCode(f){return function Sh(m,d){return we.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return Tt(this._delegate,f)}confirmPasswordReset(f,v){return function ul(m,d,f){return ua.apply(this,arguments)}(this._delegate,f,v)}createUserWithEmailAndPassword(f,v){var b=this;return(0,g.Z)(function*(){return An(b._delegate,function ca(m,d,f){return Er.apply(this,arguments)}(b._delegate,f,v))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function dl(m,d){return Si.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function Oc(m,d){const f=Zi.parseLink(d);return"EMAIL_SIGNIN"===(null==f?void 0:f.operation)}(0,f)}getRedirectResult(){var f=this;return(0,g.Z)(function*(){We(ui(),f._delegate,"operation-not-supported-in-this-environment");const v=yield function Lt(m,d){return Ln.apply(this,arguments)}(f._delegate,ks);return v?An(f._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function ly(m,d){Oe(m)._logFramework(d)}(this._delegate,f)}onAuthStateChanged(f,v,b){const{next:x,error:H,complete:ae}=gt(f,v,b);return this._delegate.onAuthStateChanged(x,H,ae)}onIdTokenChanged(f,v,b){const{next:x,error:H,complete:ae}=gt(f,v,b);return this._delegate.onIdTokenChanged(x,H,ae)}sendSignInLinkToEmail(f,v){return function cl(m,d,f){return Nc.apply(this,arguments)}(this._delegate,f,v)}sendPasswordResetEmail(f,v){return function Rc(m,d,f){return aa.apply(this,arguments)}(this._delegate,f,v||void 0)}setPersistence(f){var v=this;return(0,g.Z)(function*(){let b;switch(function ld(m,d){Ra(Object.values(yi).includes(d),m,"invalid-persistence-type"),(0,O.b$)()?Ra(d!==yi.SESSION,m,"unsupported-persistence-type"):(0,O.UG)()?Ra(d===yi.NONE,m,"unsupported-persistence-type"):ud()?Ra(d===yi.NONE||d===yi.LOCAL&&(0,O.hl)(),m,"unsupported-persistence-type"):Ra(d===yi.NONE||$r(),m,"unsupported-persistence-type")}(v._delegate,f),f){case yi.SESSION:b=ns;break;case yi.LOCAL:b=(yield se(rs)._isAvailable())?rs:wr;break;case yi.NONE:b=It;break;default:return ie("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(b)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return An(this._delegate,function xc(m){return ru.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return An(this._delegate,au(this._delegate,f))}signInWithCustomToken(f){return An(this._delegate,function Ts(m,d){return As.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,v){return An(this._delegate,function ll(m,d,f){return au((0,O.m9)(m),na.credential(d,f))}(this._delegate,f,v))}signInWithEmailLink(f,v){return An(this._delegate,function da(m,d,f){return Oo.apply(this,arguments)}(this._delegate,f,v))}signInWithPhoneNumber(f,v){return Ls(this._delegate,function Fh(m,d,f){return an.apply(this,arguments)}(this._delegate,f,v))}signInWithPopup(f){var v=this;return(0,g.Z)(function*(){return We(ui(),v._delegate,"operation-not-supported-in-this-environment"),An(v._delegate,function mu(m,d,f){return Uh.apply(this,arguments)}(v._delegate,f,ks))})()}signInWithRedirect(f){var v=this;return(0,g.Z)(function*(){return We(ui(),v._delegate,"operation-not-supported-in-this-environment"),yield Cu(v._delegate),function C(m,d,f){return function M(m,d,f){return F.apply(this,arguments)}(m,d,f)}(v._delegate,f,ks)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function dn(m,d){return Ss.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=yi,m})();function gt(m,d,f){let v=m;"function"!=typeof m&&({next:v,error:d,complete:f}=m);const b=v;return{next:H=>b(H&&lr.getOrCreate(H)),error:d,complete:f}}function cd(m,d){const f=function bu(m,d){const f=Tu();if(!f)return[];const v=On(Hr,m,d);switch(f.getItem(v)){case yi.NONE:return[It];case yi.LOCAL:return[rs,ns];case yi.SESSION:return[ns];default:return[]}}(m,d);if("undefined"!=typeof self&&!f.includes(rs)&&f.push(rs),"undefined"!=typeof window)for(const v of[wr,ns])f.includes(v)||f.push(v);return f.includes(It)||f.push(It),f}class Ol{constructor(){this.providerId="phone",this._delegate=new Br(Fs(Y.Z.auth()))}static credential(d,f){return Br.credential(d,f)}verifyPhoneNumber(d,f){return this._delegate.verifyPhoneNumber(d,f)}unwrap(){return this._delegate}}Ol.PHONE_SIGN_IN_METHOD=Br.PHONE_SIGN_IN_METHOD,Ol.PROVIDER_ID=Br.PROVIDER_ID;const Pl=ee;class Wp{constructor(d,f,v=Y.Z.app()){var b;Pl(null===(b=v.options)||void 0===b?void 0:b.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new Wc(d,f,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function py(m){m.INTERNAL.registerComponent(new re.wA("auth-compat",d=>{const f=d.getProvider("app-compat").getImmediate(),v=d.getProvider("auth");return new Nl(f,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:na,FacebookAuthProvider:xo,GithubAuthProvider:Tc,GoogleAuthProvider:Ro,OAuthProvider:Xs,SAMLAuthProvider:Ki,PhoneAuthProvider:Ol,PhoneMultiFactorGenerator:ry,RecaptchaVerifier:Wp,TwitterAuthProvider:ii,Auth:Nl,AuthCredential:Ft,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.2.8")}(Y.Z)},2940:function(et,Ce){!function(P){"use strict";function g(q){return Array.prototype.slice.call(q)}function Y(q){return new Promise(function(oe,Te){q.onsuccess=function(){oe(q.result)},q.onerror=function(){Te(q.error)}})}function O(q,oe,Te){var Re,ie=new Promise(function(ge,ye){Y(Re=q[oe].apply(q,Te)).then(ge,ye)});return ie.request=Re,ie}function pe(q,oe,Te){var Re=O(q,oe,Te);return Re.then(function(ie){if(ie)return new B(ie,Re.request)})}function X(q,oe,Te){Te.forEach(function(Re){Object.defineProperty(q.prototype,Re,{get:function(){return this[oe][Re]},set:function(ie){this[oe][Re]=ie}})})}function fe(q,oe,Te,Re){Re.forEach(function(ie){ie in Te.prototype&&(q.prototype[ie]=function(){return O(this[oe],ie,arguments)})})}function re(q,oe,Te,Re){Re.forEach(function(ie){ie in Te.prototype&&(q.prototype[ie]=function(){return this[oe][ie].apply(this[oe],arguments)})})}function ue(q,oe,Te,Re){Re.forEach(function(ie){ie in Te.prototype&&(q.prototype[ie]=function(){return pe(this[oe],ie,arguments)})})}function le(q){this._index=q}function B(q,oe){this._cursor=q,this._request=oe}function V(q){this._store=q}function K(q){this._tx=q,this.complete=new Promise(function(oe,Te){q.oncomplete=function(){oe()},q.onerror=function(){Te(q.error)},q.onabort=function(){Te(q.error)}})}function Ve(q,oe,Te){this._db=q,this.oldVersion=oe,this.transaction=new K(Te)}function De(q){this._db=q}X(le,"_index",["name","keyPath","multiEntry","unique"]),fe(le,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ue(le,"_index",IDBIndex,["openCursor","openKeyCursor"]),X(B,"_cursor",["direction","key","primaryKey","value"]),fe(B,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(q){q in IDBCursor.prototype&&(B.prototype[q]=function(){var oe=this,Te=arguments;return Promise.resolve().then(function(){return oe._cursor[q].apply(oe._cursor,Te),Y(oe._request).then(function(Re){if(Re)return new B(Re,oe._request)})})})}),V.prototype.createIndex=function(){return new le(this._store.createIndex.apply(this._store,arguments))},V.prototype.index=function(){return new le(this._store.index.apply(this._store,arguments))},X(V,"_store",["name","keyPath","indexNames","autoIncrement"]),fe(V,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ue(V,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),re(V,"_store",IDBObjectStore,["deleteIndex"]),K.prototype.objectStore=function(){return new V(this._tx.objectStore.apply(this._tx,arguments))},X(K,"_tx",["objectStoreNames","mode"]),re(K,"_tx",IDBTransaction,["abort"]),Ve.prototype.createObjectStore=function(){return new V(this._db.createObjectStore.apply(this._db,arguments))},X(Ve,"_db",["name","version","objectStoreNames"]),re(Ve,"_db",IDBDatabase,["deleteObjectStore","close"]),De.prototype.transaction=function(){return new K(this._db.transaction.apply(this._db,arguments))},X(De,"_db",["name","version","objectStoreNames"]),re(De,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(q){[V,le].forEach(function(oe){q in oe.prototype&&(oe.prototype[q.replace("open","iterate")]=function(){var Te=g(arguments),Re=Te[Te.length-1],ie=this._store||this._index,ge=ie[q].apply(ie,Te.slice(0,-1));ge.onsuccess=function(){Re(ge.result)}})})}),[le,V].forEach(function(q){q.prototype.getAll||(q.prototype.getAll=function(oe,Te){var Re=this,ie=[];return new Promise(function(ge){Re.iterateCursor(oe,function(ye){ye?(ie.push(ye.value),void 0===Te||ie.length!=Te?ye.continue():ge(ie)):ge(ie)})})})}),P.openDb=function xe(q,oe,Te){var Re=O(indexedDB,"open",[q,oe]),ie=Re.request;return ie&&(ie.onupgradeneeded=function(ge){Te&&Te(new Ve(ie.result,ge.oldVersion,ie.transaction))}),Re.then(function(ge){return new De(ge)})},P.deleteDb=function Fe(q){return O(indexedDB,"deleteDatabase",[q])},Object.defineProperty(P,"__esModule",{value:!0})}(Ce)},8306:(et,Ce,P)=>{"use strict";P.d(Ce,{y:()=>B});var g=P(2961),Y=P(727),O=P(8822),pe=P(4671);var re=P(2416),ue=P(576),le=P(2806);let B=(()=>{class De{constructor(Fe){Fe&&(this._subscribe=Fe)}lift(Fe){const q=new De;return q.source=this,q.operator=Fe,q}subscribe(Fe,q,oe){const Te=function Ve(De){return De&&De instanceof g.Lv||function K(De){return De&&(0,ue.m)(De.next)&&(0,ue.m)(De.error)&&(0,ue.m)(De.complete)}(De)&&(0,Y.Nn)(De)}(Fe)?Fe:new g.Hp(Fe,q,oe);return(0,le.x)(()=>{const{operator:Re,source:ie}=this;Te.add(Re?Re.call(Te,ie):ie?this._subscribe(Te):this._trySubscribe(Te))}),Te}_trySubscribe(Fe){try{return this._subscribe(Fe)}catch(q){Fe.error(q)}}forEach(Fe,q){return new(q=V(q))((oe,Te)=>{const Re=new g.Hp({next:ie=>{try{Fe(ie)}catch(ge){Te(ge),Re.unsubscribe()}},error:Te,complete:oe});this.subscribe(Re)})}_subscribe(Fe){var q;return null===(q=this.source)||void 0===q?void 0:q.subscribe(Fe)}[O.L](){return this}pipe(...Fe){return function fe(De){return 0===De.length?pe.y:1===De.length?De[0]:function(Fe){return De.reduce((q,oe)=>oe(q),Fe)}}(Fe)(this)}toPromise(Fe){return new(Fe=V(Fe))((q,oe)=>{let Te;this.subscribe(Re=>Te=Re,Re=>oe(Re),()=>q(Te))})}}return De.create=xe=>new De(xe),De})();function V(De){var xe;return null!==(xe=null!=De?De:re.v.Promise)&&void 0!==xe?xe:Promise}},7579:(et,Ce,P)=>{"use strict";P.d(Ce,{x:()=>re});var g=P(8306),Y=P(727);const pe=(0,P(3888).d)(le=>function(){le(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var X=P(8737),fe=P(2806);let re=(()=>{class le extends g.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(V){const K=new ue(this,this);return K.operator=V,K}_throwIfClosed(){if(this.closed)throw new pe}next(V){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const K=this.observers.slice();for(const Ve of K)Ve.next(V)}})}error(V){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=V;const{observers:K}=this;for(;K.length;)K.shift().error(V)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:V}=this;for(;V.length;)V.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var V;return(null===(V=this.observers)||void 0===V?void 0:V.length)>0}_trySubscribe(V){return this._throwIfClosed(),super._trySubscribe(V)}_subscribe(V){return this._throwIfClosed(),this._checkFinalizedStatuses(V),this._innerSubscribe(V)}_innerSubscribe(V){const{hasError:K,isStopped:Ve,observers:De}=this;return K||Ve?Y.Lc:(De.push(V),new Y.w0(()=>(0,X.P)(De,V)))}_checkFinalizedStatuses(V){const{hasError:K,thrownError:Ve,isStopped:De}=this;K?V.error(Ve):De&&V.complete()}asObservable(){const V=new g.y;return V.source=this,V}}return le.create=(B,V)=>new ue(B,V),le})();class ue extends re{constructor(B,V){super(),this.destination=B,this.source=V}next(B){var V,K;null===(K=null===(V=this.destination)||void 0===V?void 0:V.next)||void 0===K||K.call(V,B)}error(B){var V,K;null===(K=null===(V=this.destination)||void 0===V?void 0:V.error)||void 0===K||K.call(V,B)}complete(){var B,V;null===(V=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===V||V.call(B)}_subscribe(B){var V,K;return null!==(K=null===(V=this.source)||void 0===V?void 0:V.subscribe(B))&&void 0!==K?K:Y.Lc}}},2961:(et,Ce,P)=>{"use strict";P.d(Ce,{Hp:()=>Fe,Lv:()=>K});var g=P(576),Y=P(727),O=P(2416),pe=P(7849);function X(){}const fe=le("C",void 0,void 0);function le(ie,ge,ye){return{kind:ie,value:ge,error:ye}}var B=P(3410),V=P(2806);class K extends Y.w0{constructor(ge){super(),this.isStopped=!1,ge?(this.destination=ge,(0,Y.Nn)(ge)&&ge.add(this)):this.destination=Re}static create(ge,ye,je){return new Fe(ge,ye,je)}next(ge){this.isStopped?Te(function ue(ie){return le("N",ie,void 0)}(ge),this):this._next(ge)}error(ge){this.isStopped?Te(function re(ie){return le("E",void 0,ie)}(ge),this):(this.isStopped=!0,this._error(ge))}complete(){this.isStopped?Te(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ge){this.destination.next(ge)}_error(ge){try{this.destination.error(ge)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ve=Function.prototype.bind;function De(ie,ge){return Ve.call(ie,ge)}class xe{constructor(ge){this.partialObserver=ge}next(ge){const{partialObserver:ye}=this;if(ye.next)try{ye.next(ge)}catch(je){q(je)}}error(ge){const{partialObserver:ye}=this;if(ye.error)try{ye.error(ge)}catch(je){q(je)}else q(ge)}complete(){const{partialObserver:ge}=this;if(ge.complete)try{ge.complete()}catch(ye){q(ye)}}}class Fe extends K{constructor(ge,ye,je){let Ue;if(super(),(0,g.m)(ge)||!ge)Ue={next:null!=ge?ge:void 0,error:null!=ye?ye:void 0,complete:null!=je?je:void 0};else{let ee;this&&O.v.useDeprecatedNextContext?(ee=Object.create(ge),ee.unsubscribe=()=>this.unsubscribe(),Ue={next:ge.next&&De(ge.next,ee),error:ge.error&&De(ge.error,ee),complete:ge.complete&&De(ge.complete,ee)}):Ue=ge}this.destination=new xe(Ue)}}function q(ie){O.v.useDeprecatedSynchronousErrorHandling?(0,V.O)(ie):(0,pe.h)(ie)}function Te(ie,ge){const{onStoppedNotification:ye}=O.v;ye&&B.z.setTimeout(()=>ye(ie,ge))}const Re={closed:!0,next:X,error:function oe(ie){throw ie},complete:X}},727:(et,Ce,P)=>{"use strict";P.d(Ce,{Lc:()=>fe,w0:()=>X,Nn:()=>re});var g=P(576);const O=(0,P(3888).d)(le=>function(V){le(this),this.message=V?`${V.length} errors occurred during unsubscription:\n${V.map((K,Ve)=>`${Ve+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=V});var pe=P(8737);class X{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:V}=this;if(V)if(this._parentage=null,Array.isArray(V))for(const De of V)De.remove(this);else V.remove(this);const{initialTeardown:K}=this;if((0,g.m)(K))try{K()}catch(De){B=De instanceof O?De.errors:[De]}const{_teardowns:Ve}=this;if(Ve){this._teardowns=null;for(const De of Ve)try{ue(De)}catch(xe){B=null!=B?B:[],xe instanceof O?B=[...B,...xe.errors]:B.push(xe)}}if(B)throw new O(B)}}add(B){var V;if(B&&B!==this)if(this.closed)ue(B);else{if(B instanceof X){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._teardowns=null!==(V=this._teardowns)&&void 0!==V?V:[]).push(B)}}_hasParent(B){const{_parentage:V}=this;return V===B||Array.isArray(V)&&V.includes(B)}_addParent(B){const{_parentage:V}=this;this._parentage=Array.isArray(V)?(V.push(B),V):V?[V,B]:B}_removeParent(B){const{_parentage:V}=this;V===B?this._parentage=null:Array.isArray(V)&&(0,pe.P)(V,B)}remove(B){const{_teardowns:V}=this;V&&(0,pe.P)(V,B),B instanceof X&&B._removeParent(this)}}X.EMPTY=(()=>{const le=new X;return le.closed=!0,le})();const fe=X.EMPTY;function re(le){return le instanceof X||le&&"closed"in le&&(0,g.m)(le.remove)&&(0,g.m)(le.add)&&(0,g.m)(le.unsubscribe)}function ue(le){(0,g.m)(le)?le():le.unsubscribe()}},2416:(et,Ce,P)=>{"use strict";P.d(Ce,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(et,Ce,P)=>{"use strict";P.d(Ce,{E:()=>Y});const Y=new(P(8306).y)(X=>X.complete())},8996:(et,Ce,P)=>{"use strict";P.d(Ce,{D:()=>ge});var g=P(8421),Y=P(5363),O=P(9468),fe=P(8306),ue=P(2202),le=P(576),B=P(9672);function K(ye,je){if(!ye)throw new Error("Iterable cannot be null");return new fe.y(Ue=>{(0,B.f)(Ue,je,()=>{const ee=ye[Symbol.asyncIterator]();(0,B.f)(Ue,je,()=>{ee.next().then(Z=>{Z.done?Ue.complete():Ue.next(Z.value)})},0,!0)})})}var Ve=P(3670),De=P(8239),xe=P(1144),Fe=P(6495),q=P(2206),oe=P(4532),Te=P(3260);function ge(ye,je){return je?function ie(ye,je){if(null!=ye){if((0,Ve.c)(ye))return function pe(ye,je){return(0,g.Xf)(ye).pipe((0,O.R)(je),(0,Y.Q)(je))}(ye,je);if((0,xe.z)(ye))return function re(ye,je){return new fe.y(Ue=>{let ee=0;return je.schedule(function(){ee===ye.length?Ue.complete():(Ue.next(ye[ee++]),Ue.closed||this.schedule())})})}(ye,je);if((0,De.t)(ye))return function X(ye,je){return(0,g.Xf)(ye).pipe((0,O.R)(je),(0,Y.Q)(je))}(ye,je);if((0,q.D)(ye))return K(ye,je);if((0,Fe.T)(ye))return function V(ye,je){return new fe.y(Ue=>{let ee;return(0,B.f)(Ue,je,()=>{ee=ye[ue.h](),(0,B.f)(Ue,je,()=>{let Z,ne;try{({value:Z,done:ne}=ee.next())}catch(me){return void Ue.error(me)}ne?Ue.complete():Ue.next(Z)},0,!0)}),()=>(0,le.m)(null==ee?void 0:ee.return)&&ee.return()})}(ye,je);if((0,Te.L)(ye))return function Re(ye,je){return K((0,Te.Q)(ye),je)}(ye,je)}throw(0,oe.z)(ye)}(ye,je):(0,g.Xf)(ye)}},8421:(et,Ce,P)=>{"use strict";P.d(Ce,{Xf:()=>Ve});var g=P(655),Y=P(1144),O=P(8239),pe=P(8306),X=P(3670),fe=P(2206),re=P(4532),ue=P(6495),le=P(3260),B=P(576),V=P(7849),K=P(8822);function Ve(ie){if(ie instanceof pe.y)return ie;if(null!=ie){if((0,X.c)(ie))return function De(ie){return new pe.y(ge=>{const ye=ie[K.L]();if((0,B.m)(ye.subscribe))return ye.subscribe(ge);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ie);if((0,Y.z)(ie))return function xe(ie){return new pe.y(ge=>{for(let ye=0;ye<ie.length&&!ge.closed;ye++)ge.next(ie[ye]);ge.complete()})}(ie);if((0,O.t)(ie))return function Fe(ie){return new pe.y(ge=>{ie.then(ye=>{ge.closed||(ge.next(ye),ge.complete())},ye=>ge.error(ye)).then(null,V.h)})}(ie);if((0,fe.D)(ie))return oe(ie);if((0,ue.T)(ie))return function q(ie){return new pe.y(ge=>{for(const ye of ie)if(ge.next(ye),ge.closed)return;ge.complete()})}(ie);if((0,le.L)(ie))return function Te(ie){return oe((0,le.Q)(ie))}(ie)}throw(0,re.z)(ie)}function oe(ie){return new pe.y(ge=>{(function Re(ie,ge){var ye,je,Ue,ee;return(0,g.mG)(this,void 0,void 0,function*(){try{for(ye=(0,g.KL)(ie);!(je=yield ye.next()).done;)if(ge.next(je.value),ge.closed)return}catch(Z){Ue={error:Z}}finally{try{je&&!je.done&&(ee=ye.return)&&(yield ee.call(ye))}finally{if(Ue)throw Ue.error}}ge.complete()})})(ie,ge).catch(ye=>ge.error(ye))})}},6451:(et,Ce,P)=>{"use strict";P.d(Ce,{T:()=>fe});var g=P(8189),Y=P(8421),O=P(515),pe=P(7669),X=P(8996);function fe(...re){const ue=(0,pe.yG)(re),le=(0,pe._6)(re,1/0),B=re;return B.length?1===B.length?(0,Y.Xf)(B[0]):(0,g.J)(le)((0,X.D)(B,ue)):O.E}},5403:(et,Ce,P)=>{"use strict";P.d(Ce,{x:()=>Y});var g=P(2961);function Y(pe,X,fe,re,ue){return new O(pe,X,fe,re,ue)}class O extends g.Lv{constructor(X,fe,re,ue,le,B){super(X),this.onFinalize=le,this.shouldUnsubscribe=B,this._next=fe?function(V){try{fe(V)}catch(K){X.error(K)}}:super._next,this._error=ue?function(V){try{ue(V)}catch(K){X.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=re?function(){try{re()}catch(V){X.error(V)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var X;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(X=this.onFinalize)||void 0===X||X.call(this))}}}},4004:(et,Ce,P)=>{"use strict";P.d(Ce,{U:()=>O});var g=P(4482),Y=P(5403);function O(pe,X){return(0,g.e)((fe,re)=>{let ue=0;fe.subscribe((0,Y.x)(re,le=>{re.next(pe.call(X,le,ue++))}))})}},8189:(et,Ce,P)=>{"use strict";P.d(Ce,{J:()=>O});var g=P(5577),Y=P(4671);function O(pe=1/0){return(0,g.z)(Y.y,pe)}},5577:(et,Ce,P)=>{"use strict";P.d(Ce,{z:()=>ue});var g=P(4004),Y=P(8421),O=P(4482),pe=P(9672),X=P(5403),re=P(576);function ue(le,B,V=1/0){return(0,re.m)(B)?ue((K,Ve)=>(0,g.U)((De,xe)=>B(K,De,Ve,xe))((0,Y.Xf)(le(K,Ve))),V):("number"==typeof B&&(V=B),(0,O.e)((K,Ve)=>function fe(le,B,V,K,Ve,De,xe,Fe){const q=[];let oe=0,Te=0,Re=!1;const ie=()=>{Re&&!q.length&&!oe&&B.complete()},ge=je=>oe<K?ye(je):q.push(je),ye=je=>{De&&B.next(je),oe++;let Ue=!1;(0,Y.Xf)(V(je,Te++)).subscribe((0,X.x)(B,ee=>{null==Ve||Ve(ee),De?ge(ee):B.next(ee)},()=>{Ue=!0},void 0,()=>{if(Ue)try{for(oe--;q.length&&oe<K;){const ee=q.shift();xe?(0,pe.f)(B,xe,()=>ye(ee)):ye(ee)}ie()}catch(ee){B.error(ee)}}))};return le.subscribe((0,X.x)(B,ge,()=>{Re=!0,ie()})),()=>{null==Fe||Fe()}}(K,Ve,le,V)))}},5363:(et,Ce,P)=>{"use strict";P.d(Ce,{Q:()=>pe});var g=P(9672),Y=P(4482),O=P(5403);function pe(X,fe=0){return(0,Y.e)((re,ue)=>{re.subscribe((0,O.x)(ue,le=>(0,g.f)(ue,X,()=>ue.next(le),fe),()=>(0,g.f)(ue,X,()=>ue.complete(),fe),le=>(0,g.f)(ue,X,()=>ue.error(le),fe)))})}},3099:(et,Ce,P)=>{"use strict";P.d(Ce,{B:()=>fe});var g=P(8996),Y=P(5698),O=P(7579),pe=P(2961),X=P(4482);function fe(ue={}){const{connector:le=(()=>new O.x),resetOnError:B=!0,resetOnComplete:V=!0,resetOnRefCountZero:K=!0}=ue;return Ve=>{let De=null,xe=null,Fe=null,q=0,oe=!1,Te=!1;const Re=()=>{null==xe||xe.unsubscribe(),xe=null},ie=()=>{Re(),De=Fe=null,oe=Te=!1},ge=()=>{const ye=De;ie(),null==ye||ye.unsubscribe()};return(0,X.e)((ye,je)=>{q++,!Te&&!oe&&Re();const Ue=Fe=null!=Fe?Fe:le();je.add(()=>{q--,0===q&&!Te&&!oe&&(xe=re(ge,K))}),Ue.subscribe(je),De||(De=new pe.Hp({next:ee=>Ue.next(ee),error:ee=>{Te=!0,Re(),xe=re(ie,B,ee),Ue.error(ee)},complete:()=>{oe=!0,Re(),xe=re(ie,V),Ue.complete()}}),(0,g.D)(ye).subscribe(De))})(Ve)}}function re(ue,le,...B){return!0===le?(ue(),null):!1===le?null:le(...B).pipe((0,Y.q)(1)).subscribe(()=>ue())}},9468:(et,Ce,P)=>{"use strict";P.d(Ce,{R:()=>Y});var g=P(4482);function Y(O,pe=0){return(0,g.e)((X,fe)=>{fe.add(O.schedule(()=>X.subscribe(fe),pe))})}},5698:(et,Ce,P)=>{"use strict";P.d(Ce,{q:()=>pe});var g=P(515),Y=P(4482),O=P(5403);function pe(X){return X<=0?()=>g.E:(0,Y.e)((fe,re)=>{let ue=0;fe.subscribe((0,O.x)(re,le=>{++ue<=X&&(re.next(le),X<=ue&&re.complete())}))})}},8505:(et,Ce,P)=>{"use strict";P.d(Ce,{b:()=>X});var g=P(576),Y=P(4482),O=P(5403),pe=P(4671);function X(fe,re,ue){const le=(0,g.m)(fe)||re||ue?{next:fe,error:re,complete:ue}:fe;return le?(0,Y.e)((B,V)=>{var K;null===(K=le.subscribe)||void 0===K||K.call(le);let Ve=!0;B.subscribe((0,O.x)(V,De=>{var xe;null===(xe=le.next)||void 0===xe||xe.call(le,De),V.next(De)},()=>{var De;Ve=!1,null===(De=le.complete)||void 0===De||De.call(le),V.complete()},De=>{var xe;Ve=!1,null===(xe=le.error)||void 0===xe||xe.call(le,De),V.error(De)},()=>{var De,xe;Ve&&(null===(De=le.unsubscribe)||void 0===De||De.call(le)),null===(xe=le.finalize)||void 0===xe||xe.call(le)}))}):pe.y}},4408:(et,Ce,P)=>{"use strict";P.d(Ce,{o:()=>X});var g=P(727);class Y extends g.w0{constructor(re,ue){super()}schedule(re,ue=0){return this}}const O={setInterval(...fe){const{delegate:re}=O;return((null==re?void 0:re.setInterval)||setInterval)(...fe)},clearInterval(fe){const{delegate:re}=O;return((null==re?void 0:re.clearInterval)||clearInterval)(fe)},delegate:void 0};var pe=P(8737);class X extends Y{constructor(re,ue){super(re,ue),this.scheduler=re,this.work=ue,this.pending=!1}schedule(re,ue=0){if(this.closed)return this;this.state=re;const le=this.id,B=this.scheduler;return null!=le&&(this.id=this.recycleAsyncId(B,le,ue)),this.pending=!0,this.delay=ue,this.id=this.id||this.requestAsyncId(B,this.id,ue),this}requestAsyncId(re,ue,le=0){return O.setInterval(re.flush.bind(re,this),le)}recycleAsyncId(re,ue,le=0){if(null!=le&&this.delay===le&&!1===this.pending)return ue;O.clearInterval(ue)}execute(re,ue){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const le=this._execute(re,ue);if(le)return le;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,ue){let B,le=!1;try{this.work(re)}catch(V){le=!0,B=V||new Error("Scheduled action threw falsy error")}if(le)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:re,scheduler:ue}=this,{actions:le}=ue;this.work=this.state=this.scheduler=null,this.pending=!1,(0,pe.P)(le,this),null!=re&&(this.id=this.recycleAsyncId(ue,re,null)),this.delay=null,super.unsubscribe()}}}},7565:(et,Ce,P)=>{"use strict";P.d(Ce,{v:()=>O});var g=P(6063);class Y{constructor(X,fe=Y.now){this.schedulerActionCtor=X,this.now=fe}schedule(X,fe=0,re){return new this.schedulerActionCtor(this,X).schedule(re,fe)}}Y.now=g.l.now;class O extends Y{constructor(X,fe=Y.now){super(X,fe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(X){const{actions:fe}=this;if(this._active)return void fe.push(X);let re;this._active=!0;do{if(re=X.execute(X.state,X.delay))break}while(X=fe.shift());if(this._active=!1,re){for(;X=fe.shift();)X.unsubscribe();throw re}}}},4986:(et,Ce,P)=>{"use strict";P.d(Ce,{z:()=>O});var g=P(4408);const O=new(P(7565).v)(g.o)},6063:(et,Ce,P)=>{"use strict";P.d(Ce,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(et,Ce,P)=>{"use strict";P.d(Ce,{z:()=>g});const g={setTimeout(...Y){const{delegate:O}=g;return((null==O?void 0:O.setTimeout)||setTimeout)(...Y)},clearTimeout(Y){const{delegate:O}=g;return((null==O?void 0:O.clearTimeout)||clearTimeout)(Y)},delegate:void 0}},2202:(et,Ce,P)=>{"use strict";P.d(Ce,{h:()=>Y});const Y=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(et,Ce,P)=>{"use strict";P.d(Ce,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(et,Ce,P)=>{"use strict";P.d(Ce,{_6:()=>fe,jO:()=>pe,yG:()=>X});var g=P(576);function O(re){return re[re.length-1]}function pe(re){return(0,g.m)(O(re))?re.pop():void 0}function X(re){return function Y(re){return re&&(0,g.m)(re.schedule)}(O(re))?re.pop():void 0}function fe(re,ue){return"number"==typeof O(re)?re.pop():ue}},8737:(et,Ce,P)=>{"use strict";function g(Y,O){if(Y){const pe=Y.indexOf(O);0<=pe&&Y.splice(pe,1)}}P.d(Ce,{P:()=>g})},3888:(et,Ce,P)=>{"use strict";function g(Y){const pe=Y(X=>{Error.call(X),X.stack=(new Error).stack});return pe.prototype=Object.create(Error.prototype),pe.prototype.constructor=pe,pe}P.d(Ce,{d:()=>g})},2806:(et,Ce,P)=>{"use strict";P.d(Ce,{x:()=>O,O:()=>pe});var g=P(2416);let Y=null;function O(X){if(g.v.useDeprecatedSynchronousErrorHandling){const fe=!Y;if(fe&&(Y={errorThrown:!1,error:null}),X(),fe){const{errorThrown:re,error:ue}=Y;if(Y=null,re)throw ue}}else X()}function pe(X){g.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=X)}},9672:(et,Ce,P)=>{"use strict";function g(Y,O,pe,X=0,fe=!1){const re=O.schedule(function(){pe(),fe?Y.add(this.schedule(null,X)):this.unsubscribe()},X);if(Y.add(re),!fe)return re}P.d(Ce,{f:()=>g})},4671:(et,Ce,P)=>{"use strict";function g(Y){return Y}P.d(Ce,{y:()=>g})},1144:(et,Ce,P)=>{"use strict";P.d(Ce,{z:()=>g});const g=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(et,Ce,P)=>{"use strict";P.d(Ce,{D:()=>Y});var g=P(576);function Y(O){return Symbol.asyncIterator&&(0,g.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(et,Ce,P)=>{"use strict";function g(Y){return"function"==typeof Y}P.d(Ce,{m:()=>g})},3670:(et,Ce,P)=>{"use strict";P.d(Ce,{c:()=>O});var g=P(8822),Y=P(576);function O(pe){return(0,Y.m)(pe[g.L])}},6495:(et,Ce,P)=>{"use strict";P.d(Ce,{T:()=>O});var g=P(2202),Y=P(576);function O(pe){return(0,Y.m)(null==pe?void 0:pe[g.h])}},8239:(et,Ce,P)=>{"use strict";P.d(Ce,{t:()=>Y});var g=P(576);function Y(O){return(0,g.m)(null==O?void 0:O.then)}},3260:(et,Ce,P)=>{"use strict";P.d(Ce,{Q:()=>O,L:()=>pe});var g=P(655),Y=P(576);function O(X){return(0,g.FC)(this,arguments,function*(){const re=X.getReader();try{for(;;){const{value:ue,done:le}=yield(0,g.qq)(re.read());if(le)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(ue)}}finally{re.releaseLock()}})}function pe(X){return(0,Y.m)(null==X?void 0:X.getReader)}},4482:(et,Ce,P)=>{"use strict";P.d(Ce,{A:()=>Y,e:()=>O});var g=P(576);function Y(pe){return(0,g.m)(null==pe?void 0:pe.lift)}function O(pe){return X=>{if(Y(X))return X.lift(function(fe){try{return pe(fe,this)}catch(re){this.error(re)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(et,Ce,P)=>{"use strict";P.d(Ce,{h:()=>O});var g=P(2416),Y=P(3410);function O(pe){Y.z.setTimeout(()=>{const{onUnhandledError:X}=g.v;if(!X)throw pe;X(pe)})}},4532:(et,Ce,P)=>{"use strict";function g(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Ce,{z:()=>g})},655:(et,Ce,P)=>{"use strict";function pe(Z,ne){var me={};for(var se in Z)Object.prototype.hasOwnProperty.call(Z,se)&&ne.indexOf(se)<0&&(me[se]=Z[se]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var Ne=0;for(se=Object.getOwnPropertySymbols(Z);Ne<se.length;Ne++)ne.indexOf(se[Ne])<0&&Object.prototype.propertyIsEnumerable.call(Z,se[Ne])&&(me[se[Ne]]=Z[se[Ne]])}return me}function ue(Z,ne,me,se){return new(me||(me=Promise))(function(ce,pt){function kt(st){try{tt(se.next(st))}catch(Rn){pt(Rn)}}function Cn(st){try{tt(se.throw(st))}catch(Rn){pt(Rn)}}function tt(st){st.done?ce(st.value):function Ne(ce){return ce instanceof me?ce:new me(function(pt){pt(ce)})}(st.value).then(kt,Cn)}tt((se=se.apply(Z,ne||[])).next())})}function q(Z){return this instanceof q?(this.v=Z,this):new q(Z)}function oe(Z,ne,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ne,se=me.apply(Z,ne||[]),ce=[];return Ne={},pt("next"),pt("throw"),pt("return"),Ne[Symbol.asyncIterator]=function(){return this},Ne;function pt(Gt){se[Gt]&&(Ne[Gt]=function(rr){return new Promise(function(Bt,Ci){ce.push([Gt,rr,Bt,Ci])>1||kt(Gt,rr)})})}function kt(Gt,rr){try{!function Cn(Gt){Gt.value instanceof q?Promise.resolve(Gt.value.v).then(tt,st):Rn(ce[0][2],Gt)}(se[Gt](rr))}catch(Bt){Rn(ce[0][3],Bt)}}function tt(Gt){kt("next",Gt)}function st(Gt){kt("throw",Gt)}function Rn(Gt,rr){Gt(rr),ce.shift(),ce.length&&kt(ce[0][0],ce[0][1])}}function Re(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,ne=Z[Symbol.asyncIterator];return ne?ne.call(Z):(Z=function K(Z){var ne="function"==typeof Symbol&&Symbol.iterator,me=ne&&Z[ne],se=0;if(me)return me.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&se>=Z.length&&(Z=void 0),{value:Z&&Z[se++],done:!Z}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),me={},se("next"),se("throw"),se("return"),me[Symbol.asyncIterator]=function(){return this},me);function se(ce){me[ce]=Z[ce]&&function(pt){return new Promise(function(kt,Cn){!function Ne(ce,pt,kt,Cn){Promise.resolve(Cn).then(function(tt){ce({value:tt,done:kt})},pt)}(kt,Cn,(pt=Z[ce](pt)).done,pt.value)})}}}P.d(Ce,{_T:()=>pe,mG:()=>ue,qq:()=>q,FC:()=>oe,KL:()=>Re})},5e3:(et,Ce,P)=>{"use strict";P.d(Ce,{deG:()=>Hc,tb:()=>Eo,AFp:()=>Av,ip1:()=>yh,CZH:()=>St,hGG:()=>sb,z2F:()=>up,sBO:()=>Lm,Sil:()=>xv,_Vd:()=>Zf,EJc:()=>Mv,SBq:()=>dc,qLn:()=>An,vpe:()=>vo,tBr:()=>Tr,XFs:()=>ut,OlP:()=>on,zs3:()=>hr,ZZ4:()=>Hm,aQg:()=>Gm,soG:()=>gc,YKP:()=>J_,h0i:()=>fc,PXZ:()=>eI,R0b:()=>ms,FiY:()=>ur,Lbi:()=>Qr,g9A:()=>un,Qsj:()=>Yf,FYo:()=>Kf,JOm:()=>ae,tp0:()=>Ar,Rgc:()=>Jf,dDg:()=>Xw,q4F:()=>Ga,GfV:()=>em,s_b:()=>gm,ifc:()=>bt,eFA:()=>tI,G48:()=>Vv,Gpc:()=>V,X6Q:()=>iI,_c5:()=>tb,VLi:()=>vT,c2e:()=>Kw,zSh:()=>Dg,wAp:()=>dt,vHH:()=>xe,cg1:()=>zo,kL8:()=>Lg,dqk:()=>Rt,sIi:()=>wn,CqO:()=>jd,QGY:()=>Pg,F4k:()=>d_,RDi:()=>sl,AaK:()=>ue,qOj:()=>Tg,TTD:()=>xo,_Bn:()=>Wf,xp6:()=>pf,uIk:()=>Bs,ekj:()=>nr,Suo:()=>Em,Xpm:()=>Xt,lG2:()=>eu,Yz7:()=>Bt,cJS:()=>jt,oAB:()=>yr,Yjl:()=>Xo,Y36:()=>_o,_UZ:()=>TE,qZA:()=>l_,TgZ:()=>Xl,EpF:()=>SE,n5z:()=>Da,LFG:()=>ke,$8M:()=>oo,$Z:()=>u_,NdJ:()=>qo,CRH:()=>Rw,oxw:()=>xE,ALo:()=>Aw,lcZ:()=>fm,Q6J:()=>Gu,iGM:()=>vm,CHM:()=>la,LSH:()=>od,YNc:()=>Sf,_uU:()=>WE,Oqu:()=>I_});var g=P(7579),Y=P(727),O=P(8306),pe=P(6451),X=P(3099);function fe(i){for(let s in i)if(i[s]===fe)return s;throw Error("Could not find renamed property on target object.")}function re(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ue(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ue).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function le(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const B=fe({__forward_ref__:fe});function V(i){return i.__forward_ref__=V,i.toString=function(){return ue(this())},i}function K(i){return Ve(i)?i():i}function Ve(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===V}class xe extends Error{constructor(s,a){super(function Fe(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function q(i){return"string"==typeof i?i:null==i?"":String(i)}function oe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():q(i)}function ge(i,s){const a=s?` in ${s}`:"";throw new xe(-201,`No provider for ${oe(i)} found${a}`)}function tt(i,s){null==i&&function st(i,s,a,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${a} ${u} ${s} <=Actual]`))}(s,i,null,"!=")}function Bt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function jt(i){return{providers:i.providers||[],imports:i.imports||[]}}function At(i){return $i(i,bi)||$i(i,Xr)}function $i(i,s){return i.hasOwnProperty(s)?i[s]:null}function mr(i){return i&&(i.hasOwnProperty(Es)||i.hasOwnProperty(Ti))?i[Es]:null}const bi=fe({\u0275prov:fe}),Es=fe({\u0275inj:fe}),Xr=fe({ngInjectableDef:fe}),Ti=fe({ngInjectorDef:fe});var ut=(()=>((ut=ut||{})[ut.Default=0]="Default",ut[ut.Host=1]="Host",ut[ut.Self=2]="Self",ut[ut.SkipSelf=4]="SkipSelf",ut[ut.Optional=8]="Optional",ut))();let Nr;function yn(i){const s=Nr;return Nr=i,s}function Zs(i,s,a){const u=At(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:a&ut.Optional?null:void 0!==s?s:void ge(ue(i),"Injector")}function Ke(i){return{toString:i}.toString()}var Ct=(()=>((Ct=Ct||{})[Ct.OnPush=0]="OnPush",Ct[Ct.Default=1]="Default",Ct))(),bt=(()=>{return(i=bt||(bt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",bt;var i})();const Ye="undefined"!=typeof globalThis&&globalThis,ot="undefined"!=typeof window&&window,hi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Rt=Ye||"undefined"!=typeof global&&global||ot||hi,ei={},L=[],j=fe({\u0275cmp:fe}),$=fe({\u0275dir:fe}),ve=fe({\u0275pipe:fe}),J=fe({\u0275mod:fe}),Ge=fe({\u0275fac:fe}),lt=fe({__NG_ELEMENT_ID__:fe});let qt=0;function Xt(i){return Ke(()=>{const a={},u={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Ct.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||L,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||bt.Emulated,id:"c",styles:i.styles||L,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,p=i.features,_=i.pipes;return u.id+=qt++,u.inputs=Jo(i.inputs,a),u.outputs=Jo(i.outputs),p&&p.forEach(E=>E(u)),u.directiveDefs=c?()=>("function"==typeof c?c():c).map(Pr):null,u.pipeDefs=_?()=>("function"==typeof _?_():_).map(It):null,u})}function Pr(i){return Pn(i)||function _r(i){return i[$]||null}(i)}function It(i){return function Gi(i){return i[ve]||null}(i)}const On={};function yr(i){return Ke(()=>{const s={type:i.type,bootstrap:i.bootstrap||L,declarations:i.declarations||L,imports:i.imports||L,exports:i.exports||L,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(On[i.id]=i.type),s})}function Jo(i,s){if(null==i)return ei;const a={};for(const u in i)if(i.hasOwnProperty(u)){let c=i[u],p=c;Array.isArray(c)&&(p=c[1],c=c[0]),a[c]=u,s&&(s[c]=p)}return a}const eu=Xt;function Xo(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Pn(i){return i[j]||null}function kn(i,s){const a=i[J]||null;if(!a&&!0===s)throw new Error(`Type ${ue(i)} does not have '\u0275mod' property.`);return a}function fi(i){return Array.isArray(i)&&"object"==typeof i[1]}function ti(i){return Array.isArray(i)&&!0===i[1]}function wc(i){return 0!=(8&i.flags)}function tu(i){return 2==(2&i.flags)}function Ds(i){return 1==(1&i.flags)}function ni(i){return null!==i.template}function Th(i){return 0!=(512&i[2])}function ri(i,s){return i.hasOwnProperty(Ge)?i[Ge]:null}class Xs{constructor(s,a,u){this.previousValue=s,this.currentValue=a,this.firstChange=u}isFirstChange(){return this.firstChange}}function xo(){return Ro}function Ro(i){return i.type.prototype.ngOnChanges&&(i.setInput=bp),Tc}function Tc(){const i=Ac(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===ei)i.previous=s;else for(let u in s)a[u]=s[u];i.current=null,this.ngOnChanges(s)}}function bp(i,s,a,u){const c=Ac(i)||function Ki(i,s){return i[eo]=s}(i,{previous:ei,current:null}),p=c.current||(c.current={}),_=c.previous,E=this.declaredInputs[a],w=_[E];p[E]=new Xs(w&&w.currentValue,s,_===ei),i[u]=s}xo.ngInherit=!0;const eo="__ngSimpleChanges__";function Ac(i){return i[eo]||null}let su;function sl(i){su=i}function Kt(i){return!!i.listen}const ra={createRenderer:(i,s)=>function Yi(){return void 0!==su?su:"undefined"!=typeof document?document:void 0}()};function Ht(i){for(;Array.isArray(i);)i=i[0];return i}function to(i,s){return Ht(s[i])}function Gn(i,s){return Ht(s[i.index])}function cn(i,s){return i.data[s]}function qn(i,s){const a=s[i];return fi(a)?a:a[0]}function No(i){return 4==(4&i[2])}function Ai(i){return 128==(128&i[2])}function Vr(i,s){return null==s?null:i[s]}function Ts(i){i[18]=0}function As(i,s){i[5]+=s;let a=i,u=i[3];for(;null!==u&&(1===s&&1===a[5]||-1===s&&0===a[5]);)u[5]+=s,a=u,u=u[3]}const at={lFrame:io(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ul(){return at.bindingsEnabled}function we(){return at.lFrame.lView}function Tt(){return at.lFrame.tView}function la(i){return at.lFrame.contextLView=i,i[8]}function dn(){let i=Ss();for(;null!==i&&64===i.type;)i=i.parent;return i}function Ss(){return at.lFrame.currentTNode}function Er(i,s){const a=at.lFrame;a.currentTNode=i,a.isParent=s}function ll(){return at.lFrame.isParent}function da(){return at.isInCheckNoChangesMode}function Oo(i){at.isInCheckNoChangesMode=i}function Si(){return at.lFrame.bindingIndex++}function fa(i,s){const a=at.lFrame;a.bindingIndex=a.bindingRootIndex=i,no(s)}function no(i){at.lFrame.currentDirectiveIndex=i}function pa(){return at.lFrame.currentQueryIndex}function fl(i){at.lFrame.currentQueryIndex=i}function Tp(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function uu(i,s,a){if(a&ut.SkipSelf){let c=s,p=i;for(;!(c=c.parent,null!==c||a&ut.Host||(c=Tp(p),null===c||(p=p[15],10&c.type))););if(null===c)return!1;s=c,i=p}const u=at.lFrame=pl();return u.currentTNode=s,u.lView=i,!0}function ro(i){const s=pl(),a=i[1];at.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function pl(){const i=at.lFrame,s=null===i?null:i.child;return null===s?io(i):s}function io(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Fc(){const i=at.lFrame;return at.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Mh=Fc;function Po(){const i=Fc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Wn(){return at.lFrame.selectedIndex}function Xi(i){at.lFrame.selectedIndex=i}function hn(){const i=at.lFrame;return cn(i.tView,i.selectedIndex)}function es(i,s){for(let a=s.directiveStart,u=s.directiveEnd;a<u;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:w,ngAfterViewChecked:T,ngOnDestroy:S}=p;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),w&&(i.viewHooks||(i.viewHooks=[])).push(-a,w),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function ga(i,s,a){zn(i,s,3,a)}function ml(i,s,a,u){(3&i[2])===a&&zn(i,s,a,u)}function lu(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function zn(i,s,a,u){const p=null!=u?u:-1,_=s.length-1;let E=0;for(let w=void 0!==u?65535&i[18]:0;w<_;w++)if("number"==typeof s[w+1]){if(E=s[w],null!=u&&E>=u)break}else s[w]<0&&(i[18]+=65536),(E<p||-1==p)&&(Nh(i,a,s,w),i[18]=(4294901760&i[18])+w+2),w++}function Nh(i,s,a,u){const c=a[u]<0,p=a[u+1],E=i[c?-a[u]:a[u]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class ko{constructor(s,a,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=u}}function ar(i,s,a){const u=Kt(i);let c=0;for(;c<a.length;){const p=a[c];if("number"==typeof p){if(0!==p)break;c++;const _=a[c++],E=a[c++],w=a[c++];u?i.setAttribute(s,E,w,_):s.setAttributeNS(_,E,w)}else{const _=p,E=a[++c];yl(_)?u&&i.setProperty(s,_,E):u?i.setAttribute(s,_,E):s.setAttribute(_,E),c++}}return c}function ns(i){return 3===i||4===i||6===i}function yl(i){return 64===i.charCodeAt(0)}function du(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let u=0;u<s.length;u++){const c=s[u];"number"==typeof c?a=c:0===a||Ms(i,a,c,null,-1===a||2===a?s[++u]:null)}}return i}function Ms(i,s,a,u,c){let p=0,_=i.length;if(-1===s)_=-1;else for(;p<i.length;){const E=i[p++];if("number"==typeof E){if(E===s){_=-1;break}if(E>s){_=p-1;break}}}for(;p<i.length;){const E=i[p];if("number"==typeof E)break;if(E===a){if(null===u)return void(null!==c&&(i[p+1]=c));if(u===i[p+1])return void(i[p+2]=c)}p++,null!==u&&p++,null!==c&&p++}-1!==_&&(i.splice(_,0,s),p=_+1),i.splice(p++,0,a),null!==u&&i.splice(p++,0,u),null!==c&&i.splice(p++,0,c)}function Vc(i){return-1!==i}function Wt(i){return 32767&i}function fn(i,s){let a=function xs(i){return i>>16}(i),u=s;for(;a>0;)u=u[15],a--;return u}let yt=!0;function so(i){const s=yt;return yt=i,s}let Ph=0;function Ir(i,s){const a=Rs(i,s);if(-1!==a)return a;const u=s[1];u.firstCreatePass&&(i.injectorIndex=s.length,Xn(u.data,i),Xn(s,null),Xn(u.blueprint,null));const c=va(i,s),p=i.injectorIndex;if(Vc(c)){const _=Wt(c),E=fn(c,s),w=E[1].data;for(let T=0;T<8;T++)s[p+T]=E[_+T]|w[_+T]}return s[p+8]=c,p}function Xn(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Rs(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function va(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,u=null,c=s;for(;null!==c;){const p=c[1],_=p.type;if(u=2===_?p.declTNode:1===_?c[6]:null,null===u)return-1;if(a++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|a<<16}return-1}function Dr(i,s,a){!function _a(i,s,a){let u;"string"==typeof a?u=a.charCodeAt(0)||0:a.hasOwnProperty(lt)&&(u=a[lt]),null==u&&(u=a[lt]=Ph++);const c=255&u;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function Ea(i,s,a){if(a&ut.Optional)return i;ge(s,"NodeInjector")}function Ns(i,s,a,u){if(a&ut.Optional&&void 0===u&&(u=null),0==(a&(ut.Self|ut.Host))){const c=i[9],p=yn(void 0);try{return c?c.get(s,u,a&ut.Optional):Zs(s,u,a&ut.Optional)}finally{yn(p)}}return Ea(u,s,a)}function si(i,s,a,u=ut.Default,c){if(null!==i){const p=function jc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(lt)?i[lt]:void 0;return"number"==typeof s?s>=0?255&s:En:s}(a);if("function"==typeof p){if(!uu(s,i,u))return u&ut.Host?Ea(c,a,u):Ns(s,a,u,c);try{const _=p(u);if(null!=_||u&ut.Optional)return _;ge(a)}finally{Mh()}}else if("number"==typeof p){let _=null,E=Rs(i,s),w=-1,T=u&ut.Host?s[16][6]:null;for((-1===E||u&ut.SkipSelf)&&(w=-1===E?va(i,s):s[E+8],-1!==w&&Ia(u,!1)?(_=s[1],E=Wt(w),s=fn(w,s)):E=-1);-1!==E;){const S=s[1];if(El(p,E,S.data)){const k=xi(E,s,a,_,u,T);if(k!==wa)return k}w=s[E+8],-1!==w&&Ia(u,s[1].data[E+8]===T)&&El(p,E,s)?(_=S,E=Wt(w),s=fn(w,s)):E=-1}}}return Ns(s,a,u,c)}const wa={};function En(){return new is(dn(),we())}function xi(i,s,a,u,c,p){const _=s[1],E=_.data[i+8],S=Bc(E,_,a,null==u?tu(E)&&yt:u!=_&&0!=(3&E.type),c&ut.Host&&p===E);return null!==S?rs(s,_,S,E):wa}function Bc(i,s,a,u,c){const p=i.providerIndexes,_=s.data,E=1048575&p,w=i.directiveStart,S=p>>20,U=c?E+S:i.directiveEnd;for(let z=u?E:E+S;z<U;z++){const he=_[z];if(z<w&&a===he||z>=w&&he.type===a)return z}if(c){const z=_[w];if(z&&ni(z)&&z.type===a)return w}return null}function rs(i,s,a,u){let c=i[a];const p=s.data;if(function Ap(i){return i instanceof ko}(c)){const _=c;_.resolving&&function Te(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new xe(-200,`Circular dependency in DI detected for ${i}${a}`)}(oe(p[a]));const E=so(_.canSeeViewProviders);_.resolving=!0;const w=_.injectImpl?yn(_.injectImpl):null;uu(i,u,ut.Default);try{c=i[a]=_.factory(void 0,p,i,u),s.firstCreatePass&&a>=u.directiveStart&&function gl(i,s,a){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:p}=s.type.prototype;if(u){const _=Ro(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],s)}finally{null!==w&&yn(w),so(E),_.resolving=!1,Mh()}}return c}function El(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Ia(i,s){return!(i&ut.Self||i&ut.Host&&s)}class is{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,u){return si(this._tNode,this._lView,s,u,a)}}function Da(i){return Ke(()=>{const s=i.prototype.constructor,a=s[Ge]||Ca(s),u=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==u;){const p=c[Ge]||Ca(c);if(p&&p!==a)return p;c=Object.getPrototypeOf(c)}return p=>new p})}function Ca(i){return Ve(i)?()=>{const s=Ca(K(i));return s&&s()}:ri(i)}function oo(i){return function vl(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const u=a.length;let c=0;for(;c<u;){const p=a[c];if(ns(p))break;if(0===p)c+=2;else if("number"==typeof p)for(c++;c<u&&"string"==typeof a[c];)c++;else{if(p===s)return a[c+1];c+=2}}}return null}(dn(),i)}const gi="__parameters__";function uo(i,s,a){return Ke(()=>{const u=function wl(i){return function(...a){if(i){const u=i(...a);for(const c in u)this[c]=u[c]}}}(s);function c(...p){if(this instanceof c)return u.apply(this,p),this;const _=new c(...p);return E.annotation=_,E;function E(w,T,S){const k=w.hasOwnProperty(gi)?w[gi]:Object.defineProperty(w,gi,{value:[]})[gi];for(;k.length<=S;)k.push(null);return(k[S]=k[S]||[]).push(_),w}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class on{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Bt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Hc=new on("AnalyzeForEntryComponents");function br(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let u=i[a];Array.isArray(u)?(s===i&&(s=i.slice(0,a)),br(u,s)):s!==i&&s.push(u)}return s}function mi(i,s){i.forEach(a=>Array.isArray(a)?mi(a,s):s(a))}function Il(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function lo(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function oi(i,s,a){let u=mu(i,s);return u>=0?i[1|u]=a:(u=~u,function Aa(i,s,a,u){let c=i.length;if(c==s)i.push(a,u);else if(1===c)i.push(u,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=u}}(i,u,s,a)),u}function Vh(i,s){const a=mu(i,s);if(a>=0)return i[1|a]}function mu(i,s){return function Kc(i,s,a){let u=0,c=i.length>>a;for(;c!==u;){const p=u+(c-u>>1),_=i[p<<a];if(s===_)return p<<a;_>s?c=p:u=p+1}return~(c<<a)}(i,s,1)}const Pi={},Os="__NG_DI_FLAG__",yu="ngTempTokenPath",D=/\n/gm,M="__source",F=fe({provide:String,useValue:fe});let W;function te(i){const s=W;return W=i,s}function Ae(i,s=ut.Default){if(void 0===W)throw new xe(203,"");return null===W?Zs(i,void 0,s):W.get(i,s&ut.Optional?null:void 0,s)}function ke(i,s=ut.Default){return(function Nn(){return Nr}()||Ae)(K(i),s)}function Lt(i){const s=[];for(let a=0;a<i.length;a++){const u=K(i[a]);if(Array.isArray(u)){if(0===u.length)throw new xe(900,"");let c,p=ut.Default;for(let _=0;_<u.length;_++){const E=u[_],w=Zn(E);"number"==typeof w?-1===w?c=E.token:p|=w:c=E}s.push(ke(c,p))}else s.push(ke(u))}return s}function Ln(i,s){return i[Os]=s,i.prototype[Os]=s,i}function Zn(i){return i[Os]}const Tr=Ln(uo("Inject",i=>({token:i})),-1),ur=Ln(uo("Optional"),8),Ar=Ln(uo("SkipSelf"),4);class Op{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function us(i){return i instanceof Op?i.changingThisBreaksApplicationSecurity:i}const Lo=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Vp=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Vn=(()=>((Vn=Vn||{})[Vn.NONE=0]="NONE",Vn[Vn.HTML=1]="HTML",Vn[Vn.STYLE=2]="STYLE",Vn[Vn.SCRIPT=3]="SCRIPT",Vn[Vn.URL=4]="URL",Vn[Vn.RESOURCE_URL=5]="RESOURCE_URL",Vn))();function od(i){const s=function ad(){const i=we();return i&&i[12]}();return s?s.sanitize(Vn.URL,i)||"":function xl(i,s){const a=function Zh(i){return i instanceof Op&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?us(i):function wu(i){return(i=String(i)).match(Lo)||i.match(Vp)?i:"unsafe:"+i}(q(i))}const of="__ngContext__";function Qe(i,s){i[of]=s}function Du(i){const s=function pn(i){return i[of]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function uf(i){return i.ngOriginalError}function Vo(i,...s){i.error(...s)}class An{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),u=function _e(i){return i&&i.ngErrorLogger||Vo}(s);u(this._console,"ERROR",s),a&&u(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&uf(s);for(;a&&uf(a);)a=uf(a);return a||null}}const Wp=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Rt))();function f(i){return i instanceof Function?i():i}var ae=(()=>((ae=ae||{})[ae.Important=1]="Important",ae[ae.DashCase=2]="DashCase",ae))();function Ze(i,s){return undefined(i,s)}function sn(i){const s=i[3];return ti(s)?s[3]:s}function er(i){return cr(i[13])}function Na(i){return cr(i[4])}function cr(i){for(;null!==i&&!ti(i);)i=i[4];return i}function fo(i,s,a,u,c){if(null!=u){let p,_=!1;ti(u)?p=u:fi(u)&&(_=!0,u=u[0]);const E=Ht(u);0===i&&null!==a?null==c?Kp(s,a,E):Fl(s,a,E,c||null,!0):1===i&&null!==a?Fl(s,a,E,c||null,!0):2===i?function Jp(i,s,a){const u=Yp(i,s);u&&function WI(i,s,a,u){Kt(i)?i.removeChild(s,a,u):s.removeChild(a)}(i,u,s,a)}(s,E,_):3===i&&s.destroyNode(E),null!=p&&function A0(i,s,a,u,c){const p=a[7];p!==Ht(a)&&fo(s,i,u,p,c);for(let E=10;E<a.length;E++){const w=a[E];yd(w[1],w,i,s,u,p)}}(s,i,p,a,c)}}function kl(i,s,a){if(Kt(i))return i.createElement(s,a);{const u=null!==a?function iu(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===u?i.createElement(s):i.createElementNS(u,s)}}function yy(i,s){const a=i[9],u=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,As(c,-1)),a.splice(u,1)}function _y(i,s){if(i.length<=10)return;const a=10+s,u=i[a];if(u){const c=u[17];null!==c&&c!==i&&yy(c,u),s>0&&(i[a-1][4]=u[4]);const p=lo(i,10+s);!function cf(i,s){yd(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const _=p[19];null!==_&&_.detachView(p[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function vy(i,s){if(!(256&s[2])){const a=s[11];Kt(a)&&a.destroyNode&&yd(i,s,a,3,null,null),function fd(i){let s=i[13];if(!s)return pd(i[1],i);for(;s;){let a=null;if(fi(s))a=s[13];else{const u=s[10];u&&(a=u)}if(!a){for(;s&&!s[4]&&s!==i;)fi(s)&&pd(s[1],s),s=s[3];null===s&&(s=i),fi(s)&&pd(s[1],s),a=s&&s[4]}s=a}}(s)}}function pd(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function wy(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let u=0;u<a.length;u+=2){const c=s[a[u]];if(!(c instanceof ko)){const p=a[u+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const E=c[p[_]],w=p[_+1];try{w.call(E)}finally{}}else try{p.call(c)}finally{}}}}(i,s),function Ey(i,s){const a=i.cleanup,u=s[7];let c=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+1],E="function"==typeof _?_(s):Ht(s[_]),w=u[c=a[p+2]],T=a[p+3];"boolean"==typeof T?E.removeEventListener(a[p],w,T):T>=0?u[c=T]():u[c=-T].unsubscribe(),p+=2}else{const _=u[c=a[p+1]];a[p].call(_)}if(null!==u){for(let p=c+1;p<u.length;p++)u[p]();s[7]=null}}(i,s),1===s[1].type&&Kt(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&ti(s[3])){a!==s[3]&&yy(a,s);const u=s[19];null!==u&&u.detachView(i)}}}function Zp(i,s,a){return function I0(i,s,a){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return a[0];if(2&u.flags){const c=i.data[u.directiveStart].encapsulation;if(c===bt.None||c===bt.Emulated)return null}return Gn(u,a)}(i,s.parent,a)}function Fl(i,s,a,u,c){Kt(i)?i.insertBefore(s,a,u,c):s.insertBefore(a,u,c)}function Kp(i,s,a){Kt(i)?i.appendChild(s,a):s.appendChild(a)}function Iy(i,s,a,u,c){null!==u?Fl(i,s,a,u,c):Kp(i,s,a)}function Yp(i,s){return Kt(i)?i.parentNode(s):s.parentNode}let md=function D0(i,s,a){return 40&i.type?Gn(i,a):null};function Ll(i,s,a,u){const c=Zp(i,u,s),p=s[11],E=function gd(i,s,a){return md(i,s,a)}(u.parent||s[6],u,s);if(null!=c)if(Array.isArray(a))for(let w=0;w<a.length;w++)Iy(p,c,a[w],E,!1);else Iy(p,c,a,E,!1)}function Vl(i,s){if(null!==s){const a=s.type;if(3&a)return Gn(s,i);if(4&a)return hf(-1,i[s.index]);if(8&a){const u=s.child;if(null!==u)return Vl(i,u);{const c=i[s.index];return ti(c)?hf(-1,c):Ht(c)}}if(32&a)return Ze(s,i)()||Ht(i[s.index]);{const u=Qp(i,s);return null!==u?Array.isArray(u)?u[0]:Vl(sn(i[16]),u):Vl(i,s.next)}}return null}function Qp(i,s){return null!==s?i[16][6].projection[s.projection]:null}function hf(i,s){const a=10+i+1;if(a<s.length){const u=s[a],c=u[1].firstChild;if(null!==c)return Vl(u,c)}return s[7]}function ff(i,s,a,u,c,p,_){for(;null!=a;){const E=u[a.index],w=a.type;if(_&&0===s&&(E&&Qe(Ht(E),u),a.flags|=4),64!=(64&a.flags))if(8&w)ff(i,s,a.child,u,c,p,!1),fo(s,i,c,E,p);else if(32&w){const T=Ze(a,u);let S;for(;S=T();)fo(s,i,c,S,p);fo(s,i,c,E,p)}else 16&w?T0(i,s,u,a,c,p):fo(s,i,c,E,p);a=_?a.projectionNext:a.next}}function yd(i,s,a,u,c,p){ff(a,u,i.firstChild,s,c,p,!1)}function T0(i,s,a,u,c,p){const _=a[16],w=_[6].projection[u.projection];if(Array.isArray(w))for(let T=0;T<w.length;T++)fo(s,i,c,w[T],p);else ff(i,s,w,_[3],c,p,!0)}function Xp(i,s,a){Kt(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function eg(i,s,a){Kt(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function M0(i,s,a){let u=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const p=s.length;if(c+p===u||i.charCodeAt(c+p)<=32)return c}a=c+1}}const tg="ng-template";function Cy(i,s,a){let u=0;for(;u<i.length;){let c=i[u++];if(a&&"class"===c){if(c=i[u],-1!==M0(c.toLowerCase(),s,0))return!0}else if(1===c){for(;u<i.length&&"string"==typeof(c=i[u++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function dr(i){return 4===i.type&&i.value!==tg}function qr(i,s,a){return s===(4!==i.type||a?i.value:tg)}function ng(i,s,a){let u=4;const c=i.attrs||[],p=function ZI(i){for(let s=0;s<i.length;s++)if(ns(i[s]))return s;return i.length}(c);let _=!1;for(let E=0;E<s.length;E++){const w=s[E];if("number"!=typeof w){if(!_)if(4&u){if(u=2|1&u,""!==w&&!qr(i,w,a)||""===w&&1===s.length){if(ls(u))return!1;_=!0}}else{const T=8&u?w:s[++E];if(8&u&&null!==i.attrs){if(!Cy(i.attrs,T,a)){if(ls(u))return!1;_=!0}continue}const k=zI(8&u?"class":w,c,dr(i),a);if(-1===k){if(ls(u))return!1;_=!0;continue}if(""!==T){let U;U=k>p?"":c[k+1].toLowerCase();const z=8&u?U:null;if(z&&-1!==M0(z,T,0)||2&u&&T!==U){if(ls(u))return!1;_=!0}}}}else{if(!_&&!ls(u)&&!ls(w))return!1;if(_&&ls(w))continue;_=!1,u=w|1&u}}return ls(u)||_}function ls(i){return 0==(1&i)}function zI(i,s,a,u){if(null===s)return-1;let c=0;if(u||!a){let p=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)p=!0;else{if(1===_||2===_){let E=s[++c];for(;"string"==typeof E;)E=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=p?1:2}return-1}return function KI(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const u=i[a];if("number"==typeof u)return-1;if(u===s)return a;a++}return-1}(s,i)}function R0(i,s,a=!1){for(let u=0;u<s.length;u++)if(ng(i,s[u],a))return!0;return!1}function rg(i,s){return i?":not("+s.trim()+")":s}function YI(i){let s=i[0],a=1,u=2,c="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&u){const E=i[++a];c+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&u?c+="."+_:4&u&&(c+=" "+_);else""!==c&&!ls(_)&&(s+=rg(p,c),c=""),u=_,p=p||!ls(u);a++}return""!==c&&(s+=rg(p,c)),s}const Et={};function pf(i){ig(Tt(),we(),Wn()+i,da())}function ig(i,s,a,u){if(!u)if(3==(3&s[2])){const p=i.preOrderCheckHooks;null!==p&&ga(s,p,a)}else{const p=i.preOrderHooks;null!==p&&ml(s,p,0,a)}Xi(a)}function gf(i,s){return i<<17|s<<2}function po(i){return i>>17&32767}function og(i){return 2|i}function Uo(i){return(131068&i)>>2}function vd(i,s){return-131069&i|s<<2}function Ay(i){return 1|i}function G0(i,s){const a=i.contentQueries;if(null!==a)for(let u=0;u<a.length;u+=2){const c=a[u],p=a[u+1];if(-1!==p){const _=i.data[p];fl(c),_.contentQueries(2,s[p],p)}}}function Ru(i,s,a,u,c,p,_,E,w,T){const S=s.blueprint.slice();return S[0]=c,S[2]=140|u,Ts(S),S[3]=S[15]=i,S[8]=a,S[10]=_||i&&i[10],S[11]=E||i&&i[11],S[12]=w||i&&i[12]||null,S[9]=T||i&&i[9]||null,S[6]=p,S[16]=2==s.type?i[16]:S,S}function ka(i,s,a,u,c){let p=i.data[s];if(null===p)p=function Id(i,s,a,u,c){const p=Ss(),_=ll(),w=i.data[s]=function z0(i,s,a,u,c,p){return{type:a,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,s,u,c);return null===i.firstChild&&(i.firstChild=w),null!==p&&(_?null==p.child&&null!==w.parent&&(p.child=w):null===p.next&&(p.next=w)),w}(i,s,a,u,c),function ha(){return at.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=u,p.attrs=c;const _=function ca(){const i=at.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return Er(p,!0),p}function Gl(i,s,a,u){if(0===a)return-1;const c=s.length;for(let p=0;p<a;p++)s.push(u),i.blueprint.push(u),i.data.push(null);return c}function nn(i,s,a){ro(s);try{const u=i.viewQuery;null!==u&&vg(1,u,a);const c=i.template;null!==c&&q0(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&G0(i,s),i.staticViewQueries&&vg(2,i.viewQuery,a);const p=i.components;null!==p&&function Pa(i,s){for(let a=0;a<s.length;a++)mg(i,s[a])}(s,p)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{s[2]&=-5,Po()}}function Fa(i,s,a,u){const c=s[2];if(256==(256&c))return;ro(s);const p=da();try{Ts(s),function dl(i){return at.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&q0(i,s,a,2,u);const _=3==(3&c);if(!p)if(_){const T=i.preOrderCheckHooks;null!==T&&ga(s,T,null)}else{const T=i.preOrderHooks;null!==T&&ml(s,T,0,null),lu(s,0)}if(function eE(i){for(let s=er(i);null!==s;s=Na(s)){if(!s[2])continue;const a=s[9];for(let u=0;u<a.length;u++){const c=a[u],p=c[3];0==(1024&c[2])&&As(p,1),c[2]|=1024}}}(s),function dD(i){for(let s=er(i);null!==s;s=Na(s))for(let a=10;a<s.length;a++){const u=s[a],c=u[1];Ai(u)&&Fa(c,u,c.template,u[8])}}(s),null!==i.contentQueries&&G0(i,s),!p)if(_){const T=i.contentCheckHooks;null!==T&&ga(s,T)}else{const T=i.contentHooks;null!==T&&ml(s,T,1),lu(s,1)}!function H0(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let u=0;u<a.length;u++){const c=a[u];if(c<0)Xi(~c);else{const p=c,_=a[++u],E=a[++u];fa(_,p),E(2,s[p])}}}finally{Xi(-1)}}(i,s);const E=i.components;null!==E&&function Hl(i,s){for(let a=0;a<s.length;a++)tE(i,s[a])}(s,E);const w=i.viewQuery;if(null!==w&&vg(2,w,u),!p)if(_){const T=i.viewCheckHooks;null!==T&&ga(s,T)}else{const T=i.viewHooks;null!==T&&ml(s,T,2),lu(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),p||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,As(s[3],-1))}finally{Po()}}function iD(i,s,a,u){const c=s[10],p=!da(),_=No(s);try{p&&!_&&c.begin&&c.begin(),_&&nn(i,s,u),Fa(i,s,a,u)}finally{p&&!_&&c.end&&c.end()}}function q0(i,s,a,u,c){const p=Wn(),_=2&u;try{Xi(-1),_&&s.length>20&&ig(i,s,20,da()),a(u,c)}finally{Xi(p)}}function ql(i,s,a){!ul()||(function uD(i,s,a,u){const c=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||Ir(a,s),Qe(u,s);const _=a.initialInputs;for(let E=c;E<p;E++){const w=i.data[E],T=ni(w);T&&If(s,a,w);const S=rs(s,i,E,a);Qe(S,s),null!==_&&J0(0,E-c,S,w,0,_),T&&(qn(a.index,s)[8]=S)}}(i,s,a,Gn(a,s)),128==(128&a.flags)&&function lD(i,s,a){const u=a.directiveStart,c=a.directiveEnd,_=a.index,E=function kc(){return at.lFrame.currentDirectiveIndex}();try{Xi(_);for(let w=u;w<c;w++){const T=i.data[w],S=s[w];no(w),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&Q0(T,S)}}finally{Xi(-1),no(E)}}(i,s,a))}function Oy(i,s,a=Gn){const u=s.localNames;if(null!==u){let c=s.index+1;for(let p=0;p<u.length;p+=2){const _=u[p+1],E=-1===_?a(s,i):i[_];i[c++]=E}}}function Py(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=dg(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function dg(i,s,a,u,c,p,_,E,w,T){const S=20+u,k=S+c,U=function sD(i,s){const a=[];for(let u=0;u<s;u++)a.push(u<i?null:Et);return a}(S,k),z="function"==typeof T?T():T;return U[1]={type:i,blueprint:U,template:a,queries:null,viewQuery:E,declTNode:s,data:U.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:w,consts:z,incompleteFirstPass:!1}}function La(i,s,a,u){const c=iE(s);null===a?c.push(u):(c.push(a),i.firstCreatePass&&Gy(i).push(u,c.length-1))}function ky(i,s,a){for(let u in i)if(i.hasOwnProperty(u)){const c=i[u];(a=null===a?{}:a).hasOwnProperty(u)?a[u].push(s,c):a[u]=[s,c]}return a}function hg(i,s,a,u){let c=!1;if(ul()){const p=function fg(i,s,a){const u=i.directiveRegistry;let c=null;if(u)for(let p=0;p<u.length;p++){const _=u[p];R0(a,_.selectors,!1)&&(c||(c=[]),Dr(Ir(a,s),i,_.type),ni(_)?(Td(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===u?null:{"":-1};if(null!==p){c=!0,jy(a,i.data.length,p.length);for(let S=0;S<p.length;S++){const k=p[S];k.providersResolver&&k.providersResolver(k)}let E=!1,w=!1,T=Gl(i,s,p.length,null);for(let S=0;S<p.length;S++){const k=p[S];a.mergedAttrs=du(a.mergedAttrs,k.hostAttrs),Ad(i,a,s,T,k),By(T,k,_),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const U=k.type.prototype;!E&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!w&&(U.ngOnChanges||U.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),w=!0),T++}!function Z0(i,s){const u=s.directiveEnd,c=i.data,p=s.attrs,_=[];let E=null,w=null;for(let T=s.directiveStart;T<u;T++){const S=c[T],k=S.inputs,U=null===p||dr(s)?null:cD(k,p);_.push(U),E=ky(k,T,E),w=ky(S.outputs,T,w)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=E,s.outputs=w}(i,a)}_&&function pg(i,s,a){if(s){const u=i.localNames=[];for(let c=0;c<s.length;c+=2){const p=a[s[c+1]];if(null==p)throw new xe(-301,!1);u.push(s[c],p)}}}(a,u,_)}return a.mergedAttrs=du(a.mergedAttrs,a.attrs),c}function Vy(i,s,a,u,c,p){const _=p.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const w=~s.index;(function Uy(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=w&&E.push(w),E.push(u,c,_)}}function Q0(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Td(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function By(i,s,a){if(a){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)a[s.exportAs[u]]=i;ni(s)&&(a[""]=i)}}function jy(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function Ad(i,s,a,u,c){i.data[u]=c;const p=c.factory||(c.factory=ri(c.type)),_=new ko(p,ni(c),null);i.blueprint[u]=_,a[u]=_,Vy(i,s,0,u,Gl(i,a,c.hostVars,Et),c)}function If(i,s,a){const u=Gn(s,i),c=Py(a),p=i[10],_=Vs(i,Ru(i,c,null,a.onPush?64:16,u,s,p,p.createRenderer(u,a),null,null));i[s.index]=_}function $o(i,s,a,u,c,p){const _=Gn(i,s);!function Un(i,s,a,u,c,p,_){if(null==p)Kt(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const E=null==_?q(p):_(p,u||"",c);Kt(i)?i.setAttribute(s,c,E,a):a?s.setAttributeNS(a,c,E):s.setAttribute(c,E)}}(s[11],_,p,i.value,a,u,c)}function J0(i,s,a,u,c,p){const _=p[s];if(null!==_){const E=u.setInput;for(let w=0;w<_.length;){const T=_[w++],S=_[w++],k=_[w++];null!==E?u.setInput(a,k,T,S):a[S]=k}}}function cD(i,s){let a=null,u=0;for(;u<s.length;){const c=s[u];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[u+1])),u+=2}else u+=2;else u+=4}return a}function X0(i,s,a,u){return new Array(i,!0,!1,s,null,0,u,a,null,null)}function tE(i,s){const a=qn(s,i);if(Ai(a)){const u=a[1];80&a[2]?Fa(u,a,u.template,a[8]):a[5]>0&&gg(a)}}function gg(i){for(let u=er(i);null!==u;u=Na(u))for(let c=10;c<u.length;c++){const p=u[c];if(1024&p[2]){const _=p[1];Fa(_,p,_.template,p[8])}else p[5]>0&&gg(p)}const a=i[1].components;if(null!==a)for(let u=0;u<a.length;u++){const c=qn(a[u],i);Ai(c)&&c[5]>0&&gg(c)}}function mg(i,s){const a=qn(s,i),u=a[1];(function nE(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(u,a),nn(u,a,a[8])}function Vs(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function yg(i){for(;i;){i[2]|=64;const s=sn(i);if(Th(i)&&!s)return i;i=s}return null}function Wl(i,s,a){const u=s[10];u.begin&&u.begin();try{Fa(i,s,i.template,a)}catch(c){throw qy(s,c),c}finally{u.end&&u.end()}}function $y(i){!function Df(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],u=Du(a),c=u[1];iD(c,u,c.template,a)}}(i[8])}function vg(i,s,a){fl(0),s(i,a)}const Eg=(()=>Promise.resolve(null))();function iE(i){return i[7]||(i[7]=[])}function Gy(i){return i.cleanup||(i.cleanup=[])}function qy(i,s){const a=i[9],u=a?a.get(An,null):null;u&&u.handleError(s)}function Wy(i,s,a,u,c){for(let p=0;p<a.length;){const _=a[p++],E=a[p++],w=s[_],T=i.data[_];null!==T.setInput?T.setInput(w,c,u,E):w[E]=c}}function go(i,s,a){const u=to(s,i);!function dd(i,s,a){Kt(i)?i.setValue(s,a):s.textContent=a}(i[11],u,a)}function Md(i,s,a){let u=a?i.styles:null,c=a?i.classes:null,p=0;if(null!==s)for(let _=0;_<s.length;_++){const E=s[_];"number"==typeof E?p=E:1==p?c=le(c,E):2==p&&(u=le(u,E+": "+s[++_]+";"))}a?i.styles=u:i.stylesWithoutHost=u,a?i.classes=c:i.classesWithoutHost=c}const Ig=new on("INJECTOR",-1);class Nu{get(s,a=Pi){if(a===Pi){const u=new Error(`NullInjectorError: No provider for ${ue(s)}!`);throw u.name="NullInjectorError",u}return a}}const Dg=new on("Set Injector scope."),xd={},oE={};let Cg;function Cf(){return void 0===Cg&&(Cg=new Nu),Cg}function Fi(i,s=null,a=null,u){const c=zy(i,s,a,u);return c._resolveInjectorDefTypes(),c}function zy(i,s=null,a=null,u){return new aE(i,a,s||Cf(),u)}class aE{constructor(s,a,u,c=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&mi(a,E=>this.processProvider(E,s,a)),mi([s],E=>this.processInjectorType(E,[],p)),this.records.set(Ig,Rd(void 0,this));const _=this.records.get(Dg);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:ue(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=Pi,u=ut.Default){this.assertNotDestroyed();const c=te(this),p=yn(void 0);try{if(!(u&ut.SkipSelf)){let E=this.records.get(s);if(void 0===E){const w=function Nd(i){return"function"==typeof i||"object"==typeof i&&i instanceof on}(s)&&At(s);E=w&&this.injectableDefInScope(w)?Rd(Ou(s),xd):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(u&ut.Self?Cf():this.parent).get(s,a=u&ut.Optional&&a===Pi?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[yu]=_[yu]||[]).unshift(ue(s)),c)throw _;return function rn(i,s,a,u){const c=i[yu];throw s[M]&&c.unshift(s[M]),i.message=function Ps(i,s,a,u=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=ue(s);if(Array.isArray(s))c=s.map(ue).join(" -> ");else if("object"==typeof s){let p=[];for(let _ in s)if(s.hasOwnProperty(_)){let E=s[_];p.push(_+":"+("string"==typeof E?JSON.stringify(E):ue(E)))}c=`{${p.join(", ")}}`}return`${a}${u?"("+u+")":""}[${c}]: ${i.replace(D,"\n  ")}`}("\n"+i.message,c,a,u),i.ngTokenPath=c,i[yu]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{yn(p),te(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((u,c)=>s.push(ue(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new xe(205,!1)}processInjectorType(s,a,u){if(!(s=K(s)))return!1;let c=mr(s);const p=null==c&&s.ngModule||void 0,_=void 0===p?s:p,E=-1!==u.indexOf(_);if(void 0!==p&&(c=mr(p)),null==c)return!1;if(null!=c.imports&&!E){let S;u.push(_);try{mi(c.imports,k=>{this.processInjectorType(k,a,u)&&(void 0===S&&(S=[]),S.push(k))})}finally{}if(void 0!==S)for(let k=0;k<S.length;k++){const{ngModule:U,providers:z}=S[k];mi(z,he=>this.processProvider(he,U,z||L))}}this.injectorDefTypes.add(_);const w=ri(_)||(()=>new _);this.records.set(_,Rd(w,xd));const T=c.providers;if(null!=T&&!E){const S=s;mi(T,k=>this.processProvider(k,S,T))}return void 0!==p&&void 0!==s.providers}processProvider(s,a,u){let c=Va(s=K(s))?s:K(s&&s.provide);const p=function gD(i,s,a){return uE(i)?Rd(void 0,i.useValue):Rd(bg(i),xd)}(s);if(Va(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=Rd(void 0,xd,!0),_.factory=()=>Lt(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,p)}hydrate(s,a){return a.value===xd&&(a.value=oE,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Wr(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=K(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Ou(i){const s=At(i),a=null!==s?s.factory:ri(i);if(null!==a)return a;if(i instanceof on)throw new xe(204,!1);if(i instanceof Function)return function pD(i){const s=i.length;if(s>0)throw function Br(i,s){const a=[];for(let u=0;u<i;u++)a.push(s);return a}(s,"?"),new xe(204,!1);const a=function Qn(i){const s=i&&(i[bi]||i[Xr]);if(s){const a=function vs(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new xe(204,!1)}function bg(i,s,a){let u;if(Va(i)){const c=K(i);return ri(c)||Ou(c)}if(uE(i))u=()=>K(i.useValue);else if(function mD(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(...Lt(i.deps||[]));else if(function lE(i){return!(!i||!i.useExisting)}(i))u=()=>ke(K(i.useExisting));else{const c=K(i&&(i.useClass||i.provide));if(!function cE(i){return!!i.deps}(i))return ri(c)||Ou(c);u=()=>new c(...Lt(i.deps))}return u}function Rd(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function uE(i){return null!==i&&"object"==typeof i&&F in i}function Va(i){return"function"==typeof i}let hr=(()=>{class i{static create(a,u){var c;if(Array.isArray(a))return Fi({name:""},u,a,"");{const p=null!==(c=a.name)&&void 0!==c?c:"";return Fi({name:p},a.parent,a.providers,p)}}}return i.THROW_IF_NOT_FOUND=Pi,i.NULL=new Nu,i.\u0275prov=Bt({token:i,providedIn:"any",factory:()=>ke(Ig)}),i.__NG_ELEMENT_ID__=-1,i})();function pE(i,s){es(Du(i)[1],dn())}function Tg(i){let s=function vt(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const u=[i];for(;s;){let c;if(ni(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new xe(903,"");c=s.\u0275dir}if(c){if(a){u.push(c);const _=i;_.inputs=Ag(i.inputs),_.declaredInputs=Ag(i.declaredInputs),_.outputs=Ag(i.outputs);const E=c.hostBindings;E&&ED(i,E);const w=c.viewQuery,T=c.contentQueries;if(w&&Tf(i,w),T&&zt(i,T),re(i.inputs,c.inputs),re(i.declaredInputs,c.declaredInputs),re(i.outputs,c.outputs),ni(c)&&c.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(c.data.animation)}}const p=c.features;if(p)for(let _=0;_<p.length;_++){const E=p[_];E&&E.ngInherit&&E(i),E===Tg&&(a=!1)}}s=Object.getPrototypeOf(s)}!function Zl(i){let s=0,a=null;for(let u=i.length-1;u>=0;u--){const c=i[u];c.hostVars=s+=c.hostVars,c.hostAttrs=du(c.hostAttrs,a=du(a,c.hostAttrs))}}(u)}function Ag(i){return i===ei?{}:i===L?[]:i}function Tf(i,s){const a=i.viewQuery;i.viewQuery=a?(u,c)=>{s(u,c),a(u,c)}:s}function zt(i,s){const a=i.contentQueries;i.contentQueries=a?(u,c,p)=>{s(u,c,p),a(u,c,p)}:s}function ED(i,s){const a=i.hostBindings;i.hostBindings=a?(u,c)=>{s(u,c),a(u,c)}:s}let Bn=null;function kd(){if(!Bn){const i=Rt.Symbol;if(i&&i.iterator)Bn=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const u=s[a];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Bn=u)}}}return Bn}function wn(i){return!!Sg(i)&&(Array.isArray(i)||!(i instanceof Map)&&kd()in i)}function Sg(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function fr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Bs(i,s,a,u){const c=we();return fr(c,Si(),s)&&(Tt(),$o(hn(),c,i,s,a,u)),Bs}function Sf(i,s,a,u,c,p,_,E){const w=we(),T=Tt(),S=i+20,k=T.firstCreatePass?function ID(i,s,a,u,c,p,_,E,w){const T=s.consts,S=ka(s,i,4,_||null,Vr(T,E));hg(s,a,S,Vr(T,w)),es(s,S);const k=S.tViews=dg(2,S,u,c,p,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,S),k.queries=s.queries.embeddedTView(S)),S}(S,T,w,s,a,u,c,p,_):T.data[S];Er(k,!1);const U=w[11].createComment("");Ll(T,w,U,k),Qe(U,w),Vs(w,w[S]=X0(U,w,U,k)),Ds(k)&&ql(T,w,k),null!=_&&Oy(w,k,E)}function _o(i,s=ut.Default){const a=we();return null===a?ke(i,s):si(dn(),a,K(i),s)}function u_(){throw new Error("invalid")}function Gu(i,s,a){const u=we();return fr(u,Si(),s)&&function cs(i,s,a,u,c,p,_,E){const w=Gn(s,a);let S,T=s.inputs;!E&&null!=T&&(S=T[u])?(Wy(i,a,S,u,c),tu(s)&&function oD(i,s){const a=qn(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(u=function bd(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),c=null!=_?_(c,s.value||"",u):c,Kt(p)?p.setProperty(w,u,c):yl(u)||(w.setProperty?w.setProperty(u,c):w[u]=c))}(Tt(),hn(),u,i,s,u[11],a,!1),Gu}function Ng(i,s,a,u,c){const _=c?"class":"style";Wy(i,a,s.inputs[_],_,u)}function Xl(i,s,a,u){const c=we(),p=Tt(),_=20+i,E=c[11],w=c[_]=kl(E,s,function Lc(){return at.lFrame.currentNamespace}()),T=p.firstCreatePass?function bE(i,s,a,u,c,p,_){const E=s.consts,T=ka(s,i,2,c,Vr(E,p));return hg(s,a,T,Vr(E,_)),null!==T.attrs&&Md(T,T.attrs,!1),null!==T.mergedAttrs&&Md(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(_,p,c,0,s,a,u):p.data[_];Er(T,!0);const S=T.mergedAttrs;null!==S&&ar(E,w,S);const k=T.classes;null!==k&&eg(E,w,k);const U=T.styles;null!==U&&Xp(E,w,U),64!=(64&T.flags)&&Ll(p,c,w,T),0===function oa(){return at.lFrame.elementDepthCount}()&&Qe(w,c),function Rc(){at.lFrame.elementDepthCount++}(),Ds(T)&&(ql(p,c,T),function Dd(i,s,a){if(wc(s)){const c=s.directiveEnd;for(let p=s.directiveStart;p<c;p++){const _=i.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}(p,T,c)),null!==u&&Oy(c,T)}function l_(){let i=dn();ll()?function cl(){at.lFrame.isParent=!1}():(i=i.parent,Er(i,!1));const s=i;!function aa(){at.lFrame.elementDepthCount--}();const a=Tt();a.firstCreatePass&&(es(a,i),wc(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Oh(i){return 0!=(16&i.flags)}(s)&&Ng(a,s,we(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Sp(i){return 0!=(32&i.flags)}(s)&&Ng(a,s,we(),s.stylesWithoutHost,!1)}function TE(i,s,a,u){Xl(i,s,a,u),l_()}function SE(){return we()}function Pg(i){return!!i&&"function"==typeof i.then}function d_(i){return!!i&&"function"==typeof i.subscribe}const jd=d_;function qo(i,s,a,u){const c=we(),p=Tt(),_=dn();return function f_(i,s,a,u,c,p,_,E){const w=Ds(u),S=i.firstCreatePass&&Gy(i),k=s[8],U=iE(s);let z=!0;if(3&u.type||E){const Be=Gn(u,s),ze=E?E(Be):Be,Ee=U.length,rt=E?ht=>E(Ht(ht[u.index])):u.index;if(Kt(a)){let ht=null;if(!E&&w&&(ht=function ME(i,s,a,u){const c=i.cleanup;if(null!=c)for(let p=0;p<c.length-1;p+=2){const _=c[p];if(_===a&&c[p+1]===u){const E=s[7],w=c[p+2];return E.length>w?E[w]:null}"string"==typeof _&&(p+=2)}return null}(i,s,c,u.index)),null!==ht)(ht.__ngLastListenerFn__||ht).__ngNextListenerFn__=p,ht.__ngLastListenerFn__=p,z=!1;else{p=kf(u,s,k,p,!1);const Qt=a.listen(ze,c,p);U.push(p,Qt),S&&S.push(c,rt,Ee,Ee+1)}}else p=kf(u,s,k,p,!0),ze.addEventListener(c,p,_),U.push(p),S&&S.push(c,rt,Ee,_)}else p=kf(u,s,k,p,!1);const he=u.outputs;let Me;if(z&&null!==he&&(Me=he[c])){const Be=Me.length;if(Be)for(let ze=0;ze<Be;ze+=2){const Ii=s[Me[ze]][Me[ze+1]].subscribe(p),zs=U.length;U.push(p,Ii),S&&S.push(c,u.index,zs,-(zs+1))}}}(p,c,c[11],_,i,s,!!a,u),qo}function $d(i,s,a,u){try{return!1!==a(u)}catch(c){return qy(i,c),!1}}function kf(i,s,a,u,c){return function p(_){if(_===Function)return u;const E=2&i.flags?qn(i.index,s):s;0==(32&s[2])&&yg(E);let w=$d(s,0,u,_),T=p.__ngNextListenerFn__;for(;T;)w=$d(s,0,T,_)&&w,T=T.__ngNextListenerFn__;return c&&!1===w&&(_.preventDefault(),_.returnValue=!1),w}}function xE(i=1){return function Mi(i){return(at.lFrame.contextLView=function xh(i,s){for(;i>0;)s=s[15],i--;return s}(i,at.lFrame.contextLView))[8]}(i)}function Yt(i,s,a,u,c){const p=i[a+1],_=null===s;let E=u?po(p):Uo(p),w=!1;for(;0!==E&&(!1===w||_);){const S=i[E+1];PD(i[E],s)&&(w=!0,i[E+1]=u?Ay(S):og(S)),E=u?po(S):Uo(S)}w&&(i[a+1]=u?og(p):Ay(p))}function PD(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&mu(i,s)>=0}function nr(i,s){return function fs(i,s,a,u){const c=we(),p=Tt(),_=function Ji(i){const s=at.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);p.firstUpdatePass&&function __(i,s,a,u){const c=i.data;if(null===c[a+1]){const p=c[Wn()],_=function qd(i,s){return s>=i.expandoStartIndex}(i,a);(function w_(i,s){return 0!=(i.flags&(s?16:32))})(p,u)&&null===s&&!_&&(s=!1),s=function jE(i,s,a,u){const c=function hl(i){const s=at.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let p=u?s.residualClasses:s.residualStyles;if(null===c)0===(u?s.classBindings:s.styleBindings)&&(a=zd(a=Wd(null,i,s,a,u),s.attrs,u),p=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=Wd(c,i,s,a,u),null===p){let w=function $E(i,s,a){const u=a?s.classBindings:s.styleBindings;if(0!==Uo(u))return i[po(u)]}(i,s,u);void 0!==w&&Array.isArray(w)&&(w=Wd(null,i,s,w[1],u),w=zd(w,s.attrs,u),function VD(i,s,a,u){i[po(a?s.classBindings:s.styleBindings)]=u}(i,s,u,w))}else p=function UD(i,s,a){let u;const c=s.directiveEnd;for(let p=1+s.directiveStylingLast;p<c;p++)u=zd(u,i[p].hostAttrs,a);return zd(u,s.attrs,a)}(i,s,u)}return void 0!==p&&(u?s.residualClasses=p:s.residualStyles=p),a}(c,p,s,u),function PE(i,s,a,u,c,p){let _=p?s.classBindings:s.styleBindings,E=po(_),w=Uo(_);i[u]=a;let S,T=!1;if(Array.isArray(a)){const k=a;S=k[1],(null===S||mu(k,S)>0)&&(T=!0)}else S=a;if(c)if(0!==w){const U=po(i[E+1]);i[u+1]=gf(U,E),0!==U&&(i[U+1]=vd(i[U+1],u)),i[E+1]=function P0(i,s){return 131071&i|s<<17}(i[E+1],u)}else i[u+1]=gf(E,0),0!==E&&(i[E+1]=vd(i[E+1],u)),E=u;else i[u+1]=gf(w,0),0===E?E=u:i[w+1]=vd(i[w+1],u),w=u;T&&(i[u+1]=og(i[u+1])),Yt(i,S,u,!0),Yt(i,S,u,!1),function OD(i,s,a,u,c){const p=c?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof s&&mu(p,s)>=0&&(a[u+1]=Ay(a[u+1]))}(s,S,i,u,p),_=gf(E,w),p?s.classBindings=_:s.styleBindings=_}(c,p,s,a,_,u)}}(p,i,_,u),s!==Et&&fr(c,_,s)&&function E_(i,s,a,u,c,p,_,E){if(!(3&s.type))return;const w=i.data,T=w[E+1];Uf(function k0(i){return 1==(1&i)}(T)?GE(w,s,a,c,Uo(T),_):void 0)||(Uf(p)||function _d(i){return 2==(2&i)}(T)&&(p=GE(w,null,a,c,E,_)),function S0(i,s,a,u,c){const p=Kt(i);if(s)c?p?i.addClass(a,u):a.classList.add(u):p?i.removeClass(a,u):a.classList.remove(u);else{let _=-1===u.indexOf("-")?void 0:ae.DashCase;if(null==c)p?i.removeStyle(a,u,_):a.style.removeProperty(u);else{const E="string"==typeof c&&c.endsWith("!important");E&&(c=c.slice(0,-10),_|=ae.Important),p?i.setStyle(a,u,c,_):a.style.setProperty(u,c,E?"important":"")}}}(u,_,to(Wn(),a),c,p))}(p,p.data[Wn()],c,c[11],i,c[_+1]=function qE(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ue(us(i)))),i}(s,a),u,_)}(i,s,null,!0),nr}function Wd(i,s,a,u,c){let p=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(p=s[E],u=zd(u,p.hostAttrs,c),p!==i);)E++;return null!==i&&(a.directiveStylingLast=E),u}function zd(i,s,a){const u=a?1:2;let c=-1;if(null!==s)for(let p=0;p<s.length;p++){const _=s[p];"number"==typeof _?c=_:c===u&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),oi(i,_,!!a||s[++p]))}return void 0===i?null:i}function GE(i,s,a,u,c,p){const _=null===s;let E;for(;c>0;){const w=i[c],T=Array.isArray(w),S=T?w[1]:w,k=null===S;let U=a[c+1];U===Et&&(U=k?L:void 0);let z=k?Vh(U,u):S===u?U:void 0;if(T&&!Uf(z)&&(z=Vh(w,u)),Uf(z)&&(E=z,_))return E;const he=i[c+1];c=_?po(he):Uo(he)}if(null!==s){let w=p?s.residualClasses:s.residualStyles;null!=w&&(E=Vh(w,u))}return E}function Uf(i){return void 0!==i}function WE(i,s=""){const a=we(),u=Tt(),c=i+20,p=u.firstCreatePass?ka(u,c,1,s,null):u.data[c],_=a[c]=function Su(i,s){return Kt(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Ll(u,a,_,p),Er(p,!1)}function I_(i){return qu("",i,""),I_}function qu(i,s,a){const u=we(),c=function yo(i,s,a,u){return fr(i,Si(),a)?s+q(a)+u:Et}(u,i,s,a);return c!==Et&&go(u,Wn(),c),qu}const $a=void 0;var Ui=["en",[["a","p"],["AM","PM"],$a],[["AM","PM"],$a,$a],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],$a,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],$a,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",$a,"{1} 'at' {0}",$a],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function XE(i){const a=Math.floor(Math.abs(i)),u=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===u?1:5}];let Ku={};function zo(i){const s=function Qd(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=S_(s);if(a)return a;const u=s.split("-")[0];if(a=S_(u),a)return a;if("en"===u)return Ui;throw new Error(`Missing locale data for the locale "${i}".`)}function Lg(i){return zo(i)[dt.PluralCase]}function S_(i){return i in Ku||(Ku[i]=Rt.ng&&Rt.ng.common&&Rt.ng.common.locales&&Rt.ng.common.locales[i]),Ku[i]}var dt=(()=>((dt=dt||{})[dt.LocaleId=0]="LocaleId",dt[dt.DayPeriodsFormat=1]="DayPeriodsFormat",dt[dt.DayPeriodsStandalone=2]="DayPeriodsStandalone",dt[dt.DaysFormat=3]="DaysFormat",dt[dt.DaysStandalone=4]="DaysStandalone",dt[dt.MonthsFormat=5]="MonthsFormat",dt[dt.MonthsStandalone=6]="MonthsStandalone",dt[dt.Eras=7]="Eras",dt[dt.FirstDayOfWeek=8]="FirstDayOfWeek",dt[dt.WeekendRange=9]="WeekendRange",dt[dt.DateFormat=10]="DateFormat",dt[dt.TimeFormat=11]="TimeFormat",dt[dt.DateTimeFormat=12]="DateTimeFormat",dt[dt.NumberSymbols=13]="NumberSymbols",dt[dt.NumberFormats=14]="NumberFormats",dt[dt.CurrencyCode=15]="CurrencyCode",dt[dt.CurrencySymbol=16]="CurrencySymbol",dt[dt.CurrencyName=17]="CurrencyName",dt[dt.Currencies=18]="Currencies",dt[dt.Directionality=19]="Directionality",dt[dt.PluralCase=20]="PluralCase",dt[dt.ExtraData=21]="ExtraData",dt))();const Yu="en-US";let rw=Yu;function qf(i,s,a,u,c){if(i=K(i),Array.isArray(i))for(let p=0;p<i.length;p++)qf(i[p],s,a,u,c);else{const p=Tt(),_=we();let E=Va(i)?i:K(i.provide),w=bg(i);const T=dn(),S=1048575&T.providerIndexes,k=T.directiveStart,U=T.providerIndexes>>20;if(Va(i)||!i.multi){const z=new ko(w,c,_o),he=Jg(E,s,c?S:S+U,k);-1===he?(Dr(Ir(T,_),p,E),Qg(p,i,s.length),s.push(E),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(z),_.push(z)):(a[he]=z,_[he]=z)}else{const z=Jg(E,s,S+U,k),he=Jg(E,s,S,S+U),Me=z>=0&&a[z],Be=he>=0&&a[he];if(c&&!Be||!c&&!Me){Dr(Ir(T,_),p,E);const ze=function mw(i,s,a,u,c){const p=new ko(i,a,_o);return p.multi=[],p.index=s,p.componentProviders=0,gw(p,c,u&&!a),p}(c?fC:hC,a.length,c,u,w);!c&&Be&&(a[he].providerFactory=ze),Qg(p,i,s.length,0),s.push(E),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(ze),_.push(ze)}else Qg(p,i,z>-1?z:he,gw(a[c?he:z],w,!c&&u));!c&&u&&Be&&a[he].componentProviders++}}}function Qg(i,s,a,u){const c=Va(s),p=function yD(i){return!!i.useClass}(s);if(c||p){const w=(p?K(s.useClass):s).prototype.ngOnDestroy;if(w){const T=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const S=T.indexOf(a);-1===S?T.push(a,[u,w]):T[S+1].push(u,w)}else T.push(a,w)}}}function gw(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Jg(i,s,a,u){for(let c=a;c<u;c++)if(s[c]===i)return c;return-1}function hC(i,s,a,u){return z_(this.multi,[])}function fC(i,s,a,u){const c=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=rs(a,a[1],this.providerFactory.index,u);p=E.slice(0,_),z_(c,p);for(let w=_;w<E.length;w++)p.push(E[w])}else p=[],z_(c,p);return p}function z_(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function Wf(i,s=[]){return a=>{a.providersResolver=(u,c)=>function W_(i,s,a){const u=Tt();if(u.firstCreatePass){const c=ni(i);qf(a,u.data,u.blueprint,c,!0),qf(s,u.data,u.blueprint,c,!1)}}(u,c?c(i):i,s)}}class Xg{}class pC{resolveComponentFactory(s){throw function yw(i){const s=Error(`No component factory found for ${ue(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Zf=(()=>{class i{}return i.NULL=new pC,i})();function gC(){return Zo(dn(),we())}function Zo(i,s){return new dc(Gn(i,s))}let dc=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=gC,i})();function oh(i){return i instanceof dc?i.nativeElement:i}class Kf{}let Yf=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Ew(){const i=we(),a=qn(dn().index,i);return function Z_(i){return i[11]}(fi(a)?a:i)}(),i})(),K_=(()=>{class i{}return i.\u0275prov=Bt({token:i,providedIn:"root",factory:()=>null}),i})();class em{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Ga=new em("13.2.2"),tm={};function nm(i,s,a,u,c=!1){for(;null!==a;){const p=s[a.index];if(null!==p&&u.push(Ht(p)),ti(p))for(let E=10;E<p.length;E++){const w=p[E],T=w[1].firstChild;null!==T&&nm(w[1],w,T,u)}const _=a.type;if(8&_)nm(i,s,a.child,u);else if(32&_){const E=Ze(a,s);let w;for(;w=E();)u.push(w)}else if(16&_){const E=Qp(s,a);if(Array.isArray(E))u.push(...E);else{const w=sn(s[16]);nm(w[1],w,E,u,!0)}}a=c?a.projectionNext:a.next}return u}class hc{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return nm(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(ti(s)){const a=s[8],u=a?a.indexOf(this):-1;u>-1&&(_y(s,u),lo(a,u))}this._attachedToViewContainer=!1}vy(this._lView[1],this._lView)}onDestroy(s){La(this._lView[1],this._lView,null,s)}markForCheck(){yg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Wl(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Hy(i,s,a){Oo(!0);try{Wl(i,s,a)}finally{Oo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new xe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function gy(i,s){yd(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new xe(902,"");this._appRef=s}}class mC extends hc{constructor(s){super(s),this._view=s}detectChanges(){$y(this._view)}checkNoChanges(){!function _g(i){Oo(!0);try{$y(i)}finally{Oo(!1)}}(this._view)}get context(){return null}}class rm extends Zf{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Pn(s);return new sm(a,this.ngModule)}}function ww(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}const im=new on("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Wp});class sm extends Xg{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function Ty(i){return i.map(YI).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return ww(this.componentDef.inputs)}get outputs(){return ww(this.componentDef.outputs)}create(s,a,u,c){const p=(c=c||this.ngModule)?function Q_(i,s){return{get:(a,u,c)=>{const p=i.get(a,tm,c);return p!==tm||u===tm?p:s.get(a,u,c)}}}(s,c.injector):s,_=p.get(Kf,ra),E=p.get(K_,null),w=_.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",S=u?function Cd(i,s,a){if(Kt(i))return i.selectRootElement(s,a===bt.ShadowDom);let u="string"==typeof s?i.querySelector(s):s;return u.textContent="",u}(w,u,this.componentDef.encapsulation):kl(_.createRenderer(null,this.componentDef),T,function Y_(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(T)),k=this.componentDef.onPush?576:528,U=function zl(i,s){return{components:[],scheduler:i||Wp,clean:Eg,playerHandler:s||null,flags:0}}(),z=dg(0,null,null,1,0,null,null,null,null,null),he=Ru(null,z,U,k,null,null,_,w,E,p);let Me,Be;ro(he);try{const ze=function Qy(i,s,a,u,c,p){const _=a[1];a[20]=i;const w=ka(_,20,2,"#host",null),T=w.mergedAttrs=s.hostAttrs;null!==T&&(Md(w,T,!0),null!==i&&(ar(c,i,T),null!==w.classes&&eg(c,i,w.classes),null!==w.styles&&Xp(c,i,w.styles)));const S=u.createRenderer(i,s),k=Ru(a,Py(s),null,s.onPush?64:16,a[20],w,u,S,p||null,null);return _.firstCreatePass&&(Dr(Ir(w,a),_,s.type),Td(_,w),jy(w,a.length,1)),Vs(a,k),a[20]=k}(S,this.componentDef,he,_,w);if(S)if(u)ar(w,S,["ng-version",Ga.full]);else{const{attrs:Ee,classes:rt}=function O0(i){const s=[],a=[];let u=1,c=2;for(;u<i.length;){let p=i[u];if("string"==typeof p)2===c?""!==p&&s.push(p,i[++u]):8===c&&a.push(p);else{if(!ls(c))break;c=p}u++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ee&&ar(w,S,Ee),rt&&rt.length>0&&eg(w,S,rt.join(" "))}if(Be=cn(z,20),void 0!==a){const Ee=Be.projection=[];for(let rt=0;rt<this.ngContentSelectors.length;rt++){const ht=a[rt];Ee.push(null!=ht?Array.from(ht):null)}}Me=function Nt(i,s,a,u,c){const p=a[1],_=function Ly(i,s,a){const u=dn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Ad(i,u,s,Gl(i,s,1,null),a));const c=rs(s,i,u.directiveStart,u);Qe(c,s);const p=Gn(u,s);return p&&Qe(p,s),c}(p,a,s);if(u.components.push(_),i[8]=_,c&&c.forEach(w=>w(_,s)),s.contentQueries){const w=dn();s.contentQueries(1,_,w.directiveStart)}const E=dn();return!p.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Xi(E.index),Vy(a[1],E,0,E.directiveStart,E.directiveEnd,s),Q0(s,_)),_}(ze,this.componentDef,he,U,[pE]),nn(z,he,null)}finally{Po()}return new yC(this.componentType,Me,Zo(Be,he),he,Be)}}class yC extends class zf{}{constructor(s,a,u,c,p){super(),this.location=u,this._rootLView=c,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new mC(c),this.componentType=s}get injector(){return new is(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class fc{}class J_{}const uh=new Map;class am extends fc{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new rm(this);const u=kn(s);this._bootstrapComponents=f(u.bootstrap),this._r3Injector=zy(s,a,[{provide:fc,useValue:this},{provide:Zf,useValue:this.componentFactoryResolver}],ue(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=hr.THROW_IF_NOT_FOUND,u=ut.Default){return s===hr||s===fc||s===Ig?this:this._r3Injector.get(s,a,u)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class um extends J_{constructor(s){super(),this.moduleType=s,null!==kn(s)&&function X_(i){const s=new Set;!function a(u){const c=kn(u,!0),p=c.id;null!==p&&(function Cw(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${ue(s)} vs ${ue(s.name)}`)}(p,uh.get(p),u),uh.set(p,u));const _=f(c.imports);for(const E of _)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new am(this.moduleType,s)}}function Tw(i,s,a,u,c,p){const _=s+a;return fr(i,_,c)?function Li(i,s,a){return i[s]=a}(i,_+1,p?u.call(p,c):u(c)):function Qf(i,s){const a=i[s];return a===Et?void 0:a}(i,_+1)}function Aw(i,s){const a=Tt();let u;const c=i+20;a.firstCreatePass?(u=function vC(i,s){if(s)for(let a=s.length-1;a>=0;a--){const u=s[a];if(i===u.name)return u}}(s,a.pipeRegistry),a.data[c]=u,u.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(c,u.onDestroy)):u=a.data[c];const p=u.factory||(u.factory=ri(u.type)),_=yn(_o);try{const E=so(!1),w=p();return so(E),function Mg(i,s,a,u){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=u}(a,we(),c,w),w}finally{yn(_)}}function fm(i,s,a){const u=i+20,c=we(),p=function Qi(i,s){return i[s]}(c,u);return function fh(i,s){return i[1].data[s].pure}(c,u)?Tw(c,function Fn(){const i=at.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}(),s,p.transform,a,p):p.transform(a)}function pm(i){return s=>{setTimeout(i,void 0,s)}}const vo=class Mw extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,u){var c,p,_;let E=s,w=a||(()=>null),T=u;if(s&&"object"==typeof s){const k=s;E=null===(c=k.next)||void 0===c?void 0:c.bind(k),w=null===(p=k.error)||void 0===p?void 0:p.bind(k),T=null===(_=k.complete)||void 0===_?void 0:_.bind(k)}this.__isAsync&&(w=pm(w),E&&(E=pm(E)),T&&(T=pm(T)));const S=super.subscribe({next:E,error:w,complete:T});return s instanceof Y.w0&&s.add(S),S}};function IC(){return this._results[kd()]()}class sv{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=kd(),u=sv.prototype;u[a]||(u[a]=IC)}get changes(){return this._changes||(this._changes=new vo)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const u=this;u.dirty=!1;const c=br(s);(this._changesDetected=!function gu(i,s,a){if(i.length!==s.length)return!1;for(let u=0;u<i.length;u++){let c=i[u],p=s[u];if(a&&(c=a(c),p=a(p)),p!==c)return!1}return!0}(u._results,c,a))&&(u._results=c,u.length=c.length,u.last=c[this.length-1],u.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Jf=(()=>{class i{}return i.__NG_ELEMENT_ID__=av,i})();const DC=Jf,ov=class extends DC{constructor(s,a,u){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=u}createEmbeddedView(s){const a=this._declarationTContainer.tViews,u=Ru(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(u[19]=p.createEmbeddedView(a)),nn(a,u,s),new hc(u)}};function av(){return ph(dn(),we())}function ph(i,s){return 4&i.type?new ov(s,i,Zo(i,s)):null}let gm=(()=>{class i{}return i.__NG_ELEMENT_ID__=uv,i})();function uv(){return cv(dn(),we())}const CC=gm,mm=class extends CC{constructor(s,a,u){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=u}get element(){return Zo(this._hostTNode,this._hostLView)}get injector(){return new is(this._hostTNode,this._hostLView)}get parentInjector(){const s=va(this._hostTNode,this._hostLView);if(Vc(s)){const a=fn(s,this._hostLView),u=Wt(s);return new is(a[1].data[u+8],a)}return new is(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=lv(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,u){const c=s.createEmbeddedView(a||{});return this.insert(c,u),c}createComponent(s,a,u,c,p){const _=s&&!function Cr(i){return"function"==typeof i}(s);let E;if(_)E=a;else{const k=a||{};E=k.index,u=k.injector,c=k.projectableNodes,p=k.ngModuleRef}const w=_?s:new sm(Pn(s)),T=u||this.parentInjector;if(!p&&null==w.ngModule&&T){const k=T.get(fc,null);k&&(p=k)}const S=w.create(T,c,void 0,p);return this.insert(S.hostView,E),S}insert(s,a){const u=s._lView,c=u[1];if(function al(i){return ti(i[3])}(u)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const k=u[3],U=new mm(k,k[6],k[3]);U.detach(U.indexOf(s))}}const p=this._adjustIndex(a),_=this._lContainer;!function w0(i,s,a,u){const c=10+u,p=a.length;u>0&&(a[c-1][4]=s),u<p-10?(s[4]=a[c],Il(a,10+u,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function my(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(c,u,_,p);const E=hf(p,_),w=u[11],T=Yp(w,_[7]);return null!==T&&function df(i,s,a,u,c,p){u[0]=c,u[6]=s,yd(i,u,a,1,c,p)}(c,_[6],w,u,T,E),s.attachToViewContainerRef(),Il(Xf(_),p,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=lv(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),u=_y(this._lContainer,a);u&&(lo(Xf(this._lContainer),a),vy(u[1],u))}detach(s){const a=this._adjustIndex(s,-1),u=_y(this._lContainer,a);return u&&null!=lo(Xf(this._lContainer),a)?new hc(u):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function lv(i){return i[8]}function Xf(i){return i[8]||(i[8]=[])}function cv(i,s){let a;const u=s[i.index];if(ti(u))a=u;else{let c;if(8&i.type)c=Ht(u);else{const p=s[11];c=p.createComment("");const _=Gn(i,s);Fl(p,Yp(p,_),c,function li(i,s){return Kt(i)?i.nextSibling(s):s.nextSibling}(p,_),!1)}s[i.index]=a=X0(u,s,c,i),Vs(s,a)}return new mm(a,i,s)}class ep{constructor(s){this.queryList=s,this.matches=null}clone(){return new ep(this.queryList)}setDirty(){this.queryList.setDirty()}}class hv{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const u=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let p=0;p<u;p++){const _=a.getByIndex(p);c.push(this.queries[_.indexInDeclarationView].clone())}return new hv(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Pw(s,a).matches&&this.queries[a].setDirty()}}class ym{constructor(s,a,u=null){this.predicate=s,this.flags=a,this.read=u}}class fv{constructor(s=[]){this.queries=s}elementStart(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let u=0;u<this.length;u++){const c=null!==a?a.length:0,p=this.getByIndex(u).embeddedTView(s,c);p&&(p.indexInDeclarationView=u,null!==a?a.push(p):a=[p])}return null!==a?new fv(a):null}template(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class tp{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new tp(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==a;)u=u.parent;return a===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const p=u[c];this.matchTNodeWithReadOption(s,a,pv(a,p)),this.matchTNodeWithReadOption(s,a,Bc(a,s,p,!1,!1))}else u===Jf?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Bc(a,s,u,!1,!1))}matchTNodeWithReadOption(s,a,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===dc||c===gm||c===Jf&&4&a.type)this.addMatch(a.index,-2);else{const p=Bc(a,s,c,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,u)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function pv(i,s){const a=i.localNames;if(null!==a)for(let u=0;u<a.length;u+=2)if(a[u]===s)return a[u+1];return null}function gh(i,s,a,u){return-1===a?function gv(i,s){return 11&i.type?Zo(i,s):4&i.type?ph(i,s):null}(s,i):-2===a?function xw(i,s,a){return a===dc?Zo(s,i):a===Jf?ph(s,i):a===gm?cv(s,i):void 0}(i,s,u):rs(i,i[1],a,s)}function _m(i,s,a,u){const c=s[19].queries[u];if(null===c.matches){const p=i.data,_=a.matches,E=[];for(let w=0;w<_.length;w+=2){const T=_[w];E.push(T<0?null:gh(s,p[T],_[w+1],a.metadata.read))}c.matches=E}return c.matches}function mv(i,s,a,u){const c=i.queries.getByIndex(a),p=c.matches;if(null!==p){const _=_m(i,s,c,a);for(let E=0;E<p.length;E+=2){const w=p[E];if(w>0)u.push(_[E/2]);else{const T=p[E+1],S=s[-w];for(let k=10;k<S.length;k++){const U=S[k];U[17]===U[3]&&mv(U[1],U,T,u)}if(null!==S[9]){const k=S[9];for(let U=0;U<k.length;U++){const z=k[U];mv(z[1],z,T,u)}}}}}return u}function vm(i){const s=we(),a=Tt(),u=pa();fl(u+1);const c=Pw(a,u);if(i.dirty&&No(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const p=c.crossesNgTemplate?mv(a,s,u,[]):_m(a,s,c,u);i.reset(p,oh),i.notifyOnChanges()}return!0}return!1}function Em(i,s,a,u){const c=Tt();if(c.firstCreatePass){const p=dn();(function Ow(i,s,a){null===i.queries&&(i.queries=new fv),i.queries.track(new tp(s,a))})(c,new ym(s,a,u),p.index),function _v(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function Nw(i,s,a){const u=new sv(4==(4&a));La(i,s,u,u.destroy),null===s[19]&&(s[19]=new hv),s[19].queries.push(new ep(u))}(c,we(),a)}function Rw(){return function yv(i,s){return i[19].queries[s].queryList}(we(),pa())}function Pw(i,s){return i.queries.getByIndex(s)}function op(...i){}const yh=new on("Application Initializer");let St=(()=>{class i{constructor(a){this.appInits=a,this.resolve=op,this.reject=op,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const p=this.appInits[c]();if(Pg(p))a.push(p);else if(jd(p)){const _=new Promise((E,w)=>{p.subscribe({complete:E,error:w})});a.push(_)}}Promise.all(a).then(()=>{u()}).catch(c=>{this.reject(c)}),0===a.length&&u(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(ke(yh,8))},i.\u0275prov=Bt({token:i,factory:i.\u0275fac}),i})();const Av=new on("AppId"),ap={provide:Av,useFactory:function Zw(){return`${Sv()}${Sv()}${Sv()}`},deps:[]};function Sv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const un=new on("Platform Initializer"),Qr=new on("Platform ID"),Eo=new on("appBootstrapListener");let Kw=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Bt({token:i,factory:i.\u0275fac}),i})();const gc=new on("LocaleId"),Mv=new on("DefaultCurrencyCode");class VC{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let xv=(()=>{class i{compileModuleSync(a){return new um(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const u=this.compileModuleSync(a),p=f(kn(a).declarations).reduce((_,E)=>{const w=Pn(E);return w&&_.push(new sm(w)),_},[]);return new VC(u,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Bt({token:i,factory:i.\u0275fac}),i})();const _T=(()=>Promise.resolve(0))();function Hn(i){"undefined"==typeof Zone?_T.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class ms{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vo(!1),this.onMicrotaskEmpty=new vo(!1),this.onStable=new vo(!1),this.onError=new vo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&a,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function Qw(){let i=Rt.requestAnimationFrame,s=Rt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function jC(i){const s=()=>{!function BC(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Rt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Rv(i),i.isCheckStableRunning=!0,Om(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Rv(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,u,c,p,_,E)=>{try{return Jw(i),a.invokeTask(c,p,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),$C(i)}},onInvoke:(a,u,c,p,_,E,w)=>{try{return Jw(i),a.invoke(c,p,_,E,w)}finally{i.shouldCoalesceRunChangeDetection&&s(),$C(i)}},onHasTask:(a,u,c,p)=>{a.hasTask(c,p),u===c&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,Rv(i),Om(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,u,c,p)=>(a.handleError(c,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ms.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ms.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,u){return this._inner.run(s,a,u)}runTask(s,a,u,c){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+c,s,UC,op,op);try{return p.runTask(_,a,u)}finally{p.cancelTask(_)}}runGuarded(s,a,u){return this._inner.runGuarded(s,a,u)}runOutsideAngular(s){return this._outer.run(s)}}const UC={};function Om(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Rv(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Jw(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function $C(i){i._nesting--,Om(i)}class HC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new vo,this.onMicrotaskEmpty=new vo,this.onStable=new vo,this.onError=new vo}run(s,a,u){return s.apply(a,u)}runGuarded(s,a,u){return s.apply(a,u)}runOutsideAngular(s){return s()}runTask(s,a,u,c){return s.apply(a,u)}}let Xw=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ms.assertNotInAngularZone(),Hn(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Hn(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(a)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,u,c){let p=-1;u&&u>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:c})}whenStable(a,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,u,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(ke(ms))},i.\u0275prov=Bt({token:i,factory:i.\u0275fac}),i})(),Nv=(()=>{class i{constructor(){this._applications=new Map,Ws.addToWindow(this)}registerApplication(a,u){this._applications.set(a,u)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,u=!0){return Ws.findTestabilityInTree(this,a,u)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Bt({token:i,factory:i.\u0275fac}),i})();class Wa{addToWindow(s){}findTestabilityInTree(s,a,u){return null}}function vT(i){Ws=i}let Jr,Ws=new Wa;const Ov=new on("AllowMultipleToken");class eI{constructor(s,a){this.name=s,this.token=a}}function tI(i,s,a=[]){const u=`Platform: ${s}`,c=new on(u);return(p=[])=>{let _=_h();if(!_||_.injector.get(Ov,!1))if(i)i(a.concat(p).concat({provide:c,useValue:!0}));else{const E=a.concat(p).concat({provide:c,useValue:!0},{provide:Dg,useValue:"platform"});!function km(i){if(Jr&&!Jr.destroyed&&!Jr.injector.get(Ov,!1))throw new xe(400,"");Jr=i.get(kv);const s=i.get(un,null);s&&s.forEach(a=>a())}(hr.create({providers:E,name:u}))}return function mc(i){const s=_h();if(!s)throw new xe(401,"");return s}()}}function _h(){return Jr&&!Jr.destroyed?Jr:null}let kv=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,u){const E=function Fv(i,s){let a;return a="noop"===i?new HC:("zone.js"===i?void 0:i)||new ms({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),w=[{provide:ms,useValue:E}];return E.run(()=>{const T=hr.create({providers:w,parent:this.injector,name:a.moduleType.name}),S=a.create(T),k=S.injector.get(An,null);if(!k)throw new xe(402,"");return E.runOutsideAngular(()=>{const U=E.onError.subscribe({next:z=>{k.handleError(z)}});S.onDestroy(()=>{lp(this._modules,S),U.unsubscribe()})}),function qC(i,s,a){try{const u=a();return Pg(u)?u.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):u}catch(u){throw s.runOutsideAngular(()=>i.handleError(u)),u}}(k,E,()=>{const U=S.injector.get(St);return U.runInitializers(),U.donePromise.then(()=>(function M_(i){tt(i,"Expected localeId to be defined"),"string"==typeof i&&(rw=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(gc,Yu)||Yu),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,u=[]){const c=nI({},u);return function Pm(i,s,a){const u=new um(a);return Promise.resolve(u)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,c))}_moduleDoBootstrap(a){const u=a.injector.get(up);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new xe(403,"");a.instance.ngDoBootstrap(u)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new xe(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(ke(hr))},i.\u0275prov=Bt({token:i,factory:i.\u0275fac}),i})();function nI(i,s){return Array.isArray(s)?s.reduce(nI,i):Object.assign(Object.assign({},i),s)}let up=(()=>{class i{constructor(a,u,c,p,_){this._zone=a,this._injector=u,this._exceptionHandler=c,this._componentFactoryResolver=p,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new O.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),w=new O.y(T=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{ms.assertNotInAngularZone(),Hn(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{ms.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{S.unsubscribe(),k.unsubscribe()}});this.isStable=(0,pe.T)(E,w.pipe((0,X.B)()))}bootstrap(a,u){if(!this._initStatus.done)throw new xe(405,"");let c;c=a instanceof Xg?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(c.componentType);const p=function GC(i){return i.isBoundToModule}(c)?void 0:this._injector.get(fc),E=c.create(hr.NULL,[],u||c.selector,p),w=E.location.nativeElement,T=E.injector.get(Xw,null),S=T&&E.injector.get(Nv);return T&&S&&S.registerApplication(w,T),E.onDestroy(()=>{this.detachView(E.hostView),lp(this.components,E),S&&S.unregisterApplication(w)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new xe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const u=a;this._views.push(u),u.attachToAppRef(this)}detachView(a){const u=a;lp(this._views,u),u.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Eo,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(ke(ms),ke(hr),ke(An),ke(Zf),ke(St))},i.\u0275prov=Bt({token:i,factory:i.\u0275fac}),i})();function lp(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Xu=!0,Lv=!1;function iI(){return Lv=!0,Xu}function Vv(){if(Lv)throw new Error("Cannot enable prod mode after platform setup.");Xu=!1}let Lm=(()=>{class i{}return i.__NG_ELEMENT_ID__=oI,i})();function oI(i){return function dp(i,s,a){if(tu(i)&&!a){const u=qn(i.index,s);return new hc(u,u)}return 47&i.type?new hc(s[16],s):null}(dn(),we(),16==(16&i))}class cI{constructor(){}supports(s){return wn(s)}create(s){return new dI(s)}}const KC=(i,s)=>s;class dI{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||KC}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,u=this._removalsHead,c=0,p=null;for(;a||u;){const _=!u||a&&a.currentIndex<$m(u,c,p)?a:u,E=$m(_,c,p),w=_.currentIndex;if(_===u)c--,u=u._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{p||(p=[]);const T=E-c,S=w-c;if(T!=S){for(let U=0;U<T;U++){const z=U<p.length?p[U]:p[U]=0,he=z+U;S<=he&&he<T&&(p[U]=z+1)}p[_.previousIndex]=S-T}}E!==w&&s(_,E,w)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!wn(s))throw new xe(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,p,_,a=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)p=s[E],_=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,_)?(u&&(a=this._verifyReinsertion(a,p,_,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,E),u=!0),a=a._next}else c=0,function Jy(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[kd()]();let u;for(;!(u=a.next()).done;)s(u.value)}}(s,E=>{_=this._trackByFn(c,E),null!==a&&Object.is(a.trackById,_)?(u&&(a=this._verifyReinsertion(a,E,_,c)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,c),u=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,u,c){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,p,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,p,c)):s=this._addAfter(new hI(a,u),p,c),s}_verifyReinsertion(s,a,u,c){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==p?s=this._reinsertAfter(p,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,p=s._nextRemoved;return null===c?this._removalsHead=p:c._nextRemoved=p,null===p?this._removalsTail=c:p._prevRemoved=c,this._insertAfter(s,a,u),this._addToMoves(s,u),s}_moveAfter(s,a,u){return this._unlink(s),this._insertAfter(s,a,u),this._addToMoves(s,u),s}_addAfter(s,a,u){return this._insertAfter(s,a,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,u){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Hv),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,u=s._next;return null===a?this._itHead=u:a._next=u,null===u?this._itTail=a:u._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Hv),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class hI{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class fI{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===a||a<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const a=s._prevDup,u=s._nextDup;return null===a?this._head=u:a._nextDup=u,null===u?this._tail=a:u._prevDup=a,null===this._head}}class Hv{constructor(){this.map=new Map}put(s){const a=s.trackById;let u=this.map.get(a);u||(u=new fI,this.map.set(a,u)),u.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function $m(i,s,a){const u=i.previousIndex;if(null===u)return u;let c=0;return a&&u<a.length&&(c=a[u]),u+s+c}class hp{constructor(){}supports(s){return s instanceof Map||Sg(s)}create(){return new YC}}class YC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Sg(s)))throw new xe(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,u),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(c,u);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let u=a;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const u=s._prev;return a._next=s,a._prev=u,s._prev=a,u&&(u._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const p=c._prev,_=c._next;return p&&(p._next=_),_&&(_._prev=p),c._next=null,c._prev=null,c}const u=new pI(s);return this._records.set(s,u),u.currentValue=a,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(u=>a(s[u],u))}}class pI{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function za(){return new Hm([new cI])}let Hm=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(null!=u){const c=u.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||za()),deps:[[i,new Ar,new ur]]}}find(a){const u=this.factories.find(c=>c.supports(a));if(null!=u)return u;throw new xe(901,"")}}return i.\u0275prov=Bt({token:i,providedIn:"root",factory:za}),i})();function gI(){return new Gm([new hp])}let Gm=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(u){const c=u.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||gI()),deps:[[i,new Ar,new ur]]}}find(a){const u=this.factories.find(p=>p.supports(a));if(u)return u;throw new xe(901,"")}}return i.\u0275prov=Bt({token:i,providedIn:"root",factory:gI}),i})();const QC=[new hp],XC=new Hm([new cI]),mI=new Gm(QC),tb=tI(null,"core",[{provide:Qr,useValue:"unknown"},{provide:kv,deps:[hr]},{provide:Nv,deps:[]},{provide:Kw,deps:[]}]),Gv=[{provide:up,useClass:up,deps:[ms,hr,An,Zf,St]},{provide:im,deps:[ms],useFactory:function ib(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(a){s.push(a)}}},{provide:St,useClass:St,deps:[[new ur,yh]]},{provide:xv,useClass:xv,deps:[]},ap,{provide:Hm,useFactory:function nb(){return XC},deps:[]},{provide:Gm,useFactory:function yI(){return mI},deps:[]},{provide:gc,useFactory:function rb(i){return i||function Ih(){return"undefined"!=typeof $localize&&$localize.locale||Yu}()},deps:[[new Tr(gc),new ur,new Ar]]},{provide:Mv,useValue:"USD"}];let sb=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(ke(up))},i.\u0275mod=yr({type:i}),i.\u0275inj=jt({providers:Gv}),i})()},3942:(et,Ce,P)=>{"use strict";P.d(Ce,{Z:()=>xe});var g=P(2090),Y=P(4859),O=P(9681),pe=P(1877);class X{constructor(q,oe){this._delegate=q,this.firebase=oe,(0,O._addComponent)(q,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=q.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(q){this._delegate.automaticDataCollectionEnabled=q}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(q=>{this._delegate.checkDestroyed(),q()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(q,oe=O._DEFAULT_ENTRY_NAME){var Te;this._delegate.checkDestroyed();const Re=this._delegate.container.getProvider(q);return!Re.isInitialized()&&"EXPLICIT"===(null===(Te=Re.getComponent())||void 0===Te?void 0:Te.instantiationMode)&&Re.initialize(),Re.getImmediate({identifier:oe})}_removeServiceInstance(q,oe=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(q).clearInstance(oe)}_addComponent(q){(0,O._addComponent)(this._delegate,q)}_addOrOverwriteComponent(q){(0,O._addOrOverwriteComponent)(this._delegate,q)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const re=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function le(){const Fe=function ue(Fe){const q={},oe={__esModule:!0,initializeApp:function ie(Ue,ee={}){const Z=O.initializeApp(Ue,ee);if((0,g.r3)(q,Z.name))return q[Z.name];const ne=new Fe(Z,oe);return q[Z.name]=ne,ne},app:Re,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function ye(Ue){const ee=Ue.name,Z=ee.replace("-compat","");if(O._registerComponent(Ue)&&"PUBLIC"===Ue.type){const ne=(me=Re())=>{if("function"!=typeof me[Z])throw re.create("invalid-app-argument",{appName:ee});return me[Z]()};void 0!==Ue.serviceProps&&(0,g.ZB)(ne,Ue.serviceProps),oe[Z]=ne,Fe.prototype[Z]=function(...me){return this._getService.bind(this,ee).apply(this,Ue.multipleInstances?me:[])}}return"PUBLIC"===Ue.type?oe[Z]:null},removeApp:function Te(Ue){delete q[Ue]},useAsService:function je(Ue,ee){return"serverAuth"===ee?null:ee},modularAPIs:O}};function Re(Ue){if(!(0,g.r3)(q,Ue=Ue||O._DEFAULT_ENTRY_NAME))throw re.create("no-app",{appName:Ue});return q[Ue]}return oe.default=oe,Object.defineProperty(oe,"apps",{get:function ge(){return Object.keys(q).map(Ue=>q[Ue])}}),Re.App=Fe,oe}(X);return Fe.INTERNAL=Object.assign(Object.assign({},Fe.INTERNAL),{createFirebaseNamespace:le,extendNamespace:function q(oe){(0,g.ZB)(Fe,oe)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Fe}(),V=new pe.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){V.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Fe=self.firebase.SDK_VERSION;Fe&&Fe.indexOf("LITE")>=0&&V.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const xe=B;!function De(Fe){(0,O.registerVersion)("@firebase/app-compat","0.1.17",Fe)}()},9681:(et,Ce,P)=>{"use strict";P.r(Ce),P.d(Ce,{FirebaseError:()=>pe.ZR,SDK_VERSION:()=>mr,_DEFAULT_ENTRY_NAME:()=>Cn,_addComponent:()=>Gt,_addOrOverwriteComponent:()=>rr,_apps:()=>st,_clearComponents:()=>At,_components:()=>Rn,_getProvider:()=>Ci,_registerComponent:()=>Bt,_removeServiceInstance:()=>jt,deleteApp:()=>Ti,getApp:()=>Es,getApps:()=>Xr,initializeApp:()=>bi,onLog:()=>Nn,registerVersion:()=>Nr,setLogLevel:()=>yn});var g=P(5861),Y=P(4859),O=P(1877),pe=P(2090);class X{constructor(Ke){this.container=Ke}getPlatformInfoString(){return this.container.getProviders().map(Ct=>{if(function fe(ct){const Ke=ct.getComponent();return"VERSION"===(null==Ke?void 0:Ke.type)}(Ct)){const en=Ct.getImmediate();return`${en.library}/${en.version}`}return null}).filter(Ct=>Ct).join(" ")}}const re="@firebase/app",le=new O.Yd("@firebase/app"),Cn="[DEFAULT]",tt={[re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},st=new Map,Rn=new Map;function Gt(ct,Ke){try{ct.container.addComponent(Ke)}catch(Ct){le.debug(`Component ${Ke.name} failed to register with FirebaseApp ${ct.name}`,Ct)}}function rr(ct,Ke){ct.container.addOrOverwriteComponent(Ke)}function Bt(ct){const Ke=ct.name;if(Rn.has(Ke))return le.debug(`There were multiple attempts to register component ${Ke}.`),!1;Rn.set(Ke,ct);for(const Ct of st.values())Gt(Ct,ct);return!0}function Ci(ct,Ke){return ct.container.getProvider(Ke)}function jt(ct,Ke,Ct=Cn){Ci(ct,Ke).clearInstance(Ct)}function At(){Rn.clear()}const Qn=new pe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class vs{constructor(Ke,Ct,en){this._isDeleted=!1,this._options=Object.assign({},Ke),this._config=Object.assign({},Ct),this._name=Ct.name,this._automaticDataCollectionEnabled=Ct.automaticDataCollectionEnabled,this._container=en,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ke){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ke}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ke){this._isDeleted=Ke}checkDestroyed(){if(this.isDeleted)throw Qn.create("app-deleted",{appName:this._name})}}const mr="9.6.6";function bi(ct,Ke={}){"object"!=typeof Ke&&(Ke={name:Ke});const Ct=Object.assign({name:Cn,automaticDataCollectionEnabled:!1},Ke),en=Ct.name;if("string"!=typeof en||!en)throw Qn.create("bad-app-name",{appName:String(en)});const ir=st.get(en);if(ir){if((0,pe.vZ)(ct,ir.options)&&(0,pe.vZ)(Ct,ir.config))return ir;throw Qn.create("duplicate-app",{appName:en})}const bt=new Y.H0(en);for(const ot of Rn.values())bt.addComponent(ot);const Ye=new vs(ct,Ct,bt);return st.set(en,Ye),Ye}function Es(ct=Cn){const Ke=st.get(ct);if(!Ke)throw Qn.create("no-app",{appName:ct});return Ke}function Xr(){return Array.from(st.values())}function Ti(ct){return ut.apply(this,arguments)}function ut(){return(ut=(0,g.Z)(function*(ct){const Ke=ct.name;st.has(Ke)&&(st.delete(Ke),yield Promise.all(ct.container.getProviders().map(Ct=>Ct.delete())),ct.isDeleted=!0)})).apply(this,arguments)}function Nr(ct,Ke,Ct){var en;let ir=null!==(en=tt[ct])&&void 0!==en?en:ct;Ct&&(ir+=`-${Ct}`);const bt=ir.match(/\s|\//),Ye=Ke.match(/\s|\//);if(bt||Ye){const ot=[`Unable to register library "${ir}" with version "${Ke}":`];return bt&&ot.push(`library name "${ir}" contains illegal characters (whitespace or "/")`),bt&&Ye&&ot.push("and"),Ye&&ot.push(`version name "${Ke}" contains illegal characters (whitespace or "/")`),void le.warn(ot.join(" "))}Bt(new Y.wA(`${ir}-version`,()=>({library:ir,version:Ke}),"VERSION"))}function Nn(ct,Ke){if(null!==ct&&"function"!=typeof ct)throw Qn.create("invalid-log-argument");(0,O.Am)(ct,Ke)}function yn(ct){(0,O.Ub)(ct)}!function Zs(ct){Bt(new Y.wA("platform-logger",Ke=>new X(Ke),"PRIVATE")),Nr(re,"0.7.16",ct),Nr(re,"0.7.16","esm2017"),Nr("fire-js","")}("")},4859:(et,Ce,P)=>{"use strict";P.d(Ce,{wA:()=>O,H0:()=>ue});var g=P(5861),Y=P(2090);class O{constructor(B,V,K){this.name=B,this.instanceFactory=V,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const pe="[DEFAULT]";class X{constructor(B,V){this.name=B,this.container=V,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const V=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(V)){const K=new Y.BH;if(this.instancesDeferred.set(V,K),this.isInitialized(V)||this.shouldAutoInitialize())try{const Ve=this.getOrInitializeService({instanceIdentifier:V});Ve&&K.resolve(Ve)}catch(Ve){}}return this.instancesDeferred.get(V).promise}getImmediate(B){var V;const K=this.normalizeInstanceIdentifier(null==B?void 0:B.identifier),Ve=null!==(V=null==B?void 0:B.optional)&&void 0!==V&&V;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(Ve)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(De){if(Ve)return null;throw De}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function re(le){return"EAGER"===le.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:pe})}catch(V){}for(const[V,K]of this.instancesDeferred.entries()){const Ve=this.normalizeInstanceIdentifier(V);try{const De=this.getOrInitializeService({instanceIdentifier:Ve});K.resolve(De)}catch(De){}}}}clearInstance(B=pe){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,g.Z)(function*(){const V=Array.from(B.instances.values());yield Promise.all([...V.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...V.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=pe){return this.instances.has(B)}getOptions(B=pe){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:V={}}=B,K=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ve=this.getOrInitializeService({instanceIdentifier:K,options:V});for(const[De,xe]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(De)&&xe.resolve(Ve);return Ve}onInit(B,V){var K;const Ve=this.normalizeInstanceIdentifier(V),De=null!==(K=this.onInitCallbacks.get(Ve))&&void 0!==K?K:new Set;De.add(B),this.onInitCallbacks.set(Ve,De);const xe=this.instances.get(Ve);return xe&&B(xe,Ve),()=>{De.delete(B)}}invokeOnInitCallbacks(B,V){const K=this.onInitCallbacks.get(V);if(K)for(const Ve of K)try{Ve(B,V)}catch(De){}}getOrInitializeService({instanceIdentifier:B,options:V={}}){let K=this.instances.get(B);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(le=B,le===pe?void 0:le),options:V}),this.instances.set(B,K),this.instancesOptions.set(B,V),this.invokeOnInitCallbacks(K,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,K)}catch(Ve){}var le;return K||null}normalizeInstanceIdentifier(B=pe){return this.component?this.component.multipleInstances?B:pe:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ue{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const V=this.getProvider(B.name);if(V.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);V.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const V=new X(B,this);return this.providers.set(B,V),V}getProviders(){return Array.from(this.providers.values())}}},1877:(et,Ce,P)=>{"use strict";P.d(Ce,{in:()=>Y,Yd:()=>re,Ub:()=>ue,Am:()=>le});const g=[];var Y=(()=>{return(B=Y||(Y={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",Y;var B})();const O={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},pe=Y.INFO,X={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},fe=(B,V,...K)=>{if(V<B.logLevel)return;const Ve=(new Date).toISOString(),De=X[V];if(!De)throw new Error(`Attempted to log a message with an invalid logType (value: ${V})`);console[De](`[${Ve}]  ${B.name}:`,...K)};class re{constructor(V){this.name=V,this._logLevel=pe,this._logHandler=fe,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(V){if(!(V in Y))throw new TypeError(`Invalid value "${V}" assigned to \`logLevel\``);this._logLevel=V}setLogLevel(V){this._logLevel="string"==typeof V?O[V]:V}get logHandler(){return this._logHandler}set logHandler(V){if("function"!=typeof V)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=V}get userLogHandler(){return this._userLogHandler}set userLogHandler(V){this._userLogHandler=V}debug(...V){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...V),this._logHandler(this,Y.DEBUG,...V)}log(...V){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...V),this._logHandler(this,Y.VERBOSE,...V)}info(...V){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...V),this._logHandler(this,Y.INFO,...V)}warn(...V){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...V),this._logHandler(this,Y.WARN,...V)}error(...V){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...V),this._logHandler(this,Y.ERROR,...V)}}function ue(B){g.forEach(V=>{V.setLogLevel(B)})}function le(B,V){for(const K of g){let Ve=null;V&&V.level&&(Ve=O[V.level]),K.userLogHandler=null===B?null:(De,xe,...Fe)=>{const q=Fe.map(oe=>{if(null==oe)return null;if("string"==typeof oe)return oe;if("number"==typeof oe||"boolean"==typeof oe)return oe.toString();if(oe instanceof Error)return oe.message;try{return JSON.stringify(oe)}catch(Te){return null}}).filter(oe=>oe).join(" ");xe>=(null!=Ve?Ve:De.logLevel)&&B({level:Y[xe].toLowerCase(),message:q,args:Fe,type:De.name})}}}},5861:(et,Ce,P)=>{"use strict";function g(O,pe,X,fe,re,ue,le){try{var B=O[ue](le),V=B.value}catch(K){return void X(K)}B.done?pe(V):Promise.resolve(V).then(fe,re)}function Y(O){return function(){var pe=this,X=arguments;return new Promise(function(fe,re){var ue=O.apply(pe,X);function le(V){g(ue,fe,re,le,B,"next",V)}function B(V){g(ue,fe,re,le,B,"throw",V)}le(void 0)})}}P.d(Ce,{Z:()=>Y})}},et=>{et(et.s=1677)}]);